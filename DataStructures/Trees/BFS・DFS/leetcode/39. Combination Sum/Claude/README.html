<!DOCTYPE html>
<html lang="ja">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Combination Sum Algorithm Analysis</title>
        <style>
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                margin: 0;
                padding: 20px;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                min-height: 100vh;
            }

            .container {
                max-width: 1200px;
                margin: 0 auto;
                background: white;
                border-radius: 15px;
                padding: 30px;
                box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            }

            h1 {
                text-align: center;
                color: #2c3e50;
                margin-bottom: 40px;
                font-size: 2.5em;
                background: linear-gradient(45deg, #667eea, #764ba2);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
            }

            h2 {
                color: #34495e;
                border-bottom: 3px solid #3498db;
                padding-bottom: 10px;
                margin-top: 40px;
            }

            .algorithm-step {
                background: #f8f9fa;
                border-left: 5px solid #3498db;
                padding: 20px;
                margin: 20px 0;
                border-radius: 0 10px 10px 0;
                position: relative;
            }

            .step-number {
                position: absolute;
                left: -15px;
                top: -10px;
                background: #3498db;
                color: white;
                width: 30px;
                height: 30px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                font-weight: bold;
            }

            .tree-container {
                background: #ffffff;
                border: 2px solid #e9ecef;
                border-radius: 10px;
                padding: 20px;
                margin: 20px 0;
                overflow-x: auto;
            }

            .tree-node {
                background: #e3f2fd;
                border: 2px solid #2196f3;
                border-radius: 8px;
                padding: 8px 12px;
                margin: 5px;
                display: inline-block;
                font-weight: bold;
                position: relative;
                min-width: 80px;
                text-align: center;
            }

            .tree-node.valid {
                background: #c8e6c9;
                border-color: #4caf50;
            }

            .tree-node.invalid {
                background: #ffcdd2;
                border-color: #f44336;
            }

            .tree-node.current {
                background: #fff3e0;
                border-color: #ff9800;
                animation: pulse 1.5s infinite;
            }

            @keyframes pulse {

                0%,
                100% {
                    transform: scale(1);
                }

                50% {
                    transform: scale(1.05);
                }
            }

            .tree-level {
                margin: 20px 0;
                text-align: center;
            }

            .level-label {
                font-weight: bold;
                color: #666;
                margin-bottom: 10px;
            }

            .array-visualization {
                display: flex;
                justify-content: center;
                gap: 5px;
                margin: 20px 0;
            }

            .array-item {
                background: #f0f0f0;
                border: 2px solid #ccc;
                padding: 10px 15px;
                border-radius: 5px;
                font-weight: bold;
                position: relative;
            }

            .array-item.selected {
                background: #4caf50;
                color: white;
                border-color: #388e3c;
            }

            .array-item.considering {
                background: #ff9800;
                color: white;
                border-color: #f57c00;
            }

            .code-block {
                background: #2d3748;
                color: #e2e8f0;
                padding: 20px;
                border-radius: 10px;
                overflow-x: auto;
                font-family: 'Courier New', monospace;
                margin: 20px 0;
                position: relative;
            }

            .code-highlight {
                background: rgba(255, 255, 0, 0.2);
                padding: 2px 4px;
                border-radius: 3px;
            }

            .complexity-box {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 20px;
                border-radius: 10px;
                margin: 20px 0;
            }

            .example-container {
                border: 2px solid #17a2b8;
                border-radius: 10px;
                padding: 20px;
                margin: 20px 0;
                background: #f7fdff;
            }

            .path-trace {
                background: #fff8e1;
                border-left: 4px solid #ffc107;
                padding: 15px;
                margin: 10px 0;
                font-family: monospace;
            }

            .interactive-demo {
                text-align: center;
                margin: 30px 0;
            }

            .demo-button {
                background: linear-gradient(45deg, #667eea, #764ba2);
                color: white;
                border: none;
                padding: 12px 24px;
                border-radius: 25px;
                cursor: pointer;
                font-size: 16px;
                margin: 5px;
                transition: transform 0.2s;
            }

            .demo-button:hover {
                transform: translateY(-2px);
            }

            .demo-output {
                background: #f8f9fa;
                border: 1px solid #dee2e6;
                border-radius: 8px;
                padding: 20px;
                margin-top: 20px;
                text-align: left;
                font-family: monospace;
            }
        </style>
    </head>

    <body>
        <div class="container">
            <h1>ğŸ” Combination Sum Algorithm Analysis</h1>

            <h2>ğŸ“Š ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ æ¦‚è¦</h2>
            <div class="algorithm-step">
                <div class="step-number">1</div>
                <strong>å•é¡Œè¨­å®š:</strong> é…åˆ— candidates = [2,3,6,7], target = 7 ã®å ´åˆã‚’ä¾‹ã«è§£æ
            </div>

            <h2>ğŸ—ï¸ åˆæœŸåŒ–ãƒ•ã‚§ãƒ¼ã‚º</h2>
            <div class="example-container">
                <h3>Step 1: é…åˆ—ã®ã‚½ãƒ¼ãƒˆ</h3>
                <div style="display: flex; justify-content: space-around; align-items: center; margin: 20px 0;">
                    <div>
                        <p><strong>ã‚½ãƒ¼ãƒˆå‰:</strong></p>
                        <div class="array-visualization">
                            <div class="array-item">2</div>
                            <div class="array-item">3</div>
                            <div class="array-item">6</div>
                            <div class="array-item">7</div>
                        </div>
                    </div>
                    <div style="font-size: 24px;">â†’</div>
                    <div>
                        <p><strong>ã‚½ãƒ¼ãƒˆå¾Œ:</strong></p>
                        <div class="array-visualization">
                            <div class="array-item selected">2</div>
                            <div class="array-item selected">3</div>
                            <div class="array-item selected">6</div>
                            <div class="array-item selected">7</div>
                        </div>
                    </div>
                </div>
                <p><strong>åŠ¹æœ:</strong> å°ã•ã„æ•°ã‹ã‚‰è©¦ã™ã“ã¨ã§æ—©æœŸçµ‚äº†ãŒå¯èƒ½</p>
            </div>

            <h2>ğŸŒ³ DFSæ¢ç´¢æœ¨ã®å¯è¦–åŒ–</h2>
            <div class="tree-container">
                <div class="tree-level">
                    <div class="level-label">Level 0 (root): target=7, startIndex=0</div>
                    <div class="tree-node current">é–‹å§‹<br />[7]</div>
                </div>

                <div class="tree-level">
                    <div class="level-label">Level 1: å„å€™è£œã‚’è©¦è¡Œ</div>
                    <div class="tree-node">2ã‚’é¸æŠ<br />[5]</div>
                    <div class="tree-node">3ã‚’é¸æŠ<br />[4]</div>
                    <div class="tree-node">6ã‚’é¸æŠ<br />[1]</div>
                    <div class="tree-node valid">7ã‚’é¸æŠ<br />[0] âœ“</div>
                </div>

                <div class="tree-level">
                    <div class="level-label">Level 2: 2ã‚’é¸æŠã—ãŸå ´åˆã®å±•é–‹</div>
                    <div class="tree-node">2,2ã‚’é¸æŠ<br />[3]</div>
                    <div class="tree-node">2,3ã‚’é¸æŠ<br />[2]</div>
                    <div class="tree-node invalid">2,6ã‚’é¸æŠ<br />[-1] âœ—</div>
                </div>

                <div class="tree-level">
                    <div class="level-label">Level 3: ã•ã‚‰ãªã‚‹å±•é–‹</div>
                    <div class="tree-node valid">2,2,3ã‚’é¸æŠ<br />[0] âœ“</div>
                    <div class="tree-node invalid">2,2,6ã‚’é¸æŠ<br />[-3] âœ—</div>
                </div>
            </div>

            <h2>ğŸ”„ ãƒãƒƒã‚¯ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã®å‹•ä½œ</h2>
            <div class="example-container">
                <h3>æ¢ç´¢ãƒ‘ã‚¹ã®è©³ç´°ãƒˆãƒ¬ãƒ¼ã‚¹</h3>
                <div class="path-trace">
                    <strong>Path 1:</strong> [] â†’ [2] â†’ [2,2] â†’ [2,2,3] â†’ targeté”æˆ! â†’ ãƒãƒƒã‚¯ãƒˆãƒ©ãƒƒã‚¯
                </div>
                <div class="path-trace">
                    <strong>Path 2:</strong> [] â†’ [2] â†’ [2,2] â†’ [2,2,6] â†’ ç„¡åŠ¹(sum>target) â†’ ãƒãƒƒã‚¯ãƒˆãƒ©ãƒƒã‚¯
                </div>
                <div class="path-trace">
                    <strong>Path 3:</strong> [] â†’ [2] â†’ [2,3] â†’ [2,3,3] â†’ ç„¡åŠ¹(sum>target) â†’ ãƒãƒƒã‚¯ãƒˆãƒ©ãƒƒã‚¯
                </div>
                <div class="path-trace">
                    <strong>Path 4:</strong> [] â†’ [7] â†’ targeté”æˆ! â†’ è§£ã‚’è¨˜éŒ²
                </div>
            </div>

            <h2>âš¡ æœ€é©åŒ–æŠ€æ³•</h2>
            <div class="algorithm-step">
                <div class="step-number">1</div>
                <strong>æ—©æœŸçµ‚äº† (Pruning):</strong>
                <div class="code-block">
                    <span class="code-highlight">if (candidate > remainingTarget) {
                        break; // ã‚½ãƒ¼ãƒˆæ¸ˆã¿ãªã®ã§ä»¥é™ã‚‚å…¨ã¦ç„¡åŠ¹
                        }</span>
                </div>
            </div>

            <div class="algorithm-step">
                <div class="step-number">2</div>
                <strong>é‡è¤‡å›é¿:</strong> startIndexã«ã‚ˆã‚ŠåŒã˜çµ„ã¿åˆã‚ã›ã®é‡è¤‡ã‚’é˜²æ­¢
            </div>

            <div class="algorithm-step">
                <div class="step-number">3</div>
                <strong>ãƒ¡ãƒ¢ãƒªåŠ¹ç‡:</strong> ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰æ¼”ç®—å­ã«ã‚ˆã‚‹åŠ¹ç‡çš„ãªé…åˆ—ã‚³ãƒ”ãƒ¼
            </div>

            <h2>ğŸ“ˆ è¨ˆç®—é‡è§£æ</h2>
            <div class="complexity-box">
                <h3>æ™‚é–“è¨ˆç®—é‡: O(N^(T/M))</h3>
                <p>â€¢ N: å€™è£œã®æ•° (4)</p>
                <p>â€¢ T: targetå€¤ (7)</p>
                <p>â€¢ M: æœ€å°å€™è£œå€¤ (2)</p>
                <p>â€¢ å®Ÿéš›ã®è¨ˆç®—: 4^(7/2) â‰ˆ 4^3.5 â‰ˆ 128 (ç†è«–ä¸Šé™)</p>

                <h3>ç©ºé–“è¨ˆç®—é‡: O(T/M)</h3>
                <p>â€¢ å†å¸°ã‚¹ã‚¿ãƒƒã‚¯ã®æœ€å¤§æ·±åº¦</p>
                <p>â€¢ å®Ÿéš›ã®è¨ˆç®—: 7/2 â‰ˆ 4ãƒ¬ãƒ™ãƒ«</p>
            </div>

            <h2>ğŸ¯ ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ‡ãƒ¢</h2>
            <div class="interactive-demo">
                <div>
                    <label>Candidates: </label>
                    <input type="text" id="candidatesInput" value="2,3,6,7" style="padding: 8px; border-radius: 5px; border: 1px solid #ccc;">
                    <label>Target: </label>
                    <input type="number" id="targetInput" value="7" style="padding: 8px; border-radius: 5px; border: 1px solid #ccc; width: 80px;">
                    <button class="demo-button" onclick="runDemo()">å®Ÿè¡Œ</button>
                    <button class="demo-button" onclick="stepByStep()">ã‚¹ãƒ†ãƒƒãƒ—å®Ÿè¡Œ</button>
                </div>
                <div class="demo-output" id="demoOutput">
                    çµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™...
                </div>
            </div>

            <h2>ğŸ” å®Ÿè£…ã®ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒˆ</h2>
            <div class="code-block">
                // TypeScriptå®Ÿè£…ã®é‡è¦éƒ¨åˆ†
                function dfs(startIndex: number, remainingTarget: number): void {
                // <span class="code-highlight">ãƒ™ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹: ç›®æ¨™é”æˆ</span>
                if (remainingTarget === 0) {
                result.push([...currentCombination]);
                return;
                }

                for (let i = startIndex; i < candidates.length; i++) { const candidate=candidates[i]; // <span class="code-highlight">æ—©æœŸçµ‚äº†ã«ã‚ˆã‚‹æœ€é©åŒ–</span>
                    if (candidate > remainingTarget) break;

                    // <span class="code-highlight">é¸æŠ</span>
                    currentCombination.push(candidate);

                    // <span class="code-highlight">å†å¸° (åŒã˜ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‹ã‚‰é–‹å§‹ = åŒã˜æ•°å­—ã‚’å†åˆ©ç”¨å¯èƒ½)</span>
                    dfs(i, remainingTarget - candidate);

                    // <span class="code-highlight">ãƒãƒƒã‚¯ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°</span>
                    currentCombination.pop();
                    }
                    }
            </div>

            <h2>âœ… å®Ÿè¡Œçµæœã®æ¤œè¨¼</h2>
            <div class="example-container">
                <h3>Input: candidates = [2,3,6,7], target = 7</h3>
                <h3>Output: [[2,2,3], [7]]</h3>
                <div style="display: flex; justify-content: space-around; margin: 20px 0;">
                    <div class="tree-node valid">
                        è§£1: [2,2,3]<br />
                        2+2+3 = 7 âœ“
                    </div>
                    <div class="tree-node valid">
                        è§£2: [7]<br />
                        7 = 7 âœ“
                    </div>
                </div>
            </div>

        </div>

        <script>
            let step = 0;
            let maxSteps = 0;

            function combinationSum(candidates, target) {
                const result = [];
                const currentCombination = [];
                candidates.sort((a, b) => a - b);

                function dfs(startIndex, remainingTarget, path = []) {
                    if (remainingTarget === 0) {
                        result.push([...currentCombination]);
                        return;
                    }

                    if (remainingTarget < 0) return;

                    for (let i = startIndex; i < candidates.length; i++) {
                        const candidate = candidates[i];

                        if (candidate > remainingTarget) break;

                        currentCombination.push(candidate);
                        dfs(i, remainingTarget - candidate, [...path, candidate]);
                        currentCombination.pop();
                    }
                }

                dfs(0, target);
                return result;
            }

            function runDemo() {
                const candidatesStr = document.getElementById('candidatesInput').value;
                const target = parseInt(document.getElementById('targetInput').value);
                const candidates = candidatesStr.split(',').map(x => parseInt(x.trim()));

                const start = performance.now();
                const result = combinationSum(candidates, target);
                const end = performance.now();

                const output = document.getElementById('demoOutput');
                output.innerHTML = `
                <strong>å…¥åŠ›:</strong> candidates = [${candidates.join(', ')}], target = ${target}<br/>
                <strong>çµæœ:</strong> ${JSON.stringify(result)}<br/>
                <strong>çµ„ã¿åˆã‚ã›æ•°:</strong> ${result.length}<br/>
                <strong>å®Ÿè¡Œæ™‚é–“:</strong> ${(end - start).toFixed(2)} ms<br/>
                <strong>è§£ã®è©³ç´°:</strong><br/>
                ${result.map((combo, i) =>
                    `  ${i + 1}. [${combo.join(', ')}] = ${combo.reduce((a, b) => a + b, 0)}`
                ).join('<br/>')}
            `;
            }

            function stepByStep() {
                alert('ã‚¹ãƒ†ãƒƒãƒ—å®Ÿè¡Œæ©Ÿèƒ½ã¯è¦–è¦šçš„ãªãƒ‡ãƒ¢ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã§ã™ã€‚\nä¸Šè¨˜ã®æ¢ç´¢æœ¨ã‚’å‚ç…§ã—ã¦ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®å‹•ä½œã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚');
            }

            // åˆæœŸãƒ‡ãƒ¢ã‚’å®Ÿè¡Œ
            setTimeout(runDemo, 1000);
        </script>
    </body>

</html>