<!doctype html>
<html lang="ja">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Rotate Right List Algorithm - Technical Analysis</title>
        <script src="/vendor/tailwindcss/script.js"></script>
        <style>
            /* ã‚«ã‚¹ã‚¿ãƒ CSS - Tailwindã‚¯ãƒ©ã‚¹ã®çµ±åˆ */
            .card-base {
                background: #1f2937;
                border-radius: 12px;
                padding: 24px;
                box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
                border: 1px solid #374151;
            }

            .btn-primary {
                background: linear-gradient(135deg, #3b82f6, #1d4ed8);
                color: white;
                padding: 12px 24px;
                border-radius: 8px;
                font-weight: 600;
                transition: all 0.3s ease;
                border: none;
                cursor: pointer;
            }

            .btn-primary:hover {
                background: linear-gradient(135deg, #1d4ed8, #1e40af);
                transform: translateY(-2px);
                box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
            }

            .btn-secondary {
                background: #374151;
                color: #d1d5db;
                padding: 8px 16px;
                border-radius: 6px;
                transition: all 0.3s ease;
                border: none;
                cursor: pointer;
            }

            .btn-secondary:hover {
                background: #4b5563;
                color: white;
            }

            .tab-active {
                background: linear-gradient(135deg, #10b981, #059669);
                color: white;
            }

            .node-box {
                background: #3b82f6;
                color: white;
                width: 80px;
                height: 80px;
                border-radius: 12px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-weight: bold;
                font-size: 18px;
                margin: 0 8px;
                transition: all 0.5s ease;
                border: 3px solid transparent;
            }

            .node-highlight {
                background: #f59e0b;
                border-color: #fbbf24;
                transform: scale(1.1);
                box-shadow: 0 0 20px rgba(245, 158, 11, 0.6);
            }

            .arrow {
                width: 40px;
                height: 4px;
                background: #6b7280;
                position: relative;
                margin: 0 4px;
            }

            .arrow::after {
                content: '';
                position: absolute;
                right: -8px;
                top: -6px;
                width: 0;
                height: 0;
                border-left: 8px solid #6b7280;
                border-top: 7px solid transparent;
                border-bottom: 7px solid transparent;
            }

            /* ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ - ä¿®æ­£ç‰ˆ */
            .code-container {
                background: #0f172a;
                border-radius: 12px;
                overflow: hidden;
                border: 1px solid #1e293b;
                font-family: 'Courier New', Consolas, 'Liberation Mono', Menlo, monospace;
            }

            .code-header {
                background: #1e293b;
                padding: 12px 16px;
                border-bottom: 1px solid #334155;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            .code-content {
                display: flex;
                position: relative;
                overflow-x: auto;
            }

            .line-numbers {
                background: #1e293b;
                color: #64748b;
                padding: 16px 12px;
                font-size: 14px;
                line-height: 1.6;
                user-select: none;
                border-right: 1px solid #334155;
                text-align: right;
                min-width: 50px;
                white-space: pre;
                flex-shrink: 0;
            }

            .code-text {
                padding: 16px;
                color: #e2e8f0;
                font-size: 14px;
                line-height: 1.6;
                white-space: pre;
                overflow-x: auto;
                flex: 1;
                margin: 0;
            }

            .step-indicator {
                background: #374151;
                color: #d1d5db;
                width: 40px;
                height: 40px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                font-weight: bold;
                margin-right: 16px;
                transition: all 0.3s ease;
            }

            .step-active {
                background: #10b981;
                color: white;
                transform: scale(1.2);
                box-shadow: 0 0 15px rgba(16, 185, 129, 0.5);
            }

            .fade-in {
                animation: fadeIn 0.8s ease-in-out;
            }

            @keyframes fadeIn {
                from {
                    opacity: 0;
                    transform: translateY(20px);
                }

                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            .slide-up {
                animation: slideUp 0.6s ease-out;
            }

            @keyframes slideUp {
                from {
                    transform: translateY(100%);
                    opacity: 0;
                }

                to {
                    transform: translateY(0);
                    opacity: 1;
                }
            }

            /* ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯è­¦å‘Š */
            .benchmark-warning {
                background: #fbbf24;
                color: #92400e;
                padding: 12px;
                border-radius: 8px;
                margin-bottom: 16px;
                border: 1px solid #f59e0b;
            }

            /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ */
            ::-webkit-scrollbar {
                width: 8px;
                height: 8px;
            }

            ::-webkit-scrollbar-track {
                background: #1f2937;
            }

            ::-webkit-scrollbar-thumb {
                background: #4b5563;
                border-radius: 4px;
            }

            ::-webkit-scrollbar-thumb:hover {
                background: #6b7280;
            }
        </style>
    </head>

    <body class="bg-gray-900 text-white min-h-screen">
        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
        <header class="bg-gray-800 border-b border-gray-700 sticky top-0 z-50">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex items-center justify-between h-16">
                    <h1 class="text-xl font-bold text-blue-400">Rotate Right Algorithm Analysis</h1>
                    <div class="flex space-x-4">
                        <button id="theme-toggle" class="btn-secondary">ğŸŒ™ Dark</button>
                    </div>
                </div>
            </div>
        </header>

        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <!-- ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
            <nav class="flex space-x-1 mb-8" role="tablist">
                <button class="btn-secondary tab-btn tab-active" data-tab="overview">æ¦‚è¦</button>
                <button class="btn-secondary tab-btn" data-tab="algorithm">ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ </button>
                <button class="btn-secondary tab-btn" data-tab="visualization">å¯è¦–åŒ–</button>
                <button class="btn-secondary tab-btn" data-tab="implementation">å®Ÿè£…</button>
                <button class="btn-secondary tab-btn" data-tab="performance">æ€§èƒ½åˆ†æ</button>
            </nav>

            <!-- ã‚¿ãƒ–ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->

            <!-- æ¦‚è¦ã‚¿ãƒ– -->
            <div id="overview" class="tab-content fade-in">
                <div class="grid lg:grid-cols-2 gap-8">
                    <div class="card-base">
                        <h2 class="text-2xl font-bold text-green-400 mb-4">å•é¡Œæ¦‚è¦</h2>
                        <p class="text-gray-300 mb-4">
                            ãƒªãƒ³ã‚¯ãƒªã‚¹ãƒˆã‚’å³ã«kç®‡æ‰€å›è»¢ã•ã›ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®æŠ€è¡“è§£èª¬ã§ã™ã€‚
                            ã“ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯ä»¥ä¸‹ã®ç‰¹å¾´ã‚’æŒã¡ã¾ã™ï¼š
                        </p>
                        <ul class="list-disc list-inside text-gray-300 space-y-2">
                            <li>æ™‚é–“è¨ˆç®—é‡: O(n) - ãƒªã‚¹ãƒˆã‚’ä¸€åº¦ã ã‘èµ°æŸ»</li>
                            <li>ç©ºé–“è¨ˆç®—é‡: O(1) - å®šæ•°ã®è¿½åŠ ãƒ¡ãƒ¢ãƒªã®ã¿ä½¿ç”¨</li>
                            <li>å‹å®‰å…¨æ€§: TypeScriptã«ã‚ˆã‚‹å®Œå…¨ãªå‹ä¿è¨¼</li>
                            <li>ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°: åŒ…æ‹¬çš„ãªå…¥åŠ›æ¤œè¨¼</li>
                        </ul>
                    </div>

                    <div class="card-base">
                        <h2 class="text-2xl font-bold text-blue-400 mb-4">åŸºæœ¬ä¾‹</h2>
                        <div class="space-y-4">
                            <div>
                                <p class="text-sm text-gray-400 mb-2">å…¥åŠ›: [1,2,3,4,5], k=2</p>
                                <div class="flex items-center justify-center">
                                    <div class="node-box">1</div>
                                    <div class="arrow"></div>
                                    <div class="node-box">2</div>
                                    <div class="arrow"></div>
                                    <div class="node-box">3</div>
                                    <div class="arrow"></div>
                                    <div class="node-box">4</div>
                                    <div class="arrow"></div>
                                    <div class="node-box">5</div>
                                </div>
                            </div>
                            <div>
                                <p class="text-sm text-gray-400 mb-2">å‡ºåŠ›: [4,5,1,2,3]</p>
                                <div class="flex items-center justify-center">
                                    <div class="node-box" style="background: #10b981">4</div>
                                    <div class="arrow"></div>
                                    <div class="node-box" style="background: #10b981">5</div>
                                    <div class="arrow"></div>
                                    <div class="node-box">1</div>
                                    <div class="arrow"></div>
                                    <div class="node-box">2</div>
                                    <div class="arrow"></div>
                                    <div class="node-box">3</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚¿ãƒ– -->
            <div id="algorithm" class="tab-content hidden">
                <div class="card-base mb-8">
                    <h2 class="text-2xl font-bold text-green-400 mb-6">ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚¹ãƒ†ãƒƒãƒ—</h2>
                    <div class="space-y-6">
                        <div class="flex items-start" data-step="1">
                            <div class="step-indicator step-active">1</div>
                            <div>
                                <h3 class="text-lg font-semibold text-yellow-400">
                                    é•·ã•ã¨æœ«å°¾ã®ç‰¹å®š
                                </h3>
                                <p class="text-gray-300">
                                    ãƒªã‚¹ãƒˆã‚’èµ°æŸ»ã—ã¦ãƒãƒ¼ãƒ‰æ•°ã‚’ã‚«ã‚¦ãƒ³ãƒˆã—ã€æœ«å°¾ãƒãƒ¼ãƒ‰ã‚’ç‰¹å®šã—ã¾ã™ã€‚
                                </p>
                            </div>
                        </div>

                        <div class="flex items-start" data-step="2">
                            <div class="step-indicator">2</div>
                            <div>
                                <h3 class="text-lg font-semibold text-yellow-400">
                                    å®Ÿéš›ã®å›è»¢æ•°è¨ˆç®—
                                </h3>
                                <p class="text-gray-300">
                                    k % length ã§æœ€é©åŒ–ã•ã‚ŒãŸå›è»¢æ•°ã‚’è¨ˆç®—ã—ã¾ã™ã€‚
                                </p>
                            </div>
                        </div>

                        <div class="flex items-start" data-step="3">
                            <div class="step-indicator">3</div>
                            <div>
                                <h3 class="text-lg font-semibold text-yellow-400">
                                    æ–°ã—ã„æœ«å°¾ã®ç‰¹å®š
                                </h3>
                                <p class="text-gray-300">
                                    length - actualRotations - 1
                                    ã®ä½ç½®ã«ã‚ã‚‹æ–°ã—ã„æœ«å°¾ãƒãƒ¼ãƒ‰ã‚’è¦‹ã¤ã‘ã¾ã™ã€‚
                                </p>
                            </div>
                        </div>

                        <div class="flex items-start" data-step="4">
                            <div class="step-indicator">4</div>
                            <div>
                                <h3 class="text-lg font-semibold text-yellow-400">
                                    ãƒã‚¤ãƒ³ã‚¿ã®ä»˜ã‘æ›¿ãˆ
                                </h3>
                                <p class="text-gray-300">
                                    æ–°ã—ã„æœ«å°¾ã®nextã‚’nullã«ã€å…ƒã®æœ«å°¾ã®nextã‚’å…ƒã®å…ˆé ­ã«è¨­å®šã—ã¾ã™ã€‚
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="mt-8">
                        <button id="step-next" class="btn-primary mr-4">æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—</button>
                        <button id="step-reset" class="btn-secondary">ãƒªã‚»ãƒƒãƒˆ</button>
                    </div>
                </div>
            </div>

            <!-- å¯è¦–åŒ–ã‚¿ãƒ– -->
            <div id="visualization" class="tab-content hidden">
                <div class="card-base">
                    <h2 class="text-2xl font-bold text-blue-400 mb-6">ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–å¯è¦–åŒ–</h2>

                    <div class="mb-6">
                        <div class="flex items-center space-x-4 mb-4">
                            <label class="text-sm font-medium">ãƒªã‚¹ãƒˆ:</label>
                            <input
                                type="text"
                                id="list-input"
                                value="1,2,3,4,5"
                                class="bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white"
                            />
                            <label class="text-sm font-medium">k:</label>
                            <input
                                type="number"
                                id="k-input"
                                value="2"
                                min="0"
                                class="bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white w-20"
                            />
                            <button id="visualize-btn" class="btn-primary">å¯è¦–åŒ–å®Ÿè¡Œ</button>
                        </div>

                        <div class="flex items-center space-x-4">
                            <label class="text-sm font-medium">é€Ÿåº¦:</label>
                            <input
                                type="range"
                                id="speed-slider"
                                min="1"
                                max="5"
                                value="3"
                                class="flex-1 max-w-xs"
                            />
                            <span id="speed-label" class="text-sm">æ™®é€š</span>
                        </div>
                    </div>

                    <div class="space-y-8">
                        <div>
                            <h3 class="text-lg font-semibold mb-4 text-yellow-400">å…ƒã®ãƒªã‚¹ãƒˆ</h3>
                            <div
                                id="original-list"
                                class="flex items-center justify-center flex-wrap"
                            ></div>
                        </div>

                        <div>
                            <h3 class="text-lg font-semibold mb-4 text-green-400">
                                å‡¦ç†ä¸­ã®ãƒªã‚¹ãƒˆ
                            </h3>
                            <div
                                id="processing-list"
                                class="flex items-center justify-center flex-wrap"
                            ></div>
                        </div>

                        <div>
                            <h3 class="text-lg font-semibold mb-4 text-blue-400">çµæœã®ãƒªã‚¹ãƒˆ</h3>
                            <div
                                id="result-list"
                                class="flex items-center justify-center flex-wrap"
                            ></div>
                        </div>
                    </div>

                    <div class="mt-8">
                        <div id="step-info" class="bg-gray-800 rounded-lg p-4">
                            <h4 class="font-semibold text-yellow-400 mb-2">ç¾åœ¨ã®ã‚¹ãƒ†ãƒƒãƒ—</h4>
                            <p id="step-description" class="text-gray-300">
                                å¯è¦–åŒ–ã‚’é–‹å§‹ã—ã¦ãã ã•ã„
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- å®Ÿè£…ã‚¿ãƒ– -->
            <div id="implementation" class="tab-content hidden">
                <div class="space-y-8">
                    <div class="card-base">
                        <h2 class="text-2xl font-bold text-purple-400 mb-6">æ ¸å¿ƒéƒ¨åˆ†ã®å®Ÿè£…</h2>

                        <div class="code-container">
                            <div class="code-header">
                                <span class="text-sm text-gray-400">TypeScript Implementation</span>
                                <button
                                    class="btn-secondary text-xs"
                                    onclick="copyCode('main-code')"
                                >
                                    ğŸ“‹ ã‚³ãƒ”ãƒ¼
                                </button>
                            </div>
                            <div class="code-content">
                                <div class="line-numbers" id="line-numbers-main"></div>
                                <pre class="code-text" id="main-code">
function rotateRight&lt;T = number&gt;(
    head: ListNode&lt;T&gt; | null,
    k: number
): ListNode&lt;T&gt; | null {
    // Step 1: ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã®å‡¦ç†
    if (!head || !head.next || k === 0) {
        return head;
    }
    
    // Step 2: é•·ã•ã¨æœ«å°¾ã‚’ç‰¹å®š
    const { length, tail } = findLengthAndTail(head);
    
    // Step 3: å®Ÿéš›ã®å›è»¢æ•°ã‚’è¨ˆç®—
    const actualRotations = k % length;
    if (actualRotations === 0) {
        return head;
    }
    
    // Step 4: æ–°ã—ã„æœ«å°¾ã‚’è¦‹ã¤ã‘ã‚‹
    const newTail = findNewTail(head, length - actualRotations - 1);
    
    // Step 5: æ–°ã—ã„å…ˆé ­ã‚’è¨­å®š
    const newHead = newTail.next;
    
    // Step 6: ãƒã‚¤ãƒ³ã‚¿ã‚’ä»˜ã‘æ›¿ãˆ
    newTail.next = null;    // æ–°ã—ã„æœ«å°¾
    tail.next = head;       // å¾ªç’°ã‚’ä½œæˆ
    
    return newHead;
}</pre
                                >
                            </div>
                        </div>
                    </div>

                    <div class="card-base">
                        <h2 class="text-2xl font-bold text-orange-400 mb-6">ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°</h2>

                        <div class="code-container">
                            <div class="code-header">
                                <span class="text-sm text-gray-400">Helper Functions</span>
                                <button
                                    class="btn-secondary text-xs"
                                    onclick="copyCode('helper-code')"
                                >
                                    ğŸ“‹ ã‚³ãƒ”ãƒ¼
                                </button>
                            </div>
                            <div class="code-content">
                                <div class="line-numbers" id="line-numbers-helper"></div>
                                <pre class="code-text" id="helper-code">
function findLengthAndTail&lt;T&gt;(
    head: NonNullListNode&lt;T&gt;
): { length: number; tail: ListNode&lt;T&gt; } {
    let length = 1;
    let current = head;
    
    while (current.next) {
        current = current.next;
        length++;
    }
    
    return { length, tail: current };
}

function findNewTail&lt;T&gt;(head: ListNode&lt;T&gt;, steps: number): ListNode&lt;T&gt; {
    let current = head;
    
    for (let i = 0; i &lt; steps; i++) {
        if (!current.next) {
            throw new Error('Internal error: unexpected end of list');
        }
        current = current.next;
    }
    
    return current;
}</pre
                                >
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- æ€§èƒ½åˆ†æã‚¿ãƒ– -->
            <div id="performance" class="tab-content hidden">
                <div class="grid lg:grid-cols-2 gap-8">
                    <div class="card-base">
                        <h2 class="text-2xl font-bold text-red-400 mb-6">æ™‚é–“è¨ˆç®—é‡åˆ†æ</h2>

                        <div class="space-y-4">
                            <div class="bg-gray-800 p-4 rounded-lg">
                                <h3 class="font-semibold text-yellow-400 mb-2">O(n) - ç·šå½¢æ™‚é–“</h3>
                                <p class="text-sm text-gray-300">
                                    ãƒªã‚¹ãƒˆã‚’ä¸€åº¦ã ã‘èµ°æŸ»ã™ã‚‹ãŸã‚ã€ãƒãƒ¼ãƒ‰æ•°nã«æ¯”ä¾‹ã—ãŸæ™‚é–“ãŒã‹ã‹ã‚Šã¾ã™ã€‚
                                </p>
                            </div>

                            <div class="bg-gray-800 p-4 rounded-lg">
                                <h3 class="font-semibold text-blue-400 mb-2">è©³ç´°åˆ†æ</h3>
                                <ul class="text-sm text-gray-300 space-y-1">
                                    <li>â€¢ é•·ã•è¨ˆç®—: O(n)</li>
                                    <li>â€¢ æ–°ã—ã„æœ«å°¾æ¢ç´¢: O(n)</li>
                                    <li>â€¢ ãƒã‚¤ãƒ³ã‚¿ä»˜ã‘æ›¿ãˆ: O(1)</li>
                                    <li>â€¢ å…¨ä½“: O(n) + O(n) + O(1) = O(n)</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="card-base">
                        <h2 class="text-2xl font-bold text-green-400 mb-6">ç©ºé–“è¨ˆç®—é‡åˆ†æ</h2>

                        <div class="space-y-4">
                            <div class="bg-gray-800 p-4 rounded-lg">
                                <h3 class="font-semibold text-yellow-400 mb-2">O(1) - å®šæ•°ç©ºé–“</h3>
                                <p class="text-sm text-gray-300">
                                    å…ƒã®ãƒªã‚¹ãƒˆæ§‹é€ ã‚’å†åˆ©ç”¨ã—ã€è¿½åŠ ã®é…åˆ—ã‚„ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’ä½¿ç”¨ã—ã¾ã›ã‚“ã€‚
                                </p>
                            </div>

                            <div class="bg-gray-800 p-4 rounded-lg">
                                <h3 class="font-semibold text-blue-400 mb-2">ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡</h3>
                                <ul class="text-sm text-gray-300 space-y-1">
                                    <li>â€¢ å¤‰æ•°: length, tail, newTail, newHead</li>
                                    <li>â€¢ ã™ã¹ã¦å®šæ•°å€‹ã®ãƒã‚¤ãƒ³ã‚¿</li>
                                    <li>â€¢ å…¥åŠ›ã‚µã‚¤ã‚ºã«ä¾å­˜ã—ãªã„</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card-base mt-8">
                    <h2 class="text-2xl font-bold text-purple-400 mb-6">ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã«ã¤ã„ã¦</h2>

                    <div class="benchmark-warning">
                        <h3 class="font-semibold mb-2">âš ï¸ æ³¨æ„äº‹é …</h3>
                        <p class="text-sm">
                            ã“ã®ãƒ‡ãƒ¢ã¯æ•™è‚²ç›®çš„ã§ã‚ã‚Šã€å®Ÿéš›ã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã¯å«ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚
                            å®Ÿéš›ã®ãƒªãƒ³ã‚¯ãƒªã‚¹ãƒˆã®æ€§èƒ½æ¸¬å®šã«ã¯ã€é©åˆ‡ãªãƒªãƒ³ã‚¯ãƒªã‚¹ãƒˆå®Ÿè£…ã¨Node.jsç’°å¢ƒã§ã®æ¸¬å®šãŒå¿…è¦ã§ã™ã€‚
                        </p>
                    </div>

                    <div class="space-y-4">
                        <h3 class="text-lg font-semibold text-blue-400">ç†è«–çš„æ€§èƒ½ç‰¹æ€§</h3>
                        <div class="bg-gray-800 p-4 rounded-lg">
                            <ul class="text-sm text-gray-300 space-y-2">
                                <li>â€¢ <strong>æ™‚é–“è¨ˆç®—é‡:</strong> O(n) - ãƒªã‚¹ãƒˆã‚µã‚¤ã‚ºã«æ¯”ä¾‹</li>
                                <li>â€¢ <strong>ç©ºé–“è¨ˆç®—é‡:</strong> O(1) - å®šæ•°ç©ºé–“</li>
                                <li>
                                    â€¢
                                    <strong>å®Ÿéš›ã®æ€§èƒ½:</strong>
                                    ãƒ¡ãƒ¢ãƒªã‚¢ã‚¯ã‚»ã‚¹ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã‚­ãƒ£ãƒƒã‚·ãƒ¥åŠ¹ç‡ã«ä¾å­˜
                                </li>
                                <li>
                                    â€¢ <strong>æœ€é©åŒ–ã®ãƒã‚¤ãƒ³ãƒˆ:</strong> k % length
                                    ã®äº‹å‰è¨ˆç®—ã«ã‚ˆã‚‹ä¸è¦ãªå›è»¢ã®å›é¿
                                </li>
                            </ul>
                        </div>

                        <div class="bg-gray-800 p-4 rounded-lg">
                            <h4 class="font-semibold text-yellow-400 mb-2">å®Ÿè£…æ™‚ã®è€ƒæ…®äº‹é …</h4>
                            <ul class="text-sm text-gray-300 space-y-1">
                                <li>â€¢ ãƒªã‚¹ãƒˆãŒç©ºã¾ãŸã¯k=0ã®å ´åˆã®æ—©æœŸãƒªã‚¿ãƒ¼ãƒ³</li>
                                <li>â€¢ k ãŒãƒªã‚¹ãƒˆé•·ã‚ˆã‚Šå¤§ãã„å ´åˆã®æœ€é©åŒ–</li>
                                <li>â€¢ å‹å®‰å…¨æ€§ã¨ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</li>
                                <li>â€¢ ãƒ¡ãƒ¢ãƒªåŠ¹ç‡çš„ãªãƒã‚¤ãƒ³ã‚¿æ“ä½œ</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
            let currentStep = 1;
            let maxSteps = 4;
            let visualizationState = {
                originalList: [],
                k: 0,
                currentStep: 0,
                processing: false,
            };

            // ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
            function createElement(tag, className = '', textContent = '') {
                const element = document.createElement(tag);
                if (className) element.className = className;
                if (textContent) element.textContent = textContent;
                return element;
            }

            function createNodeElement(value, highlight = false) {
                const node = createElement(
                    'div',
                    `node-box ${highlight ? 'node-highlight' : ''}`,
                    value,
                );
                return node;
            }

            function createArrowElement() {
                return createElement('div', 'arrow');
            }

            // ã‚¿ãƒ–æ©Ÿèƒ½
            function initializeTabs() {
                const tabButtons = document.querySelectorAll('.tab-btn');
                const tabContents = document.querySelectorAll('.tab-content');

                tabButtons.forEach((button) => {
                    button.addEventListener('click', () => {
                        const targetTab = button.getAttribute('data-tab');

                        // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¿ãƒ–ã®æ›´æ–°
                        tabButtons.forEach((btn) => btn.classList.remove('tab-active'));
                        button.classList.add('tab-active');

                        // ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ
                        tabContents.forEach((content) => {
                            content.classList.add('hidden');
                            content.classList.remove('fade-in');
                        });

                        const activeContent = document.getElementById(targetTab);
                        activeContent.classList.remove('hidden');
                        activeContent.classList.add('fade-in');
                    });
                });
            }

            // ã‚¹ãƒ†ãƒƒãƒ—æ©Ÿèƒ½
            function initializeStepFunction() {
                const nextButton = document.getElementById('step-next');
                const resetButton = document.getElementById('step-reset');

                nextButton.addEventListener('click', () => {
                    if (currentStep < maxSteps) {
                        // ç¾åœ¨ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’éã‚¢ã‚¯ãƒ†ã‚£ãƒ–åŒ–
                        document
                            .querySelector(`[data-step="${currentStep}"] .step-indicator`)
                            .classList.remove('step-active');

                        currentStep++;

                        // æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–åŒ–
                        document
                            .querySelector(`[data-step="${currentStep}"] .step-indicator`)
                            .classList.add('step-active');
                    }
                });

                resetButton.addEventListener('click', () => {
                    // ã™ã¹ã¦ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’éã‚¢ã‚¯ãƒ†ã‚£ãƒ–åŒ–
                    document
                        .querySelectorAll('.step-indicator')
                        .forEach((indicator) => indicator.classList.remove('step-active'));

                    currentStep = 1;

                    // æœ€åˆã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–åŒ–
                    document
                        .querySelector(`[data-step="1"] .step-indicator`)
                        .classList.add('step-active');
                });
            }

            // å¯è¦–åŒ–æ©Ÿèƒ½
            function initializeVisualization() {
                const visualizeBtn = document.getElementById('visualize-btn');
                const speedSlider = document.getElementById('speed-slider');
                const speedLabel = document.getElementById('speed-label');

                // é€Ÿåº¦ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼
                const speedLabels = ['ã¨ã¦ã‚‚é…ã„', 'é…ã„', 'æ™®é€š', 'é€Ÿã„', 'ã¨ã¦ã‚‚é€Ÿã„'];
                speedSlider.addEventListener('input', (e) => {
                    speedLabel.textContent = speedLabels[e.target.value - 1];
                });

                visualizeBtn.addEventListener('click', runVisualization);
            }

            function runVisualization() {
                const listInput = document.getElementById('list-input').value;
                const kInput = parseInt(document.getElementById('k-input').value);

                const values = listInput
                    .split(',')
                    .map((v) => v.trim())
                    .filter((v) => v);
                visualizationState = {
                    originalList: values,
                    k: kInput,
                    currentStep: 0,
                    processing: true,
                };

                displayOriginalList();
                startVisualizationAnimation();
            }

            function displayOriginalList() {
                const container = document.getElementById('original-list');
                container.innerHTML = '';

                visualizationState.originalList.forEach((value, index) => {
                    container.appendChild(createNodeElement(value));
                    if (index < visualizationState.originalList.length - 1) {
                        container.appendChild(createArrowElement());
                    }
                });
            }

            function startVisualizationAnimation() {
                const steps = [
                    { description: 'å…ƒã®ãƒªã‚¹ãƒˆã‚’è¡¨ç¤ºã—ã¦ã„ã¾ã™', action: showOriginalStep },
                    { description: 'ãƒªã‚¹ãƒˆã®é•·ã•ã¨æœ«å°¾ã‚’ç‰¹å®šã—ã¦ã„ã¾ã™', action: findLengthStep },
                    { description: 'å®Ÿéš›ã®å›è»¢æ•°ã‚’è¨ˆç®—ã—ã¦ã„ã¾ã™', action: calculateRotationsStep },
                    { description: 'æ–°ã—ã„æœ«å°¾ã‚’ç‰¹å®šã—ã¦ã„ã¾ã™', action: findNewTailStep },
                    { description: 'ãƒã‚¤ãƒ³ã‚¿ã‚’ä»˜ã‘æ›¿ãˆã¦å›è»¢ã‚’å®Œäº†ã—ã¦ã„ã¾ã™', action: rotateStep },
                ];

                let stepIndex = 0;
                const speed = parseInt(document.getElementById('speed-slider').value);
                const delay = 6000 / speed; // é€Ÿåº¦ã«å¿œã˜ãŸé…å»¶

                function executeStep() {
                    if (stepIndex < steps.length) {
                        const step = steps[stepIndex];
                        document.getElementById('step-description').textContent = step.description;
                        step.action();
                        stepIndex++;
                        setTimeout(executeStep, delay);
                    } else {
                        document.getElementById('step-description').textContent = 'å¯è¦–åŒ–å®Œäº†';
                        visualizationState.processing = false;
                    }
                }

                executeStep();
            }

            function showOriginalStep() {
                const container = document.getElementById('processing-list');
                container.innerHTML = '';

                visualizationState.originalList.forEach((value, index) => {
                    container.appendChild(createNodeElement(value));
                    if (index < visualizationState.originalList.length - 1) {
                        container.appendChild(createArrowElement());
                    }
                });
            }

            function findLengthStep() {
                const container = document.getElementById('processing-list');
                const nodes = container.querySelectorAll('.node-box');

                nodes.forEach((node, index) => {
                    setTimeout(() => {
                        node.classList.add('node-highlight');
                        setTimeout(() => node.classList.remove('node-highlight'), 500);
                    }, index * 200);
                });
            }

            function calculateRotationsStep() {
                const length = visualizationState.originalList.length;
                const actualRotations = visualizationState.k % length;

                const info = document.createElement('div');
                info.className = 'text-yellow-400 text-sm mt-2';
                info.textContent = `é•·ã•: ${length}, k: ${visualizationState.k}, å®Ÿéš›ã®å›è»¢æ•°: ${actualRotations}`;
                document.getElementById('step-info').appendChild(info);
            }

            function findNewTailStep() {
                const length = visualizationState.originalList.length;
                const actualRotations = visualizationState.k % length;
                const newTailIndex = length - actualRotations - 1;

                const container = document.getElementById('processing-list');
                const nodes = container.querySelectorAll('.node-box');

                if (nodes[newTailIndex]) {
                    nodes[newTailIndex].classList.add('node-highlight');
                    nodes[newTailIndex].style.background = '#f59e0b';
                }
            }

            function rotateStep() {
                const length = visualizationState.originalList.length;
                const actualRotations = visualizationState.k % length;

                const rotatedList = [
                    ...visualizationState.originalList.slice(length - actualRotations),
                    ...visualizationState.originalList.slice(0, length - actualRotations),
                ];

                const container = document.getElementById('result-list');
                container.innerHTML = '';

                rotatedList.forEach((value, index) => {
                    const node = createNodeElement(value, index < actualRotations);
                    container.appendChild(node);
                    if (index < rotatedList.length - 1) {
                        container.appendChild(createArrowElement());
                    }
                });
            }

            // ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ©ã‚¤ãƒˆæ©Ÿèƒ½ï¼ˆä¿®æ­£ç‰ˆï¼‰
            function initializeCodeHighlight() {
                generateLineNumbers('main-code', 'line-numbers-main');
                generateLineNumbers('helper-code', 'line-numbers-helper');
            }

            function generateLineNumbers(codeId, lineNumbersId) {
                const codeElement = document.getElementById(codeId);
                const lineNumbersElement = document.getElementById(lineNumbersId);

                if (!codeElement || !lineNumbersElement) return;

                const lines = codeElement.textContent.trim().split('\n');
                const lineNumbers = lines.map((_, index) => index + 1).join('\n');
                lineNumbersElement.textContent = lineNumbers;
            }

            // ã‚³ãƒ”ãƒ¼æ©Ÿèƒ½
            function copyCode(elementId) {
                const codeElement = document.getElementById(elementId);
                if (!codeElement) return;

                const text = codeElement.textContent;

                navigator.clipboard
                    .writeText(text)
                    .then(() => {
                        showToast('ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ');
                    })
                    .catch((err) => {
                        console.error('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ:', err);
                        showToast('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ', 'error');
                    });
            }

            function showToast(message, type = 'success') {
                const toast = createElement(
                    'div',
                    `fixed top-4 right-4 px-6 py-3 rounded-lg z-50 ${
                        type === 'success' ? 'bg-green-600' : 'bg-red-600'
                    } text-white`,
                    message,
                );

                document.body.appendChild(toast);

                setTimeout(() => {
                    toast.remove();
                }, 3000);
            }

            // ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½
            function initializeTheme() {
                const themeToggle = document.getElementById('theme-toggle');
                if (!themeToggle) return;

                let isDark = true;

                themeToggle.addEventListener('click', () => {
                    isDark = !isDark;

                    if (isDark) {
                        document.body.className = 'bg-gray-900 text-white min-h-screen';
                        themeToggle.textContent = 'ğŸŒ™ Dark';
                    } else {
                        document.body.className = 'bg-gray-100 text-gray-900 min-h-screen';
                        themeToggle.textContent = 'â˜€ï¸ Light';

                        // ãƒ©ã‚¤ãƒˆãƒ†ãƒ¼ãƒç”¨ã®ã‚¹ã‚¿ã‚¤ãƒ«èª¿æ•´
                        document.querySelectorAll('.card-base').forEach((card) => {
                            card.style.background = '#ffffff';
                            card.style.color = '#1f2937';
                            card.style.borderColor = '#e5e7eb';
                        });
                    }
                });
            }

            // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŠ¹æœ
            function addScrollAnimations() {
                const observerOptions = {
                    threshold: 0.1,
                    rootMargin: '0px 0px -50px 0px',
                };

                const observer = new IntersectionObserver((entries) => {
                    entries.forEach((entry) => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('slide-up');
                        }
                    });
                }, observerOptions);

                document.querySelectorAll('.card-base').forEach((card) => {
                    observer.observe(card);
                });
            }

            // ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ
            function initializeKeyboardShortcuts() {
                document.addEventListener('keydown', (e) => {
                    if (e.ctrlKey || e.metaKey) {
                        switch (e.key) {
                            case '1':
                                e.preventDefault();
                                const overviewTab = document.querySelector('[data-tab="overview"]');
                                if (overviewTab) overviewTab.click();
                                break;
                            case '2':
                                e.preventDefault();
                                const algorithmTab =
                                    document.querySelector('[data-tab="algorithm"]');
                                if (algorithmTab) algorithmTab.click();
                                break;
                            case '3':
                                e.preventDefault();
                                const visualizationTab = document.querySelector(
                                    '[data-tab="visualization"]',
                                );
                                if (visualizationTab) visualizationTab.click();
                                break;
                            case '4':
                                e.preventDefault();
                                const implementationTab = document.querySelector(
                                    '[data-tab="implementation"]',
                                );
                                if (implementationTab) implementationTab.click();
                                break;
                            case '5':
                                e.preventDefault();
                                const performanceTab = document.querySelector(
                                    '[data-tab="performance"]',
                                );
                                if (performanceTab) performanceTab.click();
                                break;
                        }
                    }
                });
            }

            // åˆæœŸåŒ–
            document.addEventListener('DOMContentLoaded', () => {
                console.log('DOMèª­ã¿è¾¼ã¿å®Œäº†');

                // åˆæœŸçŠ¶æ…‹ã®è¨­å®š
                const overviewTab = document.getElementById('overview');
                if (overviewTab) {
                    overviewTab.classList.remove('hidden');
                    overviewTab.classList.add('fade-in');
                }

                // ã™ã¹ã¦ã®ä»–ã®ã‚¿ãƒ–ã‚’éè¡¨ç¤ºã«ã™ã‚‹
                ['algorithm', 'visualization', 'implementation', 'performance'].forEach((tabId) => {
                    const tab = document.getElementById(tabId);
                    if (tab) {
                        tab.classList.add('hidden');
                        tab.classList.remove('fade-in');
                    }
                });

                initializeTabs();
                initializeStepFunction();
                initializeVisualization();
                initializeCodeHighlight();
                initializeTheme();
                addScrollAnimations();
                initializeKeyboardShortcuts();

                // ã‚¦ã‚§ãƒ«ã‚«ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
                setTimeout(() => {
                    showToast('Rotate Right ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ è§£æã¸ã‚ˆã†ã“ãï¼');
                }, 1000);
            });

            // ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°ã¨ã—ã¦å®šç¾©ï¼ˆHTMLã‹ã‚‰å‘¼ã³å‡ºã—å¯èƒ½ï¼‰
            window.copyCode = copyCode;
        </script>
    </body>
</html>
