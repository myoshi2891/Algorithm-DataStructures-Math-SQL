ä»¥ä¸‹ã§ã¯ã€\*\*TypeScriptã«ã‚ˆã‚‹ã€Œ3,5,7ã®ã„ãšã‚Œã‹ã§å‰²ã‚Šåˆ‡ã‚Œã‚‹æ•´æ•°ã®å€‹æ•°ã‚’æ•°ãˆã‚‹å‡¦ç†ã€\*\*ã«ã¤ã„ã¦ã€**å›³ãƒ»è¡¨ãƒ»æ•°å¼ã‚’äº¤ãˆã¦è©³ã—ãè§£æãƒ»èª¬æ˜**ã—ã¦ã„ãã¾ã™ã€‚

---

## âœ… å•é¡Œã®è¦ç‚¹

---

> **1 ä»¥ä¸Š N ä»¥ä¸‹ã®æ•´æ•°ã®ã†ã¡ã€3ãƒ»5ãƒ»7 ã®ã„ãšã‚Œã‹ã§å‰²ã‚Šåˆ‡ã‚Œã‚‹æ•´æ•°ã®å€‹æ•°ã‚’æ•°ãˆã‚ˆã€‚**

ä¾‹ï¼š`N = 10`

è©²å½“ã™ã‚‹æ•°ï¼š`3, 5, 6, 7, 9, 10` â†’ **6å€‹**

---

## âœ… ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ï¼šåŒ…é™¤åŸç†ï¼ˆInclusion-Exclusion Principleï¼‰

---

é‡è¤‡ã‚’é¿ã‘ã¦ã‚«ã‚¦ãƒ³ãƒˆã™ã‚‹ãŸã‚ã«ã€\*\*é›†åˆã®å’Œé›†åˆã®è¦ç´ æ•°ã‚’æ±‚ã‚ã‚‹ã€ŒåŒ…é™¤åŸç†ã€\*\*ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

---

### â–¼ å¯¾è±¡é›†åˆã®ã‚¤ãƒ¡ãƒ¼ã‚¸

ä¸‹å›³ã¯ã€N = 30 ã®ã¨ãã® 3, 5, 7 ã§å‰²ã‚Šåˆ‡ã‚Œã‚‹é›†åˆã®ãƒ™ãƒ³å›³ã§ã™ï¼š

```
              +-----------+
              |  A : /3   |
              | {3,6,...} |
          +--------+   +--------+
          |        |   |        |
   +-----------+   |   |   +-----------+
   |  B : /5   |---+---+---|  C : /7   |
   | {5,10,...}|           |{7,14,...}|
   +-----------+           +-----------+
```

---

### â–¼ åŒ…é™¤åŸç†ã®å¼

é›†åˆã®å’Œé›†åˆã®è¦ç´ æ•°ï¼š

```text
|A âˆª B âˆª C| = |A| + |B| + |C| - |A âˆ© B| - |A âˆ© C| - |B âˆ© C| + |A âˆ© B âˆ© C|
```

---

## âœ… å‡¦ç†ã®æµã‚Œï¼ˆTypeScriptã‚³ãƒ¼ãƒ‰ã¨å›³ã§å¯¾å¿œï¼‰

---

### ğŸŸ¢ 1. åŸºæœ¬å€‹æ•°ã‚’æ±‚ã‚ã‚‹

| é™¤æ•° | å¯¾è±¡é›†åˆ | è¨ˆç®—å¼         | N=30 ã®å ´åˆ |
| ---- | -------- | -------------- | ----------- |
| 3    | A        | `floor(N / 3)` | 10å€‹        |
| 5    | B        | `floor(N / 5)` | 6å€‹         |
| 7    | C        | `floor(N / 7)` | 4å€‹         |

**å›³å¼åŒ–**ï¼ˆ3ã¤ã®å††ã®å¤§ãã•ï¼‰ï¼š

```
   A(3): 10å€‹    B(5): 6å€‹     C(7): 4å€‹
```

ã‚³ãƒ¼ãƒ‰å¯¾å¿œï¼ˆé–¢æ•°ï¼‰ï¼š

```ts
div(3n) + div(5n) + div(7n);
```

---

### ğŸ”´ 2. é‡è¤‡éƒ¨åˆ†ã‚’å¼•ãï¼ˆäºŒé‡ã‚«ã‚¦ãƒ³ãƒˆï¼‰

| å…±é€šé›†åˆ | å¯¾è±¡é›†åˆ | è¨ˆç®—å¼          | N=30 ã®å ´åˆ |
| -------- | -------- | --------------- | ----------- |
| A âˆ© B    | /15      | `floor(N / 15)` | 2å€‹         |
| A âˆ© C    | /21      | `floor(N / 21)` | 1å€‹         |
| B âˆ© C    | /35      | `floor(N / 35)` | 0å€‹         |

**å›³å¼åŒ–**ï¼š

```
  A âˆ© B â†’ {15,30}
  A âˆ© C â†’ {21}
  B âˆ© C â†’ {35}ï¼ˆè©²å½“ãªã—ï¼‰
```

ã‚³ãƒ¼ãƒ‰å¯¾å¿œï¼š

```ts
-div(3n * 5n) - div(3n * 7n) - div(5n * 7n);
```

---

### ğŸ”µ 3. ä¸‰é‡é‡è¤‡ã‚’æˆ»ã™ï¼ˆ3ã¤ã«å«ã¾ã‚Œã‚‹æ•°ï¼‰

| å…±é€šé›†åˆ  | å¯¾è±¡é›†åˆ | è¨ˆç®—å¼           | N=30 ã®å ´åˆ |
| --------- | -------- | ---------------- | ----------- |
| A âˆ© B âˆ© C | /105     | `floor(N / 105)` | 0å€‹         |

**å›³å¼åŒ–**ï¼š

```
A âˆ© B âˆ© C â†’ {105, 210, 315, ...}
N=30 ã§ã¯è©²å½“ãªã—
```

ã‚³ãƒ¼ãƒ‰å¯¾å¿œï¼š

```ts
+div(3n * 5n * 7n);
```

---

## âœ… å…¨ä½“å›³è§£ï¼ˆæ•°ç›´ç·šã¨ãƒ™ãƒ³å›³ï¼‰

---

### ä¾‹ï¼šN = 30 ã®å ´åˆï¼ˆæ•°ç›´ç·šã§å¯è¦–åŒ–ï¼‰

```
 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30
    *     *     *     *     *     *     *     *     *     *     *     *     *     *
   (/3) (/5) (/3) (/7) (/3) (/5,3,7) (/3) (/5) (/3) (/7) (/3) (/5) (/3) (/7) (/3) (/5,3)
```

- `/3`: 3, 6, 9, 12, 15, 18, 21, 24, 27, 30
- `/5`: 5, 10, 15, 20, 25, 30
- `/7`: 7, 14, 21, 28

é‡è¤‡å«ã‚ãŸæ•°ï¼š3,5,6,7,9,10,12,14,15,18,20,21,24,25,27,28,30 â†’ **17å€‹**

---

## âœ… BigIntä½¿ç”¨ç†ç”±

- å…¥åŠ› `N â‰¤ 10^12` ãªã®ã§ã€JavaScriptã® `Number` ã§ã¯ **ç²¾åº¦ãŒå£Šã‚Œã‚‹**ã€‚
- ã‚ˆã£ã¦ã€`BigInt` ã«ã‚ˆã‚‹å‡¦ç†ãŒå¿…é ˆã§ã™ã€‚

---

## âœ… æœ€çµ‚å¼ã¾ã¨ã‚

```ts
div(3n) + div(5n) + div(7n) - div(15n) - div(21n) - div(35n) + div(105n);
```

---

## âœ… å®Ÿè¡Œä¾‹ï¼šN = 100000000000

```
N / 3   = 33333333333
N / 5   = 20000000000
N / 7   = 14285714285
N / 15  = 6666666666
N / 21  = 4761904761
N / 35  = 2857142857
N / 105 = 952380952

åˆè¨ˆï¼š
= 33333333333 + 20000000000 + 14285714285
- 6666666666 - 4761904761 - 2857142857
+ 952380952
= 54285714286
```

---

## âœ… çµè«–

- å‡¦ç†ã¯ **O(1)** ã§æ¥µã‚ã¦é«˜é€Ÿï¼ˆå®šæ•°å›ã®BigInté™¤ç®—ã®ã¿ï¼‰
- ãƒ¡ãƒ¢ãƒªä½¿ç”¨ã‚‚ã”ãå°‘é‡ï¼ˆ`BigInt` 7å€‹ç¨‹åº¦ï¼‰
- **N ãŒ 10^12 ã§ã‚‚ 1ms æœªæº€ã§å®Œäº†**

| [æå‡ºæ—¥æ™‚](https://atcoder.jp/contests/tessoku-book/submissions/me?desc=true&orderBy=created) | å•é¡Œ                                                                                  | ãƒ¦ãƒ¼ã‚¶                                            | è¨€èª                                                                                                        | [å¾—ç‚¹](https://atcoder.jp/contests/tessoku-book/submissions/me?desc=true&orderBy=score) | [ã‚³ãƒ¼ãƒ‰é•·](https://atcoder.jp/contests/tessoku-book/submissions/me?orderBy=source_length) | çµæœ | [å®Ÿè¡Œæ™‚é–“](https://atcoder.jp/contests/tessoku-book/submissions/me?orderBy=time_consumption) | [ãƒ¡ãƒ¢ãƒª](https://atcoder.jp/contests/tessoku-book/submissions/me?orderBy=memory_consumption) |                                                                       |
| --------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------- | ------------------------------------------------- | ----------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------- | ---- | -------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------- | --------------------------------------------------------------------- |
| 2025-07-23 16:41:06                                                                           | [B31 - Divisors Hard](https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_dd) | [myoshizumi](https://atcoder.jp/users/myoshizumi) | [Go (go 1.20.6)](https://atcoder.jp/contests/tessoku-book/submissions/me?f.Language=5002)                   | 1000                                                                                    | 1204 Byte                                                                                 |      | 1 ms                                                                                         | 1632 KiB                                                                                     | [è©³ç´°](https://atcoder.jp/contests/tessoku-book/submissions/67847012) |
| 2025-07-23 16:37:22                                                                           | [B31 - Divisors Hard](https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_dd) | [myoshizumi](https://atcoder.jp/users/myoshizumi) | [PHP (php 8.2.8)](https://atcoder.jp/contests/tessoku-book/submissions/me?f.Language=5016)                  | 1000                                                                                    | 1121 Byte                                                                                 |      | 14 ms                                                                                        | 21556 KiB                                                                                    | [è©³ç´°](https://atcoder.jp/contests/tessoku-book/submissions/67846918) |
| 2025-07-23 16:34:38                                                                           | [B31 - Divisors Hard](https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_dd) | [myoshizumi](https://atcoder.jp/users/myoshizumi) | [Python (CPython 3.11.4)](https://atcoder.jp/contests/tessoku-book/submissions/me?f.Language=5055)          | 1000                                                                                    | 848 Byte                                                                                  |      | 10 ms                                                                                        | 8648 KiB                                                                                     | [è©³ç´°](https://atcoder.jp/contests/tessoku-book/submissions/67846843) |
| 2025-07-23 16:23:22                                                                           | [B31 - Divisors Hard](https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_dd) | [myoshizumi](https://atcoder.jp/users/myoshizumi) | [TypeScript 5.1 (Node.js 18.16.1)](https://atcoder.jp/contests/tessoku-book/submissions/me?f.Language=5058) | 1000                                                                                    | 869 Byte                                                                                  |      | 41 ms                                                                                        | 42856 KiB                                                                                    | [è©³ç´°](https://atcoder.jp/contests/tessoku-book/submissions/67846549) |
| 2025-07-23 16:17:55                                                                           | [B31 - Divisors Hard](https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_dd) | [myoshizumi](https://atcoder.jp/users/myoshizumi) | [JavaScript (Node.js 18.16.1)](https://atcoder.jp/contests/tessoku-book/submissions/me?f.Language=5009)     | 1000                                                                                    | 866 Byte                                                                                  |      | 41 ms                                                                                        | 42784 KiB                                                                                    | [è©³ç´°](https://atcoder.jp/contests/tessoku-book/submissions/67846392) |
