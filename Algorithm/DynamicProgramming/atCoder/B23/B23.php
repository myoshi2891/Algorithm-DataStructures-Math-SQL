<!-- ä»¥ä¸‹ã¯ã€**PHP 8.2.8** ã‚’ç”¨ã„ãŸã€Œå·¡å›ã‚»ãƒ¼ãƒ«ã‚¹ãƒãƒ³å•é¡Œï¼ˆTSPï¼‰ã€ã®è§£æ³•ã§ã™ã€‚
ãƒ“ãƒƒãƒˆDPï¼ˆçŠ¶æ…‹ï¼šè¨ªå•æ¸ˆã¿éƒ½å¸‚é›†åˆÃ—ç¾åœ¨åœ°ï¼‰ã«ã‚ˆã‚Šã€**å…¨éƒ½å¸‚ã‚’è¨ªå•ã—ã¦å‡ºç™ºåœ°ã«æˆ»ã‚‹æœ€çŸ­è·é›¢**ã‚’æ±‚ã‚ã¾ã™ã€‚

---

## âœ… å®Ÿè£…ï¼ˆPHP 8.2.8ã€å‹ãƒ»ã‚³ãƒ¡ãƒ³ãƒˆä»˜ãï¼‰

<?php

declare(strict_types=1);

/**
 * è·é›¢è¡Œåˆ—ã‚’è¨ˆç®—ã™ã‚‹
 *
 * @param array<int, array{int, int}> $coords å„éƒ½å¸‚ã®åº§æ¨™ [(x1, y1), ..., (xN, yN)]
 * @return array<int, array<int, float>> è·é›¢è¡Œåˆ— dist[i][j] = éƒ½å¸‚iã‹ã‚‰jã¸ã®è·é›¢
 */
function computeDistances(array $coords): array {
    $N = count($coords);
    $dist = array_fill(0, $N, array_fill(0, $N, 0.0));
    for ($i = 0; $i < $N; $i++) {
        for ($j = 0; $j < $N; $j++) {
            $dx = $coords[$i][0] - $coords[$j][0];
            $dy = $coords[$i][1] - $coords[$j][1];
            $dist[$i][$j] = hypot($dx, $dy);
        }
    }
    return $dist;
}

/**
 * å·¡å›ã‚»ãƒ¼ãƒ«ã‚¹ãƒãƒ³å•é¡Œã‚’è§£ã
 *
 * @param int $N éƒ½å¸‚ã®æ•° (2 <= N <= 15)
 * @param array<int, array{int, int}> $coords å„éƒ½å¸‚ã®åº§æ¨™
 * @return float æœ€çŸ­è·é›¢ï¼ˆèª¤å·®1e-3ä»¥å†…ï¼‰
 */
function solveTSP(int $N, array $coords): float {
    $dist = computeDistances($coords);
    $INF = INF;

    // dp[s][u] := è¨ªå•æ¸ˆã¿é›†åˆs, ç¾åœ¨åœ°u ã®ã¨ãã®æœ€çŸ­è·é›¢
    $dp = array_fill(0, 1 << $N, array_fill(0, $N, $INF));
    $dp[1][0] = 0.0;

    for ($s = 1; $s < (1 << $N); $s++) {
        for ($u = 0; $u < $N; $u++) {
            if (!(($s >> $u) & 1)) continue;
            for ($v = 0; $v < $N; $v++) {
                if (($s >> $v) & 1) continue;
                $ns = $s | (1 << $v);
                $dp[$ns][$v] = min($dp[$ns][$v], $dp[$s][$u] + $dist[$u][$v]);
            }
        }
    }

    $res = $INF;
    for ($u = 1; $u < $N; $u++) {
        $res = min($res, $dp[(1 << $N) - 1][$u] + $dist[$u][0]);
    }

    return $res;
}

/**
 * æ¨™æº–å…¥åŠ›ã‹ã‚‰åº§æ¨™æƒ…å ±ã‚’èª­ã¿å–ã‚Šã€solveTSP ã‚’å‘¼ã³å‡ºã™ãƒ¡ã‚¤ãƒ³é–¢æ•°
 */
function main(): void {
    [$N] = sscanf(trim(fgets(STDIN)), "%d");
    $coords = [];

    for ($i = 0; $i < $N; $i++) {
        [$x, $y] = sscanf(trim(fgets(STDIN)), "%d %d");
        $coords[] = [$x, $y];
    }

    $result = solveTSP($N, $coords);

    // å°æ•°ç‚¹ä»¥ä¸‹12æ¡ã§å‡ºåŠ›ï¼ˆèª¤å·®1e-3å¯¾ç­–ï¼‰
    printf("%.12f\n", $result);
}

main();

// ## ğŸ§ª å®Ÿè¡Œæ–¹æ³•

// ```bash
// php main.php < input.txt
// ```

// ä¾‹: `input.txt`

// ```
// 4
// 0 0
// 0 1
// 1 0
// 1 1
// ```

// å‡ºåŠ›:

// ```
// 4.000000000000
// ```

// ---

// ## ğŸ“Š è¨ˆç®—é‡ã¨åˆ¶ç´„ã¸ã®å¯¾å¿œ

// | é …ç›®       | å†…å®¹                             |
// | -------- | ------------------------------ |
// | æ™‚é–“è¨ˆç®—é‡    | `O(N^2 * 2^N)`ï¼ˆNâ‰¦15ã§ç´„50ä¸‡ï¼‰      |
// | ç©ºé–“ä½¿ç”¨é‡    | `N * 2^N * float` â‰’ ç´„4MiB      |
// | ç²¾åº¦       | `hypot` + `printf("%.12f")` ä½¿ç”¨ |
// | PHPãƒãƒ¼ã‚¸ãƒ§ãƒ³ | 8.2.8ï¼ˆå‹æŒ‡å®šã€INFã€hypotåˆ©ç”¨å¯ï¼‰        |

// ---

// ## âœ… ç‰¹å¾´

// * å‹ã‚³ãƒ¡ãƒ³ãƒˆãƒ»æˆ»ã‚Šå€¤æ˜ç¤ºï¼ˆ`array{int, int}` å‹ã‚¿ãƒ—ãƒ«é¢¨ï¼‰
// * å®‰å…¨ã§é«˜é€Ÿãª `hypot()` ã«ã‚ˆã‚‹è·é›¢è¨ˆç®—
// * æµ®å‹•å°æ•°èª¤å·®ã«å¼·ã„å‡ºåŠ›å½¢å¼ï¼ˆ12æ¡ï¼‰
// * è¨ˆç®—é‡ãƒ»ãƒ¡ãƒ¢ãƒªåˆ¶é™ã«å®Œå…¨æº–æ‹ ï¼ˆN â‰¦ 15ï¼‰

// ---

// ã”å¸Œæœ›ãŒã‚ã‚Œã°ã€**çµŒè·¯å¾©å…ƒä»˜ãå®Ÿè£…** ã‚„ **éƒ¨åˆ†ãƒ¡ãƒ¢åŒ–ä»˜ãDFSç‰ˆ** ãªã©ã‚‚æä¾›å¯èƒ½ã§ã™ã€‚ãŠæ°—è»½ã«ã©ã†ãï¼