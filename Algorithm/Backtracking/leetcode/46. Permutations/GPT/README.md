äº†è§£ã—ã¾ã—ãŸ ğŸ‘
ã“ã“ã§ã¯ **TypeScript å®Ÿè£…**ã‚’å¯¾è±¡ã«ã—ã¦ã€`permute(nums: number[])` ãŒã©ã®ã‚ˆã†ã« **é †åˆ—ã‚’ç”Ÿæˆã—ã¦ã„ã‚‹ã‹** ã‚’ã€å›³ã‚’ä½¿ã£ã¦ **å‡¦ç†ã®æµã‚Œã‚’å…·ä½“çš„ã«è§£æ**ã—ã¦ã„ãã¾ã™ã€‚

---

## ã‚³ãƒ¼ãƒ‰ï¼ˆå†æ²ï¼‰

```typescript
function permute(nums: number[]): number[][] {
    const result: number[][] = [];

    const backtrack = (start: number): void => {
        if (start === nums.length) {
            result.push([...nums]); // ç¾åœ¨ã®é †åˆ—ã‚’ä¿å­˜
            return;
        }
        for (let i = start; i < nums.length; i++) {
            [nums[start], nums[i]] = [nums[i], nums[start]]; // swap
            backtrack(start + 1);
            [nums[start], nums[i]] = [nums[i], nums[start]]; // swap æˆ»ã™
        }
    };

    backtrack(0);
    return result;
}
```

---

## å…¨ä½“ã®è€ƒãˆæ–¹

* `backtrack(start)` ã¯ã€Œ`start` ã®ä½ç½®ã‚’å›ºå®šã—ã€æ®‹ã‚Šã®éƒ¨åˆ†ã‚’é †åˆ—åŒ–ã™ã‚‹ã€é–¢æ•°ã€‚
* `for` ãƒ«ãƒ¼ãƒ—ã®ä¸­ã§ **swap** ã‚’è¡Œã„ã€å…ˆé ­ã‹ã‚‰é †ã«ä¸¦ã³æ›¿ãˆã‚’è©¦ã™ã€‚
* å†å¸°çµ‚äº†æ¡ä»¶ `start === nums.length` ã®ã¨ãã€`nums` ã®ã‚³ãƒ”ãƒ¼ã‚’ `result` ã«ä¿å­˜ã€‚

---

## å‡¦ç†ã®æµã‚Œï¼ˆä¾‹: `nums = [1,2,3]`ï¼‰

### ã‚¹ãƒ†ãƒƒãƒ— 1: åˆæœŸå‘¼ã³å‡ºã—

```
nums = [1,2,3]
backtrack(0)
```

* `start = 0`
* ãƒ«ãƒ¼ãƒ—: i = 0,1,2 ã§ swap ã‚’è©¦ã™ã€‚

---

### ã‚¹ãƒ†ãƒƒãƒ— 2: i = 0 ã®å ´åˆï¼ˆswap(0,0) â†’ ãã®ã¾ã¾ï¼‰

```
[1,2,3]
```

* æ¬¡ã¸: `backtrack(1)`

---

### ã‚¹ãƒ†ãƒƒãƒ— 3: backtrack(1)

```
nums = [1,2,3]
start = 1
```

* ãƒ«ãƒ¼ãƒ—: i = 1,2 ã‚’è©¦ã™ã€‚

#### 3a. i = 1 ã®å ´åˆï¼ˆswap(1,1) â†’ ãã®ã¾ã¾ï¼‰

```
[1,2,3]
```

â†’ `backtrack(2)`

#### 3b. backtrack(2)

```
nums = [1,2,3]
start = 2
```

* i = 2 â†’ swap(2,2) â†’ \[1,2,3]
* `backtrack(3)` â†’ **çµæœä¿å­˜: \[1,2,3]**

---

#### 3c. i = 2 ã®å ´åˆï¼ˆswap(1,2)ï¼‰

```
[1,3,2]
```

â†’ `backtrack(2)`

* i = 2 â†’ swap(2,2) â†’ \[1,3,2]

* `backtrack(3)` â†’ **çµæœä¿å­˜: \[1,3,2]**

* swap æˆ»ã— â†’ \[1,2,3]

---

### ã‚¹ãƒ†ãƒƒãƒ— 4: i = 1 ã®å ´åˆï¼ˆswap(0,1)ï¼‰

```
[2,1,3]
```

â†’ `backtrack(1)`

* i = 1 â†’ swap(1,1) â†’ \[2,1,3]

  * backtrack(2) â†’ ä¿å­˜: \[2,1,3]

* i = 2 â†’ swap(1,2) â†’ \[2,3,1]

  * backtrack(2) â†’ ä¿å­˜: \[2,3,1]
  * swap æˆ»ã— â†’ \[2,1,3]

* swap æˆ»ã— â†’ \[1,2,3]

---

### ã‚¹ãƒ†ãƒƒãƒ— 5: i = 2 ã®å ´åˆï¼ˆswap(0,2)ï¼‰

```
[3,2,1]
```

â†’ `backtrack(1)`

* i = 1 â†’ swap(1,1) â†’ \[3,2,1]

  * backtrack(2) â†’ ä¿å­˜: \[3,2,1]

* i = 2 â†’ swap(1,2) â†’ \[3,1,2]

  * backtrack(2) â†’ ä¿å­˜: \[3,1,2]
  * swap æˆ»ã— â†’ \[3,2,1]

* swap æˆ»ã— â†’ \[1,2,3]

---

## å…¨ä½“ã®æ¢ç´¢ãƒ„ãƒªãƒ¼ï¼ˆå›³è§£ï¼‰

```
start=0
 â”œâ”€â”€ swap(0,0): [1,2,3]
 â”‚    â”œâ”€â”€ swap(1,1): [1,2,3] â†’ ä¿å­˜ [1,2,3]
 â”‚    â””â”€â”€ swap(1,2): [1,3,2] â†’ ä¿å­˜ [1,3,2]
 â”‚
 â”œâ”€â”€ swap(0,1): [2,1,3]
 â”‚    â”œâ”€â”€ swap(1,1): [2,1,3] â†’ ä¿å­˜ [2,1,3]
 â”‚    â””â”€â”€ swap(1,2): [2,3,1] â†’ ä¿å­˜ [2,3,1]
 â”‚
 â””â”€â”€ swap(0,2): [3,2,1]
      â”œâ”€â”€ swap(1,1): [3,2,1] â†’ ä¿å­˜ [3,2,1]
      â””â”€â”€ swap(1,2): [3,1,2] â†’ ä¿å­˜ [3,1,2]
```

---

## å¾—ã‚‰ã‚Œã‚‹çµæœ

```
[[1,2,3],
 [1,3,2],
 [2,1,3],
 [2,3,1],
 [3,2,1],
 [3,1,2]]
```

---

## ã¾ã¨ã‚

* **swap ã¨ backtracking** ã«ã‚ˆã£ã¦é †åˆ—ã‚’åŠ¹ç‡ã‚ˆãæ¢ç´¢ã§ãã‚‹ã€‚
* å„å†å¸°ã‚¹ãƒ†ãƒƒãƒ—ã§ã¯ã€Œä½ç½®ã‚’å›ºå®šã—ã¦ã€æ®‹ã‚Šã‚’é †åˆ—åŒ–ã€ã™ã‚‹ã€‚
* **æ™‚é–“è¨ˆç®—é‡ O(n \* n!)ã€ç©ºé–“è¨ˆç®—é‡ O(n)** ã§ã€åˆ¶ç´„ (n â‰¤ 6) ã®ç¯„å›²ã§ã¯ååˆ†é«˜é€Ÿã€‚

---