<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>2D Matrix Binary Search - æŠ€è¡“è§£èª¬</title>

    <!-- External CDN Resources -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
      rel="stylesheet"
    />

    <style>
      :root {
        --bg-primary: #0f0f0f;
        --bg-secondary: #1a1a1a;
        --bg-tertiary: #2a2a2a;
        --text-primary: #ffffff;
        --text-secondary: #b0b0b0;
        --text-muted: #808080;
        --accent-primary: #3b82f6;
        --accent-secondary: #10b981;
        --accent-warning: #f59e0b;
        --accent-danger: #ef4444;
        --border-color: #333333;
        --shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        --gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
        background: var(--bg-primary);
        color: var(--text-primary);
        line-height: 1.6;
        overflow-x: hidden;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
      }

      /* Header */
      .header {
        background: var(--gradient);
        padding: 60px 0;
        text-align: center;
        position: relative;
        overflow: hidden;
      }

      .header::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="%23ffffff" stroke-width="0.5" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
        animation: gridMove 20s linear infinite;
      }

      @keyframes gridMove {
        0% {
          transform: translateX(0) translateY(0);
        }
        100% {
          transform: translateX(-10px) translateY(-10px);
        }
      }

      .header h1 {
        font-size: 3rem;
        font-weight: 700;
        margin-bottom: 20px;
        position: relative;
        z-index: 1;
      }

      .header .subtitle {
        font-size: 1.2rem;
        opacity: 0.9;
        position: relative;
        z-index: 1;
      }

      /* Navigation */
      .nav {
        background: var(--bg-secondary);
        padding: 15px 0;
        border-bottom: 1px solid var(--border-color);
        position: sticky;
        top: 0;
        z-index: 100;
        backdrop-filter: blur(10px);
      }

      .nav-list {
        display: flex;
        list-style: none;
        justify-content: center;
        gap: 30px;
        flex-wrap: wrap;
      }

      .nav-link {
        color: var(--text-secondary);
        text-decoration: none;
        padding: 10px 15px;
        border-radius: 8px;
        transition: all 0.3s ease;
        position: relative;
      }

      .nav-link:hover,
      .nav-link.active {
        color: var(--accent-primary);
        background: rgba(59, 130, 246, 0.1);
      }

      /* Main Content */
      .main {
        padding: 40px 0;
      }

      .section {
        margin-bottom: 60px;
        opacity: 0;
        transform: translateY(30px);
        animation: fadeInUp 0.8s ease forwards;
      }

      @keyframes fadeInUp {
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .section:nth-child(2) {
        animation-delay: 0.2s;
      }
      .section:nth-child(3) {
        animation-delay: 0.4s;
      }
      .section:nth-child(4) {
        animation-delay: 0.6s;
      }

      .section-title {
        font-size: 2.5rem;
        margin-bottom: 30px;
        color: var(--accent-primary);
        position: relative;
        padding-left: 20px;
      }

      .section-title::before {
        content: "";
        position: absolute;
        left: 0;
        top: 0;
        bottom: 0;
        width: 4px;
        background: var(--gradient);
        border-radius: 2px;
      }

      /* Algorithm Overview */
      .algo-overview {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 30px;
        margin: 30px 0;
      }

      .overview-card {
        background: var(--bg-secondary);
        padding: 30px;
        border-radius: 15px;
        border: 1px solid var(--border-color);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .overview-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 3px;
        background: var(--gradient);
      }

      .overview-card:hover {
        transform: translateY(-5px);
        box-shadow: var(--shadow);
      }

      .card-icon {
        font-size: 2.5rem;
        color: var(--accent-primary);
        margin-bottom: 15px;
      }

      .card-title {
        font-size: 1.5rem;
        margin-bottom: 15px;
        color: var(--text-primary);
      }

      .card-description {
        color: var(--text-secondary);
        line-height: 1.6;
      }

      /* Step by Step */
      .steps-container {
        margin: 40px 0;
      }

      .step {
        background: var(--bg-secondary);
        margin: 20px 0;
        border-radius: 15px;
        border: 1px solid var(--border-color);
        overflow: hidden;
        transition: all 0.3s ease;
      }

      .step:hover {
        border-color: var(--accent-primary);
        box-shadow: var(--shadow);
      }

      .step-header {
        padding: 20px 30px;
        background: var(--bg-tertiary);
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 15px;
        transition: background 0.3s ease;
      }

      .step-header:hover {
        background: rgba(59, 130, 246, 0.1);
      }

      .step-number {
        background: var(--gradient);
        color: white;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
      }

      .step-title {
        font-size: 1.2rem;
        flex-grow: 1;
      }

      .step-toggle {
        font-size: 1.2rem;
        transition: transform 0.3s ease;
      }

      .step.active .step-toggle {
        transform: rotate(180deg);
      }

      .step-content {
        padding: 0 30px;
        max-height: 0;
        overflow: hidden;
        transition: all 0.3s ease;
      }

      .step.active .step-content {
        padding: 30px;
        max-height: 1000px;
      }

      /* Code Blocks */
      .code-container {
        position: relative;
        margin: 30px 0;
        border-radius: 12px;
        overflow: hidden;
        background: var(--bg-tertiary);
        border: 1px solid var(--border-color);
      }

      .code-header {
        background: var(--bg-secondary);
        padding: 15px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 1px solid var(--border-color);
      }

      .code-title {
        color: var(--text-primary);
        font-weight: 600;
      }

      .copy-btn {
        background: var(--accent-primary);
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 0.9rem;
        transition: all 0.3s ease;
      }

      .copy-btn:hover {
        background: var(--accent-secondary);
        transform: translateY(-2px);
      }

      .code-block {
        font-family: "Fira Code", "Consolas", monospace !important;
        margin: 0 !important;
        background: var(--bg-tertiary) !important;
        border-radius: 0 !important;
      }

      /* Visual Diagrams */
      .diagram-container {
        background: var(--bg-secondary);
        padding: 40px;
        border-radius: 15px;
        margin: 30px 0;
        border: 1px solid var(--border-color);
        text-align: center;
      }

      .matrix-visual {
        display: inline-block;
        margin: 20px;
        background: var(--bg-tertiary);
        padding: 20px;
        border-radius: 10px;
        border: 2px solid var(--border-color);
      }

      .matrix-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 5px;
        margin: 15px 0;
      }

      .matrix-cell {
        width: 50px;
        height: 50px;
        background: var(--bg-primary);
        border: 2px solid var(--border-color);
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        border-radius: 8px;
        transition: all 0.3s ease;
        cursor: pointer;
      }

      .matrix-cell:hover {
        background: var(--accent-primary);
        color: white;
      }

      .matrix-cell.highlight {
        background: var(--accent-secondary) !important;
        color: white;
        box-shadow: 0 0 10px var(--accent-secondary);
      }

      .matrix-cell.target {
        background: var(--accent-warning) !important;
        color: white;
        animation: pulse 1s infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
      }

      /* Complexity Analysis */
      .complexity-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin: 30px 0;
      }

      .complexity-card {
        background: var(--bg-secondary);
        padding: 25px;
        border-radius: 12px;
        border-left: 4px solid var(--accent-primary);
        transition: transform 0.3s ease;
      }

      .complexity-card:hover {
        transform: translateX(5px);
      }

      .complexity-title {
        font-size: 1.3rem;
        margin-bottom: 15px;
        color: var(--accent-primary);
      }

      .complexity-value {
        font-size: 2rem;
        font-weight: bold;
        color: var(--accent-secondary);
        font-family: "Fira Code", monospace;
      }

      /* Interactive Demo */
      .demo-container {
        background: var(--bg-secondary);
        padding: 30px;
        border-radius: 15px;
        margin: 30px 0;
        border: 1px solid var(--border-color);
      }

      .demo-controls {
        display: flex;
        gap: 15px;
        margin-bottom: 30px;
        flex-wrap: wrap;
        align-items: center;
      }

      .demo-input {
        background: var(--bg-tertiary);
        border: 1px solid var(--border-color);
        color: var(--text-primary);
        padding: 10px 15px;
        border-radius: 8px;
        font-size: 1rem;
      }

      .demo-button {
        background: var(--gradient);
        color: white;
        border: none;
        padding: 12px 20px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1rem;
        transition: all 0.3s ease;
      }

      .demo-button:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow);
      }

      .demo-button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none;
      }

      /* Animation States */
      .step-animation {
        animation: stepHighlight 2s ease-in-out;
      }

      @keyframes stepHighlight {
        0%,
        100% {
          background: var(--bg-secondary);
        }
        50% {
          background: rgba(59, 130, 246, 0.2);
        }
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .header h1 {
          font-size: 2rem;
        }

        .nav-list {
          gap: 15px;
        }

        .section-title {
          font-size: 2rem;
        }

        .algo-overview {
          grid-template-columns: 1fr;
        }

        .demo-controls {
          flex-direction: column;
        }

        .matrix-cell {
          width: 40px;
          height: 40px;
          font-size: 0.9rem;
        }
      }

      /* Scrollbar Styling */
      ::-webkit-scrollbar {
        width: 8px;
      }

      ::-webkit-scrollbar-track {
        background: var(--bg-primary);
      }

      ::-webkit-scrollbar-thumb {
        background: var(--bg-tertiary);
        border-radius: 4px;
      }

      ::-webkit-scrollbar-thumb:hover {
        background: var(--accent-primary);
      }
    </style>
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <div class="container">
        <h1 class="animate__animated animate__fadeInDown">
          <i class="fas fa-search"></i> 2D Matrix Binary Search
        </h1>
        <p
          class="subtitle animate__animated animate__fadeInUp animate__delay-1s"
        >
          åŠ¹ç‡çš„ãªäºŒåˆ†æ¢ç´¢ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®æŠ€è¡“è§£èª¬
        </p>
      </div>
    </header>

    <!-- Navigation -->
    <nav class="nav">
      <div class="container">
        <ul class="nav-list">
          <li>
            <a href="#overview" class="nav-link active"
              ><i class="fas fa-info-circle"></i> æ¦‚è¦</a
            >
          </li>
          <li>
            <a href="#steps" class="nav-link"
              ><i class="fas fa-list-ol"></i> ã‚¹ãƒ†ãƒƒãƒ—è§£èª¬</a
            >
          </li>
          <li>
            <a href="#code" class="nav-link"
              ><i class="fas fa-code"></i> ã‚³ãƒ¼ãƒ‰ä¾‹</a
            >
          </li>
          <li>
            <a href="#demo" class="nav-link"
              ><i class="fas fa-play"></i> ãƒ‡ãƒ¢</a
            >
          </li>
          <li>
            <a href="#complexity" class="nav-link"
              ><i class="fas fa-chart-line"></i> è¨ˆç®—é‡</a
            >
          </li>
        </ul>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="main">
      <div class="container">
        <!-- Algorithm Overview -->
        <section id="overview" class="section">
          <h2 class="section-title">
            <i class="fas fa-lightbulb"></i> ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ æ¦‚è¦
          </h2>
          <div class="algo-overview">
            <div class="overview-card">
              <div class="card-icon">
                <i class="fa-solid fa-circle-exclamation"></i>
              </div>
              <h3 class="card-title">å•é¡Œè¨­å®š</h3>
              <p class="card-description">
                ã‚½ãƒ¼ãƒˆæ¸ˆã¿2æ¬¡å…ƒè¡Œåˆ—ã«ãŠã„ã¦ã€æŒ‡å®šã•ã‚ŒãŸã‚¿ãƒ¼ã‚²ãƒƒãƒˆå€¤ã‚’åŠ¹ç‡çš„ã«æ¤œç´¢ã™ã‚‹ã€‚
                å„è¡Œã¯æ˜‡é †ã‚½ãƒ¼ãƒˆã€ã‹ã¤å„è¡Œã®å…ˆé ­è¦ç´ ã¯å‰è¡Œã®æœ«å°¾è¦ç´ ã‚ˆã‚Šå¤§ãã„ã€‚
              </p>
            </div>
            <div class="overview-card">
              <div class="card-icon">
                <i class="fas fa-cog"></i>
              </div>
              <h3 class="card-title">ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ</h3>
              <p class="card-description">
                2æ¬¡å…ƒè¡Œåˆ—ã‚’1æ¬¡å…ƒé…åˆ—ã¨ã—ã¦æ‰±ã„ã€åº§æ¨™å¤‰æ›ã‚’ä½¿ç”¨ã—ã¦äºŒåˆ†æ¢ç´¢ã‚’å®Ÿè¡Œã€‚
                O(log(mÃ—n))ã®æ™‚é–“è¨ˆç®—é‡ã‚’å®Ÿç¾ã€‚
              </p>
            </div>
            <div class="overview-card">
              <div class="card-icon">
                <i class="fas fa-rocket"></i>
              </div>
              <h3 class="card-title">æœ€é©åŒ–</h3>
              <p class="card-description">
                Pythonå›ºæœ‰ã®ç‰¹æ€§ã‚’æ´»ç”¨ã—ã€æ•´æ•°æ¼”ç®—ã®åŠ¹ç‡æ€§ã¨å‹ãƒ’ãƒ³ãƒˆã«ã‚ˆã‚‹å¯èª­æ€§ã‚’ä¸¡ç«‹ã€‚
                ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡O(1)ã§å®Ÿè£…ã€‚
              </p>
            </div>
          </div>
        </section>

        <!-- Step by Step -->
        <section id="steps" class="section">
          <h2 class="section-title">
            <i class="fas fa-list-ol"></i> ã‚¹ãƒ†ãƒƒãƒ—ãƒã‚¤ã‚¹ãƒ†ãƒƒãƒ—è§£èª¬
          </h2>
          <div class="steps-container">
            <div class="step">
              <div class="step-header" onclick="toggleStep(this)">
                <div class="step-number">1</div>
                <div class="step-title">å…¥åŠ›æ¤œè¨¼ã¨ã‚µã‚¤ã‚ºå–å¾—</div>
                <div class="step-toggle">
                  <i class="fas fa-chevron-down"></i>
                </div>
              </div>
              <div class="step-content">
                <p>
                  ã¾ãšã€å…¥åŠ›è¡Œåˆ—ãŒç©ºã§ãªã„ã“ã¨ã‚’ç¢ºèªã—ã€è¡Œæ•°ï¼ˆnï¼‰ã¨åˆ—æ•°ï¼ˆmï¼‰ã‚’å–å¾—ã—ã¾ã™ã€‚
                </p>
                <div class="code-container">
                  <div class="code-header">
                    <span class="code-title">Step 1: Input Validation</span>
                    <button class="copy-btn" onclick="copyCode(this)">
                      <i class="fas fa-copy"></i> ã‚³ãƒ”ãƒ¼
                    </button>
                  </div>
                  <pre><code class="language-python code-block">if not matrix or not matrix[0]:
    return False

n, m = len(matrix), len(matrix[0])  # n=è¡Œæ•°, m=åˆ—æ•°</code></pre>
                </div>
              </div>
            </div>

            <div class="step">
              <div class="step-header" onclick="toggleStep(this)">
                <div class="step-number">2</div>
                <div class="step-title">äºŒåˆ†æ¢ç´¢ã®åˆæœŸåŒ–</div>
                <div class="step-toggle">
                  <i class="fas fa-chevron-down"></i>
                </div>
              </div>
              <div class="step-content">
                <p>
                  1æ¬¡å…ƒé…åˆ—ã¨ã—ã¦æ‰±ã†ãŸã‚ã€leftã‚’0ã€rightã‚’(nÃ—m-1)ã«è¨­å®šã—ã¾ã™ã€‚
                </p>
                <div class="code-container">
                  <div class="code-header">
                    <span class="code-title"
                      >Step 2: Binary Search Initialization</span
                    >
                    <button class="copy-btn" onclick="copyCode(this)">
                      <i class="fas fa-copy"></i> ã‚³ãƒ”ãƒ¼
                    </button>
                  </div>
                  <pre><code class="language-python code-block">left, right = 0, n * m - 1  # 1æ¬¡å…ƒé…åˆ—ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ç¯„å›²</code></pre>
                </div>
              </div>
            </div>

            <div class="step">
              <div class="step-header" onclick="toggleStep(this)">
                <div class="step-number">3</div>
                <div class="step-title">åº§æ¨™å¤‰æ›ã¨å€¤ã®å–å¾—</div>
                <div class="step-toggle">
                  <i class="fas fa-chevron-down"></i>
                </div>
              </div>
              <div class="step-content">
                <p>
                  1æ¬¡å…ƒã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹midã‚’2æ¬¡å…ƒåº§æ¨™ã«å¤‰æ›ã—ã€è©²å½“ã™ã‚‹å€¤ã‚’å–å¾—ã—ã¾ã™ã€‚
                </p>
                <div class="code-container">
                  <div class="code-header">
                    <span class="code-title"
                      >Step 3: Coordinate Conversion</span
                    >
                    <button class="copy-btn" onclick="copyCode(this)">
                      <i class="fas fa-copy"></i> ã‚³ãƒ”ãƒ¼
                    </button>
                  </div>
                  <pre><code class="language-python code-block">mid = (left + right) // 2
# åº§æ¨™å¤‰æ›: 1D index â†’ 2D coordinates
row = mid // m  # è¡Œã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
col = mid % m   # åˆ—ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
val = matrix[row][col]  # å®Ÿéš›ã®å€¤ã‚’å–å¾—</code></pre>
                </div>
              </div>
            </div>

            <div class="step">
              <div class="step-header" onclick="toggleStep(this)">
                <div class="step-number">4</div>
                <div class="step-title">å€¤ã®æ¯”è¼ƒã¨ç¯„å›²æ›´æ–°</div>
                <div class="step-toggle">
                  <i class="fas fa-chevron-down"></i>
                </div>
              </div>
              <div class="step-content">
                <p>
                  å–å¾—ã—ãŸå€¤ã¨ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’æ¯”è¼ƒã—ã€æ¢ç´¢ç¯„å›²ã‚’åŠåˆ†ã«çµã‚Šè¾¼ã¿ã¾ã™ã€‚
                </p>
                <div class="code-container">
                  <div class="code-header">
                    <span class="code-title">Step 4: Value Comparison</span>
                    <button class="copy-btn" onclick="copyCode(this)">
                      <i class="fas fa-copy"></i> ã‚³ãƒ”ãƒ¼
                    </button>
                  </div>
                  <pre><code class="language-python code-block">if val == target:
    return True  # è¦‹ã¤ã‹ã£ãŸï¼
elif val < target:
    left = mid + 1  # å³åŠåˆ†ã‚’æ¢ç´¢
else:
    right = mid - 1  # å·¦åŠåˆ†ã‚’æ¢ç´¢</code></pre>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Code Example -->
        <section id="code" class="section">
          <h2 class="section-title">
            <i class="fas fa-code"></i> å®Œå…¨ãªã‚³ãƒ¼ãƒ‰å®Ÿè£…
          </h2>
          <div class="code-container">
            <div class="code-header">
              <span class="code-title">
                <i class="fab fa-python"></i> Python Implementation
              </span>
              <button class="copy-btn" onclick="copyCode(this)">
                <i class="fas fa-copy"></i> ã‚³ãƒ”ãƒ¼
              </button>
            </div>
            <pre><code class="language-python code-block">from typing import List

class Solution:
    def searchMatrix(self, matrix: List[List[int]], target: int) -> bool:
        """
        2Dè¡Œåˆ—å†…ã‚’äºŒåˆ†æ¢ç´¢ã§æ¢ç´¢ã™ã‚‹
        è¡Œåˆ—ã¯ã€Œå„è¡ŒãŒã‚½ãƒ¼ãƒˆæ¸ˆã¿ã€ã€Œè¡Œã®å…ˆé ­ãŒå‰è¡Œã®æœ«å°¾ã‚ˆã‚Šå¤§ãã„ã€ã¨ã„ã†æ¡ä»¶ã‚’æº€ãŸã™

        æ™‚é–“è¨ˆç®—é‡: O(log(m * n))
        ç©ºé–“è¨ˆç®—é‡: O(1)
        """
        # Step 1: å…¥åŠ›æ¤œè¨¼
        if not matrix or not matrix[0]:
            return False

        # Step 2: è¡Œåˆ—ã®ã‚µã‚¤ã‚ºã‚’å–å¾—
        n, m = len(matrix), len(matrix[0])

        # Step 3: äºŒåˆ†æ¢ç´¢ã®åˆæœŸåŒ–
        left, right = 0, n * m - 1

        # Step 4: äºŒåˆ†æ¢ç´¢ã®ãƒ¡ã‚¤ãƒ³ãƒ«ãƒ¼ãƒ—
        while left <= right:
            # ä¸­å¤®ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’è¨ˆç®—
            mid = (left + right) // 2

            # 1D â†’ 2D åº§æ¨™å¤‰æ›
            row = mid // m
            col = mid % m
            val = matrix[row][col]

            # å€¤ã‚’æ¯”è¼ƒã—ã¦æ¢ç´¢ç¯„å›²ã‚’æ›´æ–°
            if val == target:
                return True
            elif val < target:
                left = mid + 1
            else:
                right = mid - 1

        # Step 5: è¦‹ã¤ã‹ã‚‰ãªã‹ã£ãŸå ´åˆ
        return False

# ä½¿ç”¨ä¾‹ã¨ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹
def test_search_matrix():
    solution = Solution()

    # Test Case 1
    matrix1 = [[1,3,5,7],[10,11,16,20],[23,30,34,60]]
    assert solution.searchMatrix(matrix1, 3) == True
    assert solution.searchMatrix(matrix1, 13) == False

    # Test Case 2
    matrix2 = [[1,4,7,11,15],[2,5,8,12,19],[3,6,9,16,22],[10,13,14,17,24],[18,21,23,26,30]]
    assert solution.searchMatrix(matrix2, 5) == True
    assert solution.searchMatrix(matrix2, 20) == False

    print("All test cases passed! âœ…")

if __name__ == "__main__":
    test_search_matrix()</code></pre>
          </div>
        </section>

        <!-- Interactive Demo -->
        <section id="demo" class="section">
          <h2 class="section-title">
            <i class="fas fa-play"></i> ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ‡ãƒ¢
          </h2>
          <div class="demo-container">
            <div class="demo-controls">
              <label for="targetInput">ã‚¿ãƒ¼ã‚²ãƒƒãƒˆå€¤:</label>
              <input
                type="number"
                id="targetInput"
                class="demo-input"
                value="3"
                min="1"
                max="60"
              />
              <button class="demo-button" onclick="startDemo()">
                <i class="fas fa-play"></i> ãƒ‡ãƒ¢é–‹å§‹
              </button>
              <button class="demo-button" onclick="resetDemo()">
                <i class="fas fa-undo"></i> ãƒªã‚»ãƒƒãƒˆ
              </button>
            </div>

            <div class="diagram-container">
              <h3>2Dè¡Œåˆ—ã®è¦–è¦šåŒ–</h3>
              <div class="matrix-visual">
                <div class="matrix-grid" id="matrixGrid">
                  <!-- JavaScript ã§å‹•çš„ç”Ÿæˆ -->
                </div>
                <p id="statusText">ãƒ‡ãƒ¢ã‚’é–‹å§‹ã—ã¦ãã ã•ã„</p>
              </div>

              <div
                id="stepsInfo"
                style="margin-top: 20px; text-align: left; display: none"
              >
                <h4>æ¢ç´¢ã‚¹ãƒ†ãƒƒãƒ—:</h4>
                <div id="stepsList"></div>
              </div>
            </div>
          </div>
        </section>

        <!-- Complexity Analysis -->
        <section id="complexity" class="section">
          <h2 class="section-title">
            <i class="fas fa-chart-line"></i> è¨ˆç®—é‡è§£æ
          </h2>
          <div class="complexity-grid">
            <div class="complexity-card">
              <h3 class="complexity-title">æ™‚é–“è¨ˆç®—é‡</h3>
              <div class="complexity-value">O(log(mÃ—n))</div>
              <p>äºŒåˆ†æ¢ç´¢ã«ã‚ˆã‚Šã€å„ã‚¹ãƒ†ãƒƒãƒ—ã§æ¢ç´¢ç¯„å›²ã‚’åŠåˆ†ã«å‰Šæ¸›</p>
            </div>
            <div class="complexity-card">
              <h3 class="complexity-title">ç©ºé–“è¨ˆç®—é‡</h3>
              <div class="complexity-value">O(1)</div>
              <p>å›ºå®šæ•°ã®å¤‰æ•°ã®ã¿ä½¿ç”¨ã€å…¥åŠ›ã‚µã‚¤ã‚ºã«ä¾å­˜ã—ãªã„</p>
            </div>
            <div class="complexity-card">
              <h3 class="complexity-title">æœ€å¤§ã‚¹ãƒ†ãƒƒãƒ—æ•°</h3>
              <div class="complexity-value">âŒˆlogâ‚‚(mÃ—n)âŒ‰</div>
              <p>ä¾‹: 3Ã—4è¡Œåˆ—ã§ã¯æœ€å¤§4ã‚¹ãƒ†ãƒƒãƒ—ã§å®Œäº†</p>
            </div>
          </div>

          <div class="diagram-container">
            <h3>è¨ˆç®—é‡ã®æ¯”è¼ƒ</h3>
            <div
              style="
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 20px;
                margin-top: 20px;
              "
            >
              <div
                style="
                  text-align: center;
                  padding: 20px;
                  background: var(--bg-tertiary);
                  border-radius: 10px;
                "
              >
                <h4 style="color: var(--accent-danger)">Linear Search</h4>
                <div
                  style="
                    font-size: 1.5rem;
                    color: var(--accent-danger);
                    margin: 10px 0;
                  "
                >
                  O(mÃ—n)
                </div>
                <p style="font-size: 0.9rem; color: var(--text-secondary)">
                  æœ€æ‚ª: å…¨è¦ç´ ãƒã‚§ãƒƒã‚¯
                </p>
              </div>
              <div
                style="
                  text-align: center;
                  padding: 20px;
                  background: var(--bg-tertiary);
                  border-radius: 10px;
                "
              >
                <h4 style="color: var(--accent-secondary)">Binary Search</h4>
                <div
                  style="
                    font-size: 1.5rem;
                    color: var(--accent-secondary);
                    margin: 10px 0;
                  "
                >
                  O(log(mÃ—n))
                </div>
                <p style="font-size: 0.9rem; color: var(--text-secondary)">
                  åŠ¹ç‡çš„: æ¯å›åŠåˆ†ã«å‰Šæ¸›
                </p>
              </div>
            </div>
          </div>
        </section>

        <!-- Performance Analysis -->
        <section class="section">
          <h2 class="section-title">
            <i class="fas fa-tachometer-alt"></i> ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ
          </h2>
          <div class="overview-card" style="margin-bottom: 30px">
            <h3 style="color: var(--accent-primary); margin-bottom: 15px">
              Pythonå›ºæœ‰ã®æœ€é©åŒ–ãƒã‚¤ãƒ³ãƒˆ
            </h3>
            <div
              style="
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 20px;
              "
            >
              <div>
                <h4 style="color: var(--accent-secondary)">âœ… åŠ¹ç‡çš„ãªæ¼”ç®—</h4>
                <ul style="color: var(--text-secondary); padding-left: 20px">
                  <li>
                    æ•´æ•°é™¤ç®— <code>//</code> ã¨ãƒ¢ã‚¸ãƒ¥ãƒ­ <code>%</code> ã®æ´»ç”¨
                  </li>
                  <li>CPythonã®Cå®Ÿè£…ã«ã‚ˆã‚‹é«˜é€ŸåŒ–</li>
                  <li>ãƒ“ãƒƒãƒˆã‚·ãƒ•ãƒˆã‚ˆã‚Šå¯èª­æ€§é‡è¦–</li>
                </ul>
              </div>
              <div>
                <h4 style="color: var(--accent-secondary)">ğŸ“ å¯èª­æ€§ã®å‘ä¸Š</h4>
                <ul style="color: var(--text-secondary); padding-left: 20px">
                  <li>å‹ãƒ’ãƒ³ãƒˆã«ã‚ˆã‚‹é™çš„è§£æå¯¾å¿œ</li>
                  <li>æ˜ç¢ºãªå¤‰æ•°åã®ä½¿ç”¨</li>
                  <li>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ–‡å­—åˆ—ã®å……å®Ÿ</li>
                </ul>
              </div>
            </div>
          </div>

          <div class="code-container">
            <div class="code-header">
              <span class="code-title">æœ€é©åŒ–æ¯”è¼ƒä¾‹</span>
              <button class="copy-btn" onclick="copyCode(this)">
                <i class="fas fa-copy"></i> ã‚³ãƒ”ãƒ¼
              </button>
            </div>
            <pre><code class="language-python code-block"># âŒ éåŠ¹ç‡ãªå®Ÿè£…ä¾‹
def searchMatrix_slow(matrix, target):
    for row in matrix:
        for val in row:
            if val == target:
                return True
    return False  # O(mÃ—n) - å…¨è¦ç´ ã‚’ãƒã‚§ãƒƒã‚¯

# âœ… æœ€é©åŒ–ã•ã‚ŒãŸå®Ÿè£…
def searchMatrix_optimized(matrix, target):
    if not matrix or not matrix[0]:
        return False

    n, m = len(matrix), len(matrix[0])
    left, right = 0, n * m - 1

    while left <= right:
        mid = (left + right) // 2  # Cå®Ÿè£…ã§é«˜é€Ÿ
        val = matrix[mid // m][mid % m]  # åŠ¹ç‡çš„ãªåº§æ¨™å¤‰æ›

        if val == target:
            return True
        elif val < target:
            left = mid + 1
        else:
            right = mid - 1

    return False  # O(log(mÃ—n)) - æŒ‡æ•°çš„ã«é«˜é€Ÿ</code></pre>
          </div>
        </section>
      </div>
    </main>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>

    <script>
      // Sample matrix for demo
      const sampleMatrix = [
        [1, 3, 5, 7],
        [10, 11, 16, 20],
        [23, 30, 34, 60],
      ];

      let demoSteps = [];
      let currentStep = 0;
      let demoRunning = false;

      // Initialize matrix visualization
      function initMatrix() {
        const grid = document.getElementById("matrixGrid");
        grid.innerHTML = "";

        sampleMatrix.flat().forEach((val, index) => {
          const cell = document.createElement("div");
          cell.className = "matrix-cell";
          cell.textContent = val;
          cell.id = `cell-${index}`;
          grid.appendChild(cell);
        });
      }

      // Binary search simulation
      function binarySearchSimulation(target) {
        const steps = [];
        const n = sampleMatrix.length;
        const m = sampleMatrix[0].length;
        let left = 0;
        let right = n * m - 1;

        while (left <= right) {
          const mid = Math.floor((left + right) / 2);
          const row = Math.floor(mid / m);
          const col = mid % m;
          const val = sampleMatrix[row][col];

          steps.push({
            left,
            right,
            mid,
            row,
            col,
            val,
            comparison:
              val === target ? "found" : val < target ? "less" : "greater",
          });

          if (val === target) {
            break;
          } else if (val < target) {
            left = mid + 1;
          } else {
            right = mid - 1;
          }
        }

        return steps;
      }

      // Start demo
      function startDemo() {
        const target = parseInt(document.getElementById("targetInput").value);

        if (demoRunning) return;

        // Reset everything first
        resetDemoCompletely();

        demoRunning = true;

        // Generate steps
        demoSteps = binarySearchSimulation(target);
        currentStep = 0;

        // Show steps info
        document.getElementById("stepsInfo").style.display = "block";

        // Start animation
        animateStep();
      }

      // Animate each step
      function animateStep() {
        console.log(
          "ğŸ¬ animateStep called, currentStep:",
          currentStep,
          "total steps:",
          demoSteps.length
        );
        console.log("ğŸ­ demoRunning status:", demoRunning);

        // å®‰å…¨ãƒã‚§ãƒƒã‚¯: demoRunningãŒfalseãªã‚‰åœæ­¢
        if (!demoRunning) {
          console.log("âš ï¸ Demo not running, stopping animation");
          return;
        }

        if (currentStep >= demoSteps.length) {
          console.log("ğŸ Animation completed");
          demoRunning = false;
          return;
        }

        const step = demoSteps[currentStep];
        const cellId = `cell-${step.mid}`;
        const cell = document.getElementById(cellId);

        console.log(
          "ğŸ¯ Processing step:",
          currentStep + 1,
          "cellId:",
          cellId,
          "value:",
          step.val
        );

        // Clear previous highlights
        document.querySelectorAll(".matrix-cell").forEach((c) => {
          c.classList.remove("highlight", "target");
        });

        // Highlight current cell
        cell.classList.add("highlight");

        // Update status
        const statusText = document.getElementById("statusText");
        const comparison =
          step.comparison === "found"
            ? "è¦‹ã¤ã‹ã£ãŸï¼"
            : step.comparison === "less"
            ? `${step.val} < ${
                document.getElementById("targetInput").value
              }, å³åŠåˆ†ã‚’æ¢ç´¢`
            : `${step.val} > ${
                document.getElementById("targetInput").value
              }, å·¦åŠåˆ†ã‚’æ¢ç´¢`;

        statusText.innerHTML = `
                     Step ${currentStep + 1}:
                     ä½ç½®[${step.row}][${step.col}] = ${step.val}<br>
                     ${comparison}
                 `;

        // Add to steps list - è¦ç´ ã®å–å¾—ã‚’æ¯å›è¡Œã†
        const stepsList = document.getElementById("stepsList");
        if (!stepsList) {
          console.error("âŒ stepsList not found!");
          return;
        }

        console.log(
          "ğŸ“‹ Adding step to list, current children:",
          stepsList.children.length
        );

        const stepDiv = document.createElement("div");
        stepDiv.className = "demo-step-item";
        stepDiv.style.cssText =
          "padding: 10px; margin: 5px 0; background: var(--bg-tertiary); border-radius: 5px; border-left: 3px solid var(--accent-primary);";
        stepDiv.innerHTML = `
                     <strong>Step ${currentStep + 1}:</strong>
                     left=${step.left}, right=${step.right}, mid=${step.mid}<br>
                     <small>matrix[${step.row}][${step.col}] = ${
          step.val
        } ${comparison}</small>
                 `;

        try {
          stepsList.appendChild(stepDiv);
          console.log(
            "âœ… Step added, new children count:",
            stepsList.children.length
          );
        } catch (error) {
          console.error("âŒ Error adding step:", error);
        }

        // Scroll to latest step
        stepDiv.scrollIntoView({ behavior: "smooth", block: "nearest" });

        if (step.comparison === "found") {
          cell.classList.remove("highlight");
          cell.classList.add("target");
          statusText.innerHTML +=
            '<br><strong style="color: var(--accent-secondary);">ğŸ‰ ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸï¼</strong>';
          console.log("ğŸ‰ Target found! Stopping demo.");
          demoRunning = false;
          return;
        }

        currentStep++;

        // Continue after delay
        setTimeout(() => {
          if (!demoRunning) {
            console.log("âš ï¸ Demo stopped during timeout");
            return;
          }

          if (currentStep >= demoSteps.length) {
            statusText.innerHTML +=
              '<br><strong style="color: var(--accent-danger);">âŒ ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ</strong>';
            console.log("âŒ Target not found");
            demoRunning = false;
          } else {
            animateStep();
          }
        }, 2000);
      }

      // Reset demo completely (æ–°ã—ã„é–¢æ•°)
      function resetDemoCompletely() {
        demoRunning = false;
        currentStep = 0;
        demoSteps = [];

        // âœ… ã‚»ãƒ«ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚’ã‚¯ãƒªã‚¢
        document.querySelectorAll(".matrix-cell").forEach((cell) => {
          cell.classList.remove("highlight", "target");
        });

        // âœ… ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ†ã‚­ã‚¹ãƒˆã‚’åˆæœŸçŠ¶æ…‹ã«æˆ»ã™
        document.getElementById("statusText").textContent =
          "ãƒ‡ãƒ¢ã‚’é–‹å§‹ã—ã¦ãã ã•ã„";

        // âœ… ã‚¹ãƒ†ãƒƒãƒ—æƒ…å ±ã‚’éè¡¨ç¤ºã«ã—ã¦å®Œå…¨ã‚¯ãƒªã‚¢
        const stepsInfo = document.getElementById("stepsInfo");
        stepsInfo.style.display = "none";

        // âœ… ã‚¹ãƒ†ãƒƒãƒ—ãƒªã‚¹ãƒˆã‚’å®Œå…¨ã«ã‚¯ãƒªã‚¢ï¼ˆDOMã‹ã‚‰å…¨å‰Šé™¤ï¼‰
        const stepsList = document.getElementById("stepsList");
        while (stepsList.firstChild) {
          stepsList.removeChild(stepsList.firstChild);
        }
      }

      // Reset demo (æ—¢å­˜ã®é–¢æ•°ã‚‚æ®‹ã™)
      function resetDemo() {
        resetDemoCompletely();
      }

      // Toggle step content
      function toggleStep(header) {
        const step = header.parentElement;
        step.classList.toggle("active");
      }

      // Copy code to clipboard
      async function copyCode(button) {
        const codeBlock = button
          .closest(".code-container")
          .querySelector("code");
        const text = codeBlock.textContent;

        try {
          await navigator.clipboard.writeText(text);
          const originalText = button.innerHTML;
          button.innerHTML = '<i class="fas fa-check"></i> ã‚³ãƒ”ãƒ¼å®Œäº†';
          button.style.background = "var(--accent-secondary)";

          setTimeout(() => {
            button.innerHTML = originalText;
            button.style.background = "var(--accent-primary)";
          }, 2000);
        } catch (err) {
          console.error("Failed to copy: ", err);
        }
      }

      // Smooth scrolling for navigation
      document.querySelectorAll(".nav-link").forEach((link) => {
        link.addEventListener("click", (e) => {
          e.preventDefault();
          const targetId = link.getAttribute("href").substring(1);
          const targetElement = document.getElementById(targetId);

          // Update active nav
          document
            .querySelectorAll(".nav-link")
            .forEach((l) => l.classList.remove("active"));
          link.classList.add("active");

          // Smooth scroll
          targetElement.scrollIntoView({
            behavior: "smooth",
            block: "start",
          });
        });
      });

      // Update active nav on scroll
      window.addEventListener("scroll", () => {
        const sections = document.querySelectorAll(".section");
        const navLinks = document.querySelectorAll(".nav-link");

        let current = "";
        sections.forEach((section) => {
          const sectionTop = section.offsetTop;
          const sectionHeight = section.clientHeight;
          if (scrollY >= sectionTop - 200) {
            current = section.getAttribute("id");
          }
        });

        navLinks.forEach((link) => {
          link.classList.remove("active");
          if (link.getAttribute("href") === `#${current}`) {
            link.classList.add("active");
          }
        });
      });

      // Initialize on load
      document.addEventListener("DOMContentLoaded", () => {
        initMatrix();

        // Add line numbers to code blocks
        document.querySelectorAll("pre code").forEach((block) => {
          block.parentElement.classList.add("line-numbers");
        });
      });

      // Add intersection observer for animations
      const observerOptions = {
        threshold: 0.1,
        rootMargin: "0px 0px -50px 0px",
      };

      const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.style.animationDelay = "0s";
            entry.target.classList.add("animate__fadeInUp");
          }
        });
      }, observerOptions);

      // Observe all cards and containers
      document.addEventListener("DOMContentLoaded", () => {
        document
          .querySelectorAll(".overview-card, .step, .complexity-card")
          .forEach((el) => {
            observer.observe(el);
          });
      });
    </script>
  </body>
</html>
