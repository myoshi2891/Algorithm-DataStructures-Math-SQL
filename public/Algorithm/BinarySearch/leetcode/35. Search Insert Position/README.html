<!doctype html>
<html lang="ja">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Binary Search Algorithm Analysis</title>
        <style>
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                margin: 0;
                padding: 20px;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: #333;
            }

            .container {
                max-width: 1200px;
                margin: 0 auto;
                background: white;
                border-radius: 15px;
                padding: 30px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            }

            h1,
            h2 {
                color: #2c3e50;
                text-align: center;
            }

            h1 {
                border-bottom: 3px solid #3498db;
                padding-bottom: 10px;
                margin-bottom: 30px;
            }

            .example-section {
                margin: 30px 0;
                padding: 20px;
                background: #f8f9fa;
                border-radius: 10px;
                border-left: 5px solid #3498db;
            }

            .array-container {
                display: flex;
                justify-content: center;
                margin: 20px 0;
                flex-wrap: wrap;
            }

            .array-cell {
                width: 60px;
                height: 60px;
                border: 2px solid #34495e;
                display: flex;
                align-items: center;
                justify-content: center;
                margin: 2px;
                font-weight: bold;
                font-size: 16px;
                border-radius: 8px;
                position: relative;
            }

            .array-cell.target {
                background: #e74c3c;
                color: white;
                animation: pulse 1s infinite;
            }

            .array-cell.found {
                background: #27ae60;
                color: white;
            }

            .array-cell.left {
                background: #3498db;
                color: white;
            }

            .array-cell.right {
                background: #9b59b6;
                color: white;
            }

            .array-cell.mid {
                background: #f39c12;
                color: white;
                animation: highlight 0.8s ease-in-out;
            }

            .array-cell.eliminated {
                background: #bdc3c7;
                color: #7f8c8d;
                opacity: 0.5;
            }

            .index-label {
                position: absolute;
                bottom: -25px;
                font-size: 12px;
                color: #7f8c8d;
            }

            .pointer-label {
                position: absolute;
                top: -30px;
                font-size: 12px;
                font-weight: bold;
            }

            .left-pointer {
                color: #3498db;
            }

            .right-pointer {
                color: #9b59b6;
            }

            .mid-pointer {
                color: #f39c12;
            }

            .step-info {
                background: #ecf0f1;
                padding: 15px;
                border-radius: 8px;
                margin: 15px 0;
                border-left: 4px solid #2ecc71;
            }

            .complexity-box {
                background: linear-gradient(45deg, #667eea, #764ba2);
                color: white;
                padding: 20px;
                border-radius: 10px;
                margin: 20px 0;
                text-align: center;
            }

            .algorithm-flow {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 20px;
                margin: 20px 0;
            }

            .flow-step {
                background: #fff;
                border: 2px solid #3498db;
                border-radius: 10px;
                padding: 15px;
                text-align: center;
                position: relative;
            }

            .flow-step::after {
                content: 'â†“';
                position: absolute;
                bottom: -30px;
                left: 50%;
                transform: translateX(-50%);
                font-size: 20px;
                color: #3498db;
            }

            .flow-step:last-child::after {
                display: none;
            }

            @keyframes pulse {
                0% {
                    transform: scale(1);
                }

                50% {
                    transform: scale(1.05);
                }

                100% {
                    transform: scale(1);
                }
            }

            @keyframes highlight {
                0% {
                    transform: scale(1);
                }

                50% {
                    transform: scale(1.1);
                }

                100% {
                    transform: scale(1);
                }
            }

            .controls {
                text-align: center;
                margin: 20px 0;
            }

            button {
                background: #3498db;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                margin: 0 5px;
                font-size: 14px;
                transition: background 0.3s;
            }

            button:hover {
                background: #2980b9;
            }

            button:disabled {
                background: #bdc3c7;
                cursor: not-allowed;
            }

            .visualization-area {
                min-height: 200px;
                margin: 20px 0;
            }
        </style>
    </head>

    <body>
        <div class="container">
            <h1>ğŸ” Binary Search Algorithm - è©³ç´°è§£æ</h1>

            <div class="complexity-box">
                <h3>è¨ˆç®—é‡åˆ†æ</h3>
                <p><strong>æ™‚é–“è¨ˆç®—é‡:</strong> O(log n) - å„ã‚¹ãƒ†ãƒƒãƒ—ã§æ¤œç´¢ç¯„å›²ã‚’åŠåˆ†ã«å‰Šæ¸›</p>
                <p><strong>ç©ºé–“è¨ˆç®—é‡:</strong> O(1) - å®šæ•°ã®è¿½åŠ ãƒ¡ãƒ¢ãƒªã®ã¿ä½¿ç”¨</p>
            </div>

            <div class="algorithm-flow">
                <div class="flow-step">
                    <h4>1. åˆæœŸåŒ–</h4>
                    <p>left = 0<br />right = n-1</p>
                </div>
                <div class="flow-step">
                    <h4>2. ä¸­ç‚¹è¨ˆç®—</h4>
                    <p>mid = left + âŒŠ(right-left)/2âŒ‹</p>
                </div>
                <div class="flow-step">
                    <h4>3. æ¯”è¼ƒ</h4>
                    <p>nums[mid] ã¨ target ã‚’æ¯”è¼ƒ</p>
                </div>
                <div class="flow-step">
                    <h4>4. ç¯„å›²æ›´æ–°</h4>
                    <p>æ¡ä»¶ã«å¿œã˜ã¦ left ã¾ãŸã¯ right ã‚’æ›´æ–°</p>
                </div>
            </div>

            <h2>ğŸ“Š å®Ÿä¾‹ã«ã‚ˆã‚‹æ®µéšçš„è§£æ</h2>

            <div class="controls">
                <label for="example-select">ä¾‹ã‚’é¸æŠ: </label>
                <select id="example-select">
                    <option value="example1">ä¾‹1: [1,3,5,6], target=5 (å­˜åœ¨ã™ã‚‹å ´åˆ)</option>
                    <option value="example2">ä¾‹2: [1,3,5,6], target=2 (æŒ¿å…¥ä½ç½®)</option>
                    <option value="example3">ä¾‹3: [1,3,5,6], target=7 (æœ«å°¾æŒ¿å…¥)</option>
                </select>
                <button onclick="startVisualization()">å¯è¦–åŒ–é–‹å§‹</button>
                <button onclick="nextStep()" id="next-btn" disabled>æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—</button>
                <button onclick="reset()">ãƒªã‚»ãƒƒãƒˆ</button>
            </div>

            <div class="visualization-area" id="visualization">
                <!-- å‹•çš„ã«ç”Ÿæˆã•ã‚Œã‚‹å¯è¦–åŒ–ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
            </div>

            <div class="example-section">
                <h3>ğŸ¯ ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®æ ¸å¿ƒç†è§£</h3>
                <div class="step-info">
                    <strong>ãªãœ O(log n) ãªã®ã‹ï¼Ÿ</strong><br />
                    å„ã‚¹ãƒ†ãƒƒãƒ—ã§æ¤œç´¢ç¯„å›²ã‚’åŠåˆ†ã«å‰Šæ¸›ã™ã‚‹ãŸã‚ã€æœ€å¤§ã§ã‚‚ logâ‚‚(n)
                    å›ã®æ¯”è¼ƒã§å®Œäº†ã—ã¾ã™ã€‚ ä¾‹: n=1000ã®å ´åˆã€æœ€å¤§10å›ã®æ¯”è¼ƒã§çµæœãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚
                </div>
                <div class="step-info">
                    <strong>æŒ¿å…¥ä½ç½®ã®åˆ¤å®š</strong><br />
                    ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã€leftãƒã‚¤ãƒ³ã‚¿ãƒ¼ãŒè‡ªç„¶ã«æ­£ã—ã„æŒ¿å…¥ä½ç½®ã‚’æŒ‡ã—ã¾ã™ã€‚
                    ã“ã‚Œã¯ã€leftãŒå¸¸ã«ã€Œã‚¿ãƒ¼ã‚²ãƒƒãƒˆä»¥ä¸Šã®æœ€å°è¦ç´ ã®ä½ç½®ã€ã‚’ç¶­æŒã™ã‚‹ãŸã‚ã§ã™ã€‚
                </div>
            </div>
        </div>

        <script>
            const examples = {
                example1: {
                    nums: [1, 3, 5, 6],
                    target: 5,
                    title: 'ä¾‹1: ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãŒå­˜åœ¨ã™ã‚‹å ´åˆ (target=5)',
                },
                example2: {
                    nums: [1, 3, 5, 6],
                    target: 2,
                    title: 'ä¾‹2: ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãŒå­˜åœ¨ã—ãªã„å ´åˆ (target=2)',
                },
                example3: {
                    nums: [1, 3, 5, 6],
                    target: 7,
                    title: 'ä¾‹3: æœ«å°¾ã¸ã®æŒ¿å…¥ (target=7)',
                },
            };

            let currentExample = null;
            let currentStep = 0;
            let steps = [];

            function generateSteps(nums, target) {
                const steps = [];
                let left = 0;
                let right = nums.length - 1;

                steps.push({
                    left: left,
                    right: right,
                    mid: null,
                    description: `åˆæœŸçŠ¶æ…‹: left=${left}, right=${right}`,
                    action: 'init',
                });

                while (left <= right) {
                    const mid = left + Math.floor((right - left) / 2);

                    steps.push({
                        left: left,
                        right: right,
                        mid: mid,
                        description: `ä¸­ç‚¹è¨ˆç®—: mid=${mid}, nums[${mid}]=${nums[mid]}`,
                        action: 'calculate_mid',
                    });

                    if (nums[mid] === target) {
                        steps.push({
                            left: left,
                            right: right,
                            mid: mid,
                            description: `ç™ºè¦‹ï¼ nums[${mid}] = ${target}`,
                            action: 'found',
                            result: mid,
                        });
                        break;
                    } else if (nums[mid] < target) {
                        steps.push({
                            left: left,
                            right: right,
                            mid: mid,
                            description: `nums[${mid}] < ${target} ãªã®ã§å³åŠåˆ†ã‚’æ¤œç´¢`,
                            action: 'go_right',
                        });
                        left = mid + 1;
                    } else {
                        steps.push({
                            left: left,
                            right: right,
                            mid: mid,
                            description: `nums[${mid}] > ${target} ãªã®ã§å·¦åŠåˆ†ã‚’æ¤œç´¢`,
                            action: 'go_left',
                        });
                        right = mid - 1;
                    }
                }

                if (steps[steps.length - 1].action !== 'found') {
                    steps.push({
                        left: left,
                        right: right,
                        mid: null,
                        description: `æŒ¿å…¥ä½ç½®: ${left}`,
                        action: 'insert',
                        result: left,
                    });
                }

                return steps;
            }

            function renderStep(nums, target, step) {
                const container = document.getElementById('visualization');

                let html = `
                <div class="example-section">
                    <h3>${currentExample.title}</h3>
                    <div class="step-info">
                        <strong>ã‚¹ãƒ†ãƒƒãƒ— ${currentStep + 1}:</strong> ${step.description}
                    </div>
                    <div class="array-container">
            `;

                nums.forEach((num, index) => {
                    let classes = ['array-cell'];
                    let pointerLabel = '';

                    if (step.left === index) {
                        classes.push('left');
                        pointerLabel += '<span class="pointer-label left-pointer">L</span>';
                    }
                    if (step.right === index) {
                        classes.push('right');
                        pointerLabel += '<span class="pointer-label right-pointer">R</span>';
                    }
                    if (step.mid === index) {
                        classes.push('mid');
                        pointerLabel += '<span class="pointer-label mid-pointer">M</span>';
                    }

                    if (step.action === 'found' && step.mid === index) {
                        classes.push('found');
                    }

                    if (
                        (step.action === 'go_right' && index <= step.mid) ||
                        (step.action === 'go_left' && index >= step.mid)
                    ) {
                        if (step.mid !== index) {
                            classes.push('eliminated');
                        }
                    }

                    html += `
                    <div class="${classes.join(' ')}">
                        ${pointerLabel}
                        ${num}
                        <span class="index-label">${index}</span>
                    </div>
                `;
                });

                html += `
                    </div>
                    <div class="step-info">
                        <strong>ç¾åœ¨ã®çŠ¶æ…‹:</strong><br>
                        Left = ${step.left}, Right = ${step.right}${step.mid !== null ? `, Mid = ${step.mid}` : ''}<br>
                        Target = ${target}
                    </div>
            `;

                if (step.result !== undefined) {
                    html += `
                    <div class="step-info" style="border-left-color: #27ae60;">
                        <strong>çµæœ:</strong> ${step.action === 'found' ? 'ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹' : 'æŒ¿å…¥ä½ç½®'} = ${step.result}
                    </div>
                `;
                }

                html += `</div>`;
                container.innerHTML = html;
            }

            function startVisualization() {
                const selectedExample = document.getElementById('example-select').value;
                currentExample = examples[selectedExample];
                steps = generateSteps(currentExample.nums, currentExample.target);
                currentStep = 0;

                renderStep(currentExample.nums, currentExample.target, steps[currentStep]);

                document.getElementById('next-btn').disabled = false;
            }

            function nextStep() {
                if (currentStep < steps.length - 1) {
                    currentStep++;
                    renderStep(currentExample.nums, currentExample.target, steps[currentStep]);
                }

                if (currentStep >= steps.length - 1) {
                    document.getElementById('next-btn').disabled = true;
                }
            }

            function reset() {
                currentStep = 0;
                document.getElementById('visualization').innerHTML =
                    '<p style="text-align: center; color: #7f8c8d;">ä¾‹ã‚’é¸æŠã—ã¦ã€Œå¯è¦–åŒ–é–‹å§‹ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„</p>';
                document.getElementById('next-btn').disabled = true;
            }

            // åˆæœŸåŒ–
            reset();
        </script>
    </body>
</html>
