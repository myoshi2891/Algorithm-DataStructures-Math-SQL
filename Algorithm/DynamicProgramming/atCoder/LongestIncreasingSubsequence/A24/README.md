æœ€é•·å¢—åŠ éƒ¨åˆ†åˆ—ï¼ˆLIS: Longest Increasing Subsequenceï¼‰ã‚’æ±‚ã‚ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ï¼ˆO(N log N)) ã®æµã‚Œã‚’ã€**å›³ä»˜ã**ã§ã‚ã‹ã‚Šã‚„ã™ãè§£èª¬ã—ã¾ã™ã€‚

---

## ğŸ’¡ ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®æ¦‚è¦

- `dp[i]` ã¯ã€Œé•·ã•ãŒ `i+1` ã®å¢—åŠ éƒ¨åˆ†åˆ—ã®**æœ«å°¾ã®æœ€å°å€¤**ã€ã‚’ä¿æŒã—ã¾ã™ã€‚
- å„è¦ç´  `A[i]` ã‚’è¦‹ãªãŒã‚‰ã€
  - `dp` ã®ä¸­ã§ `A[i]` ã‚ˆã‚Š**åˆã‚ã¦å¤§ãã„ or ç­‰ã—ã„å€¤**ã‚’**äºŒåˆ†æ¢ç´¢**ã§æ¢ã—ã€
  - ãã®ä½ç½®ã‚’ `A[i]` ã§**ç½®ãæ›ãˆ**ã¾ã™ã€‚
- æœ€çµ‚çš„ãª `dp` ã®é•·ã•ãŒç­”ãˆã«ãªã‚Šã¾ã™ã€‚

---

## ğŸ“˜ ä¾‹ã§è§£èª¬ï¼ˆA = [2, 3, 1, 6, 4, 5]ï¼‰

åˆæœŸçŠ¶æ…‹ï¼š`dp = []`ï¼ˆç©ºï¼‰

### 1ï¸âƒ£ A[0] = 2
- dp ã¯ç©º â†’ `2` ã‚’è¿½åŠ 
```
dp = [2]
```

### 2ï¸âƒ£ A[1] = 3
- `3` ã¯ `dp` ã®æœ€å¾Œã®è¦ç´ ã‚ˆã‚Šå¤§ãã„ â†’ æœ«å°¾ã«è¿½åŠ 
```
dp = [2, 3]
```

### 3ï¸âƒ£ A[2] = 1
- `1` ã¯ `dp[0] (=2)` ã‚ˆã‚Šå°ã•ã„ â†’ å…ˆé ­ã‚’ç½®ãæ›ãˆã‚‹
```
dp = [1, 3]
```

### 4ï¸âƒ£ A[3] = 6
- `6` ã¯ `dp` ã®æœ€å¾Œã‚ˆã‚Šå¤§ãã„ â†’ æœ«å°¾ã«è¿½åŠ 
```
dp = [1, 3, 6]
```

### 5ï¸âƒ£ A[4] = 4
- `4` ã¯ `dp[2] (=6)` ã‚ˆã‚Šå°ã•ã„ãŒã€`dp[1] (=3)` ã‚ˆã‚Šå¤§ãã„
- â†’ `dp[2] (=6)` ã‚’ `4` ã«ç½®ãæ›ãˆã‚‹
```
dp = [1, 3, 4]
```

### 6ï¸âƒ£ A[5] = 5
- `5` ã¯ `dp[2] (=4)` ã‚ˆã‚Šå¤§ãã„ â†’ æœ«å°¾ã«è¿½åŠ 
```
dp = [1, 3, 4, 5]
```

---

## âœ… çµæœ

- `dp.length = 4`
- ã‚ˆã£ã¦ã€**æœ€é•·å¢—åŠ éƒ¨åˆ†åˆ—ã®é•·ã•ã¯ 4**

---

## ğŸ–¼ï¸ ã‚¤ãƒ¡ãƒ¼ã‚¸å›³

```
A = [2, 3, 1, 6, 4, 5]
      â†“   â†“   â†“   â†“   â†“
dp = [1, 3, 4, 5] â† å„ã‚¹ãƒ†ãƒƒãƒ—ã§æ›´æ–°
        â†‘
   é•·ã•4ã®LIS
```

---

## ğŸ” æ³¨æ„ç‚¹

- `dp` é…åˆ—ãã®ã‚‚ã®ã¯ã€Œå®Ÿéš›ã® LIS ã‚’æ§‹æˆã™ã‚‹éƒ¨åˆ†åˆ—ã€ã¨ã¯é™ã‚‰ãªã„ï¼ˆã‚ãã¾ã§é•·ã•ã‚’æ±‚ã‚ã‚‹ãŸã‚ã®è£œåŠ©ï¼‰ã€‚
- å®Ÿéš›ã®å¢—åŠ éƒ¨åˆ†åˆ—ã‚’æ±‚ã‚ãŸã„å ´åˆã¯ã€ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ãŒå¿…è¦ï¼ˆåˆ¥é€”ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹é…åˆ—ã‚’æŒã¤ï¼‰ã€‚
---

## âœ… ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®**å‡¦ç†è‡ªä½“ã¯æ­£ã—ã„**ã§ã™ãŒã€  
## â—ï¸ `dp = [1, 3, 4, 5]` ã¯ **å®Ÿéš›ã® LIS ã¨ä¸€è‡´ã™ã‚‹ã¨ã¯é™ã‚Šã¾ã›ã‚“**ã€‚

---

### ğŸ” ãŠã•ã‚‰ã„

å…¥åŠ›ï¼š
```
A = [2, 3, 1, 6, 4, 5]
```

ã“ã®é…åˆ—ã«å¯¾ã—ã¦æœ€é•·å¢—åŠ éƒ¨åˆ†åˆ—ï¼ˆLISï¼‰ã®**é•·ã•**ã¯ `4` ã§ã€  
å®Ÿéš›ã® LIS ã¨ã—ã¦ã¯ `**[2, 3, 4, 5]**` ãŒã‚ã‚Šãˆã¾ã™ã€‚

ã§ã‚‚ã€ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§é€”ä¸­ç”Ÿæˆã•ã‚Œã‚‹ `dp = [1, 3, 4, 5]` ãªã®ã§æ··ä¹±ã—ãŒã¡ã§ã™ã€‚

---

### ğŸ¤” ãªãœ `dp` ã¯ `[2, 3, 4, 5]` ã§ã¯ãªã„ã®ã‹ï¼Ÿ

ã“ã® `dp` ã¯ **æœ€é•·å¢—åŠ éƒ¨åˆ†åˆ—ã‚’æ§‹æˆã™ã‚‹ã€Œå€™è£œã®æœ«å°¾ã®æœ€å°å€¤ã€**ã‚’ç®¡ç†ã—ã¦ã„ã¦ã€  
ã€Œ**æœ€é•·å¢—åŠ éƒ¨åˆ†åˆ—ãã®ã‚‚ã®ã§ã¯ãªã„**ã€ã‹ã‚‰ã§ã™ã€‚

---

### ğŸ” ä¾‹ï¼šA = [2, 3, 1, 6, 4, 5]

| i | A[i] | dpã®æ›´æ–° | dp |
|--:|------|-----------|-----|
| 0 | 2    | è¿½åŠ        | [2] |
| 1 | 3    | è¿½åŠ        | [2, 3] |
| 2 | 1    | dp[0]æ›´æ–° | [1, 3] |
| 3 | 6    | è¿½åŠ        | [1, 3, 6] |
| 4 | 4    | dp[2]æ›´æ–° | [1, 3, 4] |
| 5 | 5    | è¿½åŠ        | [1, 3, 4, 5] |

â†’ ã“ã®æœ€çµ‚ `dp` ã¯ã€Œé•·ã•4ã®å¢—åŠ åˆ—ãŒå­˜åœ¨ã™ã‚‹ã€ã¨ã„ã†æƒ…å ±ã‚’æŒã£ã¦ã„ã‚‹ã ã‘ã§ã€  
å®Ÿéš›ã®åˆ— `[2, 3, 4, 5]` ã®æ§‹æˆé †åºã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

---

## âœ… çµè«–

- `dp` ã¯ **å®Ÿéš›ã® LIS ã§ã¯ãªãã€ãã®é•·ã•ã‚’å¾—ã‚‹ãŸã‚ã®é“å…·**ã€‚
- `[2, 3, 4, 5]` ã®ã‚ˆã†ã«ã€**æ­£ã—ã„ LIS ã¯ä»–ã®ãƒ«ãƒ¼ãƒˆã§å¾—ã‚‰ã‚Œã¾ã™**ã€‚
- ã‚‚ã— **å®Ÿéš›ã® LIS ã‚’å‡ºåŠ›ã—ãŸã„**å ´åˆã¯ã€åˆ¥ã®é…åˆ—ã§ãƒ‘ã‚¹ã‚’è¨˜éŒ²ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

---

å›³è§£ä»˜ãã§ã€Œ**å®Ÿéš›ã®LISï¼ˆåˆ—ï¼‰ã‚’å¾©å…ƒã™ã‚‹å‡¦ç†**ã€ã‚’åˆ†ã‹ã‚Šã‚„ã™ãè§£èª¬ã—ã¾ã™ï¼  
æµã‚Œã‚’è¿½ã„ã¤ã¤ã€`dp`, `dpIndex`, `prevIndex` ã®3ã¤ã®é…åˆ—ãŒã©ã†å¤‰åŒ–ã—ã¦ã„ãã‹ã‚’**ã‚¹ãƒ†ãƒƒãƒ—ã”ã¨ã«å›³è§£**ã—ã¦ã„ãã¾ã™ã€‚

---

## ğŸ¯ å•é¡Œã®ä¾‹

```txt
A = [2, 3, 1, 6, 4, 5]
```

---

## ğŸ§© ç”¨èªæ•´ç†

| é…åˆ—        | æ„å‘³ |
|-------------|------|
| `dp`        | å„é•·ã•ã®LISã®æœ«å°¾ã®æœ€å°å€¤ |
| `dpIndex`   | `dp[i]` ãŒ A ã®ä½•ç•ªç›®ã ã£ãŸã‹ |
| `prevIndex` | A[i] ã®ç›´å‰ã®LISè¦ç´ ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆãŸã©ã‚‹ã¨å…ƒã®åˆ—ãŒã‚ã‹ã‚‹ï¼‰ |

---

## ğŸ” å„ã‚¹ãƒ†ãƒƒãƒ—ã‚’å›³ã§è¿½ã†ï¼

---

### ğŸŸ¢ Step 0ï¼ši = 0, A[i] = 2

- `dp` ã¯ç©º â†’ è¿½åŠ 
- `dp = [2]`
- `dpIndex = [0]`
- `prevIndex[0] = -1`

```
dp:        [2]
dpIndex:   [0]
prevIndex: [-1, _, _, _, _, _]
```

---

### ğŸŸ¢ Step 1ï¼ši = 1, A[i] = 3

- 3 > dp[0] â†’ è¿½åŠ 
- `dp = [2, 3]`
- `dpIndex = [0, 1]`
- `prevIndex[1] = dpIndex[0] = 0`

```
dp:        [2, 3]
dpIndex:   [0, 1]
prevIndex: [-1, 0, _, _, _, _]
```

---

### ğŸŸ¢ Step 2ï¼ši = 2, A[i] = 1

- 1 < dp[0] â†’ dp[0] ã‚’æ›´æ–°
- `dp = [1, 3]`
- `dpIndex = [2, 1]`
- `prevIndex[2] = -1`ï¼ˆå…ˆé ­ãªã®ã§ï¼‰

```
dp:        [1, 3]
dpIndex:   [2, 1]
prevIndex: [-1, 0, -1, _, _, _]
```

---

### ğŸŸ¢ Step 3ï¼ši = 3, A[i] = 6

- 6 > dp[1] â†’ è¿½åŠ 
- `dp = [1, 3, 6]`
- `dpIndex = [2, 1, 3]`
- `prevIndex[3] = dpIndex[1] = 1`

```
dp:        [1, 3, 6]
dpIndex:   [2, 1, 3]
prevIndex: [-1, 0, -1, 1, _, _]
```

---

### ğŸŸ¢ Step 4ï¼ši = 4, A[i] = 4

- 4 < dp[2] (=6) â†’ dp[2] ã‚’æ›´æ–°
- `dp = [1, 3, 4]`
- `dpIndex = [2, 1, 4]`
- `prevIndex[4] = dpIndex[1] = 1`

```
dp:        [1, 3, 4]
dpIndex:   [2, 1, 4]
prevIndex: [-1, 0, -1, 1, 1, _]
```

---

### ğŸŸ¢ Step 5ï¼ši = 5, A[i] = 5

- 5 > dp[2] (=4) â†’ è¿½åŠ 
- `dp = [1, 3, 4, 5]`
- `dpIndex = [2, 1, 4, 5]`
- `prevIndex[5] = dpIndex[2] = 4`

```
dp:        [1, 3, 4, 5]
dpIndex:   [2, 1, 4, 5]
prevIndex: [-1, 0, -1, 1, 1, 4]
```

---

## ğŸ§± LIS ã®å¾©å…ƒï¼ˆé€†é †ã«ãŸã©ã‚‹ï¼‰

æœ€å¾Œã® LIS ã®æœ«å°¾ã¯ `dpIndex[3] = 5` â†’ A[5] = 5  
ãã“ã‹ã‚‰ `prevIndex` ã‚’ãŸã©ã£ã¦ã„ãï¼š

```
index = 5 â†’ 4 â†’ 1 â†’ 0
A[index] = 5 â†’ 4 â†’ 3 â†’ 2
```

â†’ é€†é †ãªã®ã§ **LIS = [2, 3, 4, 5]**

---

## âœ… å‡ºåŠ›çµæœ

```txt
4
2 3 4 5
```

---

## ğŸ’¬ è£œè¶³

- `dp` ã¯ LIS ã®é•·ã•ã‚’æ±‚ã‚ã‚‹ãŸã‚ã®é“å…·
- `dpIndex` + `prevIndex` ã‚’ä½¿ãˆã°ã€**å®Ÿéš›ã®åˆ—ã‚‚å®Œå…¨å¾©å…ƒã§ãã‚‹ï¼**

---
