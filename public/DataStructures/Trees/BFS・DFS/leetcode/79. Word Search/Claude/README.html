<!doctype html>
<html lang="ja">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Word Search Algorithm - DFS + Backtracking</title>

        <!-- External CDN Resources -->
        <link
            href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css"
            rel="stylesheet"
        />
        <link
            href="/vendor/fontawesome/css/all.min.css"
            rel="stylesheet"
        />
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap"
            rel="stylesheet"
        />

        <style>
            :root {
                --primary-color: #6366f1;
                --secondary-color: #8b5cf6;
                --accent-color: #06b6d4;
                --success-color: #10b981;
                --warning-color: #f59e0b;
                --error-color: #ef4444;
                --dark-bg: #0f172a;
                --card-bg: #1e293b;
                --text-primary: #f8fafc;
                --text-secondary: #cbd5e1;
                --border-color: #334155;
                --code-bg: #1e1e1e;
            }

            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family: 'Inter', sans-serif;
                background: linear-gradient(135deg, var(--dark-bg) 0%, #1e293b 100%);
                color: var(--text-primary);
                line-height: 1.6;
                min-height: 100vh;
            }

            .container {
                max-width: 1200px;
                margin: 0 auto;
                padding: 2rem;
            }

            /* Header */
            .header {
                text-align: center;
                margin-bottom: 3rem;
                position: relative;
            }

            .header::before {
                content: '';
                position: absolute;
                top: 0;
                left: 50%;
                transform: translateX(-50%);
                width: 100px;
                height: 4px;
                background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
                border-radius: 2px;
            }

            .header h1 {
                font-size: 3rem;
                font-weight: 700;
                margin: 2rem 0 1rem;
                background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }

            .header .subtitle {
                font-size: 1.2rem;
                color: var(--text-secondary);
                font-weight: 300;
            }

            /* Navigation */
            .nav-tabs {
                display: flex;
                justify-content: center;
                gap: 1rem;
                margin-bottom: 2rem;
                flex-wrap: wrap;
            }

            .nav-tab {
                padding: 0.8rem 1.5rem;
                background: var(--card-bg);
                border: 1px solid var(--border-color);
                border-radius: 0.5rem;
                cursor: pointer;
                transition: all 0.3s ease;
                font-weight: 500;
                display: flex;
                align-items: center;
                gap: 0.5rem;
            }

            .nav-tab:hover {
                background: var(--primary-color);
                transform: translateY(-2px);
                box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
            }

            .nav-tab.active {
                background: var(--primary-color);
                border-color: var(--primary-color);
            }

            /* Cards */
            .card {
                background: var(--card-bg);
                border: 1px solid var(--border-color);
                border-radius: 1rem;
                padding: 2rem;
                margin-bottom: 2rem;
                box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
                transition: all 0.3s ease;
            }

            .card:hover {
                transform: translateY(-4px);
                box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            }

            .card h2 {
                font-size: 1.8rem;
                margin-bottom: 1rem;
                color: var(--primary-color);
                display: flex;
                align-items: center;
                gap: 0.5rem;
            }

            .card h3 {
                font-size: 1.3rem;
                margin: 1.5rem 0 1rem;
                color: var(--accent-color);
            }

            /* Code styling */
            .code-container {
                position: relative;
                margin: 1rem 0;
            }

            .copy-button {
                position: absolute;
                top: 1rem;
                right: 1rem;
                background: var(--primary-color);
                border: none;
                color: white;
                padding: 0.5rem;
                border-radius: 0.25rem;
                cursor: pointer;
                font-size: 0.9rem;
                transition: all 0.2s ease;
                z-index: 10;
            }

            .copy-button:hover {
                background: var(--secondary-color);
            }

            pre[class*='language-'] {
                background: var(--code-bg) !important;
                border-radius: 0.5rem;
                border: 1px solid var(--border-color);
                font-family: 'JetBrains Mono', monospace !important;
                font-size: 0.9rem;
                line-height: 1.5;
                overflow-x: auto;
            }

            code[class*='language-'] {
                font-family: 'JetBrains Mono', monospace !important;
            }

            /* Algorithm visualization */
            .algo-viz {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 2rem;
                margin: 2rem 0;
            }

            .board-container {
                text-align: center;
            }

            .board {
                display: inline-grid;
                grid-template-columns: repeat(4, 1fr);
                gap: 0.5rem;
                margin: 1rem 0;
            }

            .cell {
                width: 60px;
                height: 60px;
                background: var(--card-bg);
                border: 2px solid var(--border-color);
                border-radius: 0.5rem;
                display: flex;
                align-items: center;
                justify-content: center;
                font-weight: 600;
                font-size: 1.2rem;
                transition: all 0.3s ease;
                cursor: pointer;
            }

            .cell.current {
                background: var(--primary-color);
                border-color: var(--primary-color);
                color: white;
                transform: scale(1.1);
            }

            .cell.visited {
                background: var(--success-color);
                border-color: var(--success-color);
                color: white;
            }

            .cell.completed {
                background: var(--success-color);
                border-color: var(--success-color);
                color: white;
                box-shadow: 0 0 10px rgba(16, 185, 129, 0.5);
            }

            /* Steps container */
            .steps-container {
                background: var(--code-bg);
                border-radius: 0.5rem;
                padding: 1.5rem;
                border: 1px solid var(--border-color);
            }

            .step {
                padding: 0.8rem;
                margin: 0.5rem 0;
                border-radius: 0.5rem;
                border-left: 4px solid var(--border-color);
                transition: all 0.3s ease;
                opacity: 0.6;
            }

            .step.active {
                background: rgba(99, 102, 241, 0.1);
                border-left-color: var(--primary-color);
                opacity: 1;
                transform: translateX(0.5rem);
            }

            .step.completed {
                background: rgba(16, 185, 129, 0.1);
                border-left-color: var(--success-color);
                opacity: 0.8;
            }

            /* Complexity analysis */
            .complexity-grid {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 1.5rem;
                margin: 1.5rem 0;
            }

            .complexity-card {
                background: linear-gradient(
                    135deg,
                    rgba(99, 102, 241, 0.1),
                    rgba(139, 92, 246, 0.1)
                );
                padding: 1.5rem;
                border-radius: 0.8rem;
                border: 1px solid rgba(99, 102, 241, 0.2);
            }

            .complexity-value {
                font-size: 1.5rem;
                font-weight: 600;
                font-family: 'JetBrains Mono', monospace;
                color: var(--accent-color);
                margin: 0.5rem 0;
            }

            /* Interactive controls */
            .controls {
                display: flex;
                gap: 1rem;
                justify-content: center;
                margin: 1.5rem 0;
                flex-wrap: wrap;
            }

            .btn {
                padding: 0.8rem 1.5rem;
                border: none;
                border-radius: 0.5rem;
                font-weight: 500;
                cursor: pointer;
                transition: all 0.3s ease;
                display: flex;
                align-items: center;
                gap: 0.5rem;
            }

            .btn-primary {
                background: var(--primary-color);
                color: white;
            }

            .btn-primary:hover {
                background: var(--secondary-color);
                transform: translateY(-2px);
            }

            .btn-secondary {
                background: var(--card-bg);
                color: var(--text-primary);
                border: 1px solid var(--border-color);
            }

            .btn:disabled {
                opacity: 0.5;
                cursor: not-allowed;
                transform: none !important;
            }

            .btn:disabled:hover {
                background: var(--card-bg);
                transform: none !important;
            }

            .btn-primary:disabled:hover {
                background: var(--primary-color);
                transform: none !important;
            }

            /* Responsive design */
            @media (max-width: 768px) {
                .container {
                    padding: 1rem;
                }

                .header h1 {
                    font-size: 2rem;
                }

                .algo-viz {
                    grid-template-columns: 1fr;
                }

                .complexity-grid {
                    grid-template-columns: 1fr;
                }

                .nav-tabs {
                    justify-content: stretch;
                }

                .nav-tab {
                    flex: 1;
                    text-align: center;
                }

                .cell {
                    width: 50px;
                    height: 50px;
                    font-size: 1rem;
                }
            }

            /* Animation classes */
            .fade-in {
                animation: fadeIn 0.5s ease-in;
            }

            @keyframes fadeIn {
                from {
                    opacity: 0;
                    transform: translateY(20px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            .pulse {
                animation: pulse 2s infinite;
            }

            @keyframes pulse {
                0%,
                100% {
                    opacity: 1;
                }
                50% {
                    opacity: 0.7;
                }
            }

            /* Hidden content */
            .content-section {
                display: none;
            }

            .content-section.active {
                display: block;
                animation: fadeIn 0.5s ease-in;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <!-- Header -->
            <header class="header">
                <h1><i class="fas fa-search"></i> Word Search Algorithm</h1>
                <p class="subtitle">DFS + Backtracking ã«ã‚ˆã‚‹åŠ¹ç‡çš„ãªè§£æ³•</p>
            </header>

            <!-- Navigation -->
            <nav class="nav-tabs">
                <div class="nav-tab active" data-section="overview">
                    <i class="fas fa-info-circle"></i> æ¦‚è¦
                </div>
                <div class="nav-tab" data-section="algorithm">
                    <i class="fas fa-cogs"></i> ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
                </div>
                <div class="nav-tab" data-section="code"><i class="fas fa-code"></i> ã‚³ãƒ¼ãƒ‰</div>
                <div class="nav-tab" data-section="visualization">
                    <i class="fas fa-eye"></i> å¯è¦–åŒ–
                </div>
                <div class="nav-tab" data-section="complexity">
                    <i class="fas fa-chart-line"></i> è¨ˆç®—é‡
                </div>
            </nav>

            <!-- Overview Section -->
            <section id="overview" class="content-section active">
                <div class="card">
                    <h2><i class="fas fa-lightbulb"></i> å•é¡Œæ¦‚è¦</h2>
                    <p>
                        2æ¬¡å…ƒæ–‡å­—ã‚°ãƒªãƒƒãƒ‰å†…ã§æŒ‡å®šã•ã‚ŒãŸå˜èªãŒå­˜åœ¨ã™ã‚‹ã‹ã‚’åˆ¤å®šã™ã‚‹å•é¡Œã§ã™ã€‚å˜èªã¯éš£æ¥ã™ã‚‹ã‚»ãƒ«ï¼ˆä¸Šä¸‹å·¦å³ï¼‰ã‚’é †æ¬¡è¾¿ã£ã¦æ§‹æˆã•ã‚Œã€åŒã˜ã‚»ãƒ«ã¯1å›ã—ã‹ä½¿ç”¨ã§ãã¾ã›ã‚“ã€‚
                    </p>

                    <h3>åˆ¶ç´„æ¡ä»¶</h3>
                    <ul>
                        <li><code>1 â‰¤ m, n â‰¤ 6</code> (ã‚°ãƒªãƒƒãƒ‰ã‚µã‚¤ã‚º)</li>
                        <li><code>1 â‰¤ word.length â‰¤ 15</code> (å˜èªé•·)</li>
                        <li>è‹±å¤§æ–‡å­—ãƒ»å°æ–‡å­—ã®ã¿</li>
                        <li>åŒã˜ã‚»ãƒ«ã¯1å›ã®ã¿ä½¿ç”¨å¯èƒ½</li>
                    </ul>

                    <h3>Example</h3>
                    <div class="code-container">
                        <button class="copy-button" onclick="copyCode(this)">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre><code class="language-python">Input: board = [["A","B","C","E"],
                ["S","F","C","S"],
                ["A","D","E","E"]],
       word = "ABCCED"
Output: true</code></pre>
                    </div>
                </div>
            </section>

            <!-- Algorithm Section -->
            <section id="algorithm" class="content-section">
                <div class="card">
                    <h2><i class="fas fa-cogs"></i> ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ è©³è§£</h2>

                    <h3>æ¡ç”¨æ‰‹æ³•: DFS + ãƒãƒƒã‚¯ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°</h3>
                    <p>
                        æ·±ã•å„ªå…ˆæ¢ç´¢ï¼ˆDFSï¼‰ã¨ãƒãƒƒã‚¯ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã‚’çµ„ã¿åˆã‚ã›ã€å„ã‚»ãƒ«ã‚’é–‹å§‹ç‚¹ã¨ã—ã¦ç›®æ¨™å˜èªã¨ä¸€è‡´ã™ã‚‹ãƒ‘ã‚¹ã‚’æ¢ç´¢ã—ã¾ã™ã€‚
                    </p>

                    <h3>ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®æµã‚Œ</h3>
                    <div class="steps-container">
                        <div class="step completed">
                            <strong>Step 1:</strong> å…¨ã‚»ãƒ«ã‚’é–‹å§‹ç‚¹å€™è£œã¨ã—ã¦æ¤œè¨¼
                        </div>
                        <div class="step completed">
                            <strong>Step 2:</strong> ç¾åœ¨ã‚»ãƒ«ãŒå¯¾è±¡æ–‡å­—ã¨ä¸€è‡´ã™ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
                        </div>
                        <div class="step completed">
                            <strong>Step 3:</strong> ä¸€è‡´ã—ãŸå ´åˆã€ã‚»ãƒ«ã‚’è¨ªå•æ¸ˆã¿ã¨ã—ã¦ãƒãƒ¼ã‚¯
                        </div>
                        <div class="step completed">
                            <strong>Step 4:</strong> 4æ–¹å‘ï¼ˆä¸Šä¸‹å·¦å³ï¼‰ã«å¯¾ã—ã¦å†å¸°çš„ã«æ¢ç´¢
                        </div>
                        <div class="step completed">
                            <strong>Step 5:</strong>
                            æ¢ç´¢å®Œäº†å¾Œã€ãƒãƒ¼ã‚¯ã‚’è§£é™¤ï¼ˆãƒãƒƒã‚¯ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ï¼‰
                        </div>
                    </div>

                    <h3>æ ¸ã¨ãªã‚‹æœ€é©åŒ–ãƒã‚¤ãƒ³ãƒˆ</h3>
                    <ul>
                        <li>
                            <strong>ã‚¤ãƒ³ãƒ—ãƒ¬ãƒ¼ã‚¹çŠ¶æ…‹ç®¡ç†:</strong>
                            visitedé…åˆ—ä¸è¦ã§ãƒ¡ãƒ¢ãƒªåŠ¹ç‡åŒ–
                        </li>
                        <li><strong>æ—©æœŸçµ‚äº†:</strong> ä¸ä¸€è‡´ç™ºè¦‹æ™‚ã®å³åº§ãªè¿”å´</li>
                        <li><strong>çŸ­çµ¡è©•ä¾¡:</strong> ORæ¼”ç®—å­ã«ã‚ˆã‚‹åŠ¹ç‡çš„ãªæ–¹å‘æ¢ç´¢</li>
                    </ul>
                </div>
            </section>

            <!-- Code Section -->
            <section id="code" class="content-section">
                <div class="card">
                    <h2><i class="fas fa-code"></i> å®Ÿè£…ã‚³ãƒ¼ãƒ‰</h2>

                    <h3>å®Œå…¨å®Ÿè£…</h3>
                    <div class="code-container">
                        <button class="copy-button" onclick="copyCode(this)">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre><code class="language-python">from typing import List

class Solution:
    def exist(self, board: List[List[str]], word: str) -> bool:
        m, n = len(board), len(board[0])
        word_len = len(word)

        def dfs(i: int, j: int, k: int) -> bool:
            # ãƒ™ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹: å˜èªå®Œæˆ
            if k == word_len:
                return True

            # å¢ƒç•Œãƒã‚§ãƒƒã‚¯
            if not (0 <= i < m and 0 <= j < n):
                return False

            # æ–‡å­—ä¸€è‡´ãƒã‚§ãƒƒã‚¯
            if board[i][j] != word[k]:
                return False

            # ãƒãƒƒã‚¯ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°å‡¦ç†
            tmp = board[i][j]
            board[i][j] = "#"  # è¨ªå•æ¸ˆã¿ãƒãƒ¼ã‚¯

            # 4æ–¹å‘æ¢ç´¢ï¼ˆçŸ­çµ¡è©•ä¾¡ï¼‰
            res = (
                dfs(i + 1, j, k + 1) or  # ä¸‹
                dfs(i - 1, j, k + 1) or  # ä¸Š
                dfs(i, j + 1, k + 1) or  # å³
                dfs(i, j - 1, k + 1)     # å·¦
            )

            # çŠ¶æ…‹å¾©å…ƒ
            board[i][j] = tmp
            return res

        # å…¨ã‚»ãƒ«ã‹ã‚‰é–‹å§‹ç‚¹ã‚’è©¦è¡Œ
        for i in range(m):
            for j in range(n):
                if dfs(i, j, 0):
                    return True
        return False</code></pre>
                    </div>

                    <h3>æ ¸ã¨ãªã‚‹é–¢æ•°ã®è©³ç´°è§£èª¬</h3>
                    <div class="code-container">
                        <button class="copy-button" onclick="copyCode(this)">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre><code class="language-python"># DFSé–¢æ•°ã®å„éƒ¨åˆ†è§£èª¬

# 1. æˆåŠŸæ¡ä»¶ï¼šå˜èªã‚’å®Œå…¨ã«è¦‹ã¤ã‘ãŸ
if k == word_len:
    return True

# 2. å¢ƒç•Œæ¡ä»¶ï¼šã‚°ãƒªãƒƒãƒ‰å¤–ã‚¢ã‚¯ã‚»ã‚¹é˜²æ­¢
if not (0 <= i < m and 0 <= j < n):
    return False

# 3. ä¸€è‡´æ¡ä»¶ï¼šç¾åœ¨æ–‡å­—ãŒç›®æ¨™æ–‡å­—ã¨ä¸€è‡´ã™ã‚‹ã‹
if board[i][j] != word[k]:
    return False

# 4. çŠ¶æ…‹ç®¡ç†ï¼šè¨ªå•æ¸ˆã¿ãƒãƒ¼ã‚¯ã¨å¾©å…ƒ
tmp = board[i][j]      # å…ƒã®å€¤ã‚’ä¿å­˜
board[i][j] = "#"      # è¨ªå•æ¸ˆã¿ãƒãƒ¼ã‚¯
# ... æ¢ç´¢å‡¦ç† ...
board[i][j] = tmp      # çŠ¶æ…‹å¾©å…ƒï¼ˆé‡è¦ï¼ï¼‰</code></pre>
                    </div>
                </div>
            </section>

            <!-- Visualization Section -->
            <section id="visualization" class="content-section">
                <div class="card">
                    <h2><i class="fas fa-eye"></i> ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ å¯è¦–åŒ–</h2>

                    <div class="controls">
                        <button
                            class="btn btn-primary"
                            id="startBtn"
                            onclick="startVisualization()"
                        >
                            <i class="fas fa-play"></i> å®Ÿè¡Œé–‹å§‹
                        </button>
                        <button
                            class="btn btn-secondary"
                            id="resetBtn"
                            onclick="resetVisualization()"
                        >
                            <i class="fas fa-redo"></i> ãƒªã‚»ãƒƒãƒˆ
                        </button>
                        <button
                            class="btn btn-secondary"
                            id="stepBtn"
                            onclick="stepVisualization()"
                        >
                            <i class="fas fa-step-forward"></i> ã‚¹ãƒ†ãƒƒãƒ—å®Ÿè¡Œ
                        </button>
                    </div>

                    <div class="algo-viz">
                        <div class="board-container">
                            <h3>ã‚°ãƒªãƒƒãƒ‰çŠ¶æ…‹</h3>
                            <div class="board" id="visualBoard">
                                <div class="cell" data-pos="0,0">A</div>
                                <div class="cell" data-pos="0,1">B</div>
                                <div class="cell" data-pos="0,2">C</div>
                                <div class="cell" data-pos="0,3">E</div>
                                <div class="cell" data-pos="1,0">S</div>
                                <div class="cell" data-pos="1,1">F</div>
                                <div class="cell" data-pos="1,2">C</div>
                                <div class="cell" data-pos="1,3">S</div>
                                <div class="cell" data-pos="2,0">A</div>
                                <div class="cell" data-pos="2,1">D</div>
                                <div class="cell" data-pos="2,2">E</div>
                                <div class="cell" data-pos="2,3">E</div>
                            </div>
                            <p>æ¢ç´¢å˜èª: <strong id="targetWord">ABCCED</strong></p>
                            <p>ç¾åœ¨ä½ç½®: <span id="currentPos">-</span></p>
                            <p>æ¢ç´¢æ·±åº¦: <span id="currentDepth">0</span></p>
                        </div>

                        <div class="steps-container">
                            <h3>å®Ÿè¡Œã‚¹ãƒ†ãƒƒãƒ—</h3>
                            <div id="stepsList">
                                <div class="step">å¯è¦–åŒ–ã‚’é–‹å§‹ã—ã¦ãã ã•ã„</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Complexity Section -->
            <section id="complexity" class="content-section">
                <div class="card">
                    <h2><i class="fas fa-chart-line"></i> è¨ˆç®—é‡åˆ†æ</h2>

                    <div class="complexity-grid">
                        <div class="complexity-card">
                            <h3><i class="fas fa-clock"></i> æ™‚é–“è¨ˆç®—é‡</h3>
                            <div class="complexity-value">O(m Ã— n Ã— 4^L)</div>
                            <ul>
                                <li><strong>m Ã— n:</strong> å…¨ã‚»ãƒ«ã‚’é–‹å§‹ç‚¹ã¨ã—ã¦è©¦è¡Œ</li>
                                <li><strong>4^L:</strong> å„ã‚¹ãƒ†ãƒƒãƒ—ã§æœ€å¤§4æ–¹å‘ã€æœ€å¤§Lå›ã®å†å¸°</li>
                                <li><strong>L:</strong> å˜èªã®é•·ã•ï¼ˆæœ€å¤§15ï¼‰</li>
                            </ul>
                        </div>

                        <div class="complexity-card">
                            <h3><i class="fas fa-memory"></i> ç©ºé–“è¨ˆç®—é‡</h3>
                            <div class="complexity-value">O(L)</div>
                            <ul>
                                <li><strong>å†å¸°ã‚¹ã‚¿ãƒƒã‚¯:</strong> å˜èªé•·Lã«æ¯”ä¾‹</li>
                                <li><strong>visitedé…åˆ—ä¸è¦:</strong> ã‚¤ãƒ³ãƒ—ãƒ¬ãƒ¼ã‚¹ç®¡ç†</li>
                                <li><strong>ãƒ¡ãƒ¢ãƒªåŠ¹ç‡:</strong> æœ€å°é™ã®è¿½åŠ ãƒ¡ãƒ¢ãƒª</li>
                            </ul>
                        </div>
                    </div>

                    <h3>åˆ¶ç´„æ¡ä»¶ä¸‹ã§ã®æ€§èƒ½</h3>
                    <p>åˆ¶ç´„ <code>m, n â‰¤ 6</code> ã‹ã¤ <code>word.length â‰¤ 15</code> ã«ãŠã„ã¦:</p>
                    <ul>
                        <li>æœ€æ‚ªã‚±ãƒ¼ã‚¹: <code>6 Ã— 6 Ã— 4^15 â‰ˆ 3.86 Ã— 10^10</code> æ¼”ç®—</li>
                        <li>å®Ÿéš›ã®æ€§èƒ½: æ—©æœŸçµ‚äº†ã¨ãƒ—ãƒ«ãƒ¼ãƒ‹ãƒ³ã‚°ã«ã‚ˆã‚Šå¤§å¹…å‰Šæ¸›</li>
                        <li>å®Ÿç”¨æ€§: åˆ¶ç´„ãŒå°ã•ã„ãŸã‚ååˆ†é«˜é€Ÿ</li>
                    </ul>

                    <h3>æœ€é©åŒ–ã«ã‚ˆã‚‹æ”¹å–„åŠ¹æœ</h3>
                    <div class="code-container">
                        <button class="copy-button" onclick="copyCode(this)">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre><code class="language-python"># æœ€é©åŒ–å‰ï¼švisitedé…åˆ—ä½¿ç”¨
visited = [[False] * n for _ in range(m)]  # O(mÃ—n) è¿½åŠ ãƒ¡ãƒ¢ãƒª

# æœ€é©åŒ–å¾Œï¼šã‚¤ãƒ³ãƒ—ãƒ¬ãƒ¼ã‚¹ç®¡ç†
tmp = board[i][j]      # O(1) ä¸€æ™‚å¤‰æ•°ã®ã¿
board[i][j] = "#"      # æ—¢å­˜é…åˆ—ã‚’æ´»ç”¨
# ... å‡¦ç† ...
board[i][j] = tmp      # çŠ¶æ…‹å¾©å…ƒ

# çŸ­çµ¡è©•ä¾¡ã«ã‚ˆã‚‹æ—©æœŸçµ‚äº†
return (dfs(i+1,j,k+1) or dfs(i-1,j,k+1) or
        dfs(i,j+1,k+1) or dfs(i,j-1,k+1))  # ã„ãšã‚Œã‹æˆåŠŸã§å³çµ‚äº†</code></pre>
                    </div>
                </div>
            </section>
        </div>

        <!-- External Scripts -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>

        <script>
            // Navigation functionality
            document.addEventListener('DOMContentLoaded', function () {
                const tabs = document.querySelectorAll('.nav-tab');
                const sections = document.querySelectorAll('.content-section');

                tabs.forEach((tab) => {
                    tab.addEventListener('click', function () {
                        const targetSection = this.dataset.section;

                        // Remove active class from all tabs and sections
                        tabs.forEach((t) => t.classList.remove('active'));
                        sections.forEach((s) => s.classList.remove('active'));

                        // Add active class to clicked tab and corresponding section
                        this.classList.add('active');
                        document.getElementById(targetSection).classList.add('active');
                    });
                });
            });

            // Copy code functionality
            function copyCode(button) {
                const codeBlock = button.nextElementSibling.querySelector('code');
                const text = codeBlock.textContent;

                navigator.clipboard.writeText(text).then(function () {
                    const originalHTML = button.innerHTML;
                    button.innerHTML = '<i class="fas fa-check"></i>';
                    button.style.background = 'var(--success-color)';

                    setTimeout(function () {
                        button.innerHTML = originalHTML;
                        button.style.background = 'var(--primary-color)';
                    }, 2000);
                });
            }

            // Visualization state
            let visualizationState = {
                board: [
                    ['A', 'B', 'C', 'E'],
                    ['S', 'F', 'C', 'S'],
                    ['A', 'D', 'E', 'E'],
                ],
                word: 'ABCCED',
                currentStep: 0,
                isRunning: false,
                intervalId: null,
                path: [
                    { pos: [0, 0], char: 'A', action: 'start' },
                    { pos: [0, 1], char: 'B', action: 'move' },
                    { pos: [0, 2], char: 'C', action: 'move' },
                    { pos: [1, 2], char: 'C', action: 'move' },
                    { pos: [2, 2], char: 'E', action: 'move' },
                    { pos: [2, 1], char: 'D', action: 'complete' },
                ],
            };

            function updateButtonStates() {
                const startBtn = document.getElementById('startBtn');
                const resetBtn = document.getElementById('resetBtn');
                const stepBtn = document.getElementById('stepBtn');

                if (visualizationState.isRunning) {
                    startBtn.disabled = true;
                    stepBtn.disabled = true;
                    resetBtn.disabled = false;
                } else if (visualizationState.currentStep >= visualizationState.path.length) {
                    startBtn.disabled = true;
                    stepBtn.disabled = true;
                    resetBtn.disabled = false;
                } else if (visualizationState.currentStep === 0) {
                    startBtn.disabled = false;
                    stepBtn.disabled = false;
                    resetBtn.disabled = false;
                } else {
                    startBtn.disabled = true;
                    stepBtn.disabled = false;
                    resetBtn.disabled = false;
                }
            }

            function startVisualization() {
                if (visualizationState.isRunning) return;

                // Reset if needed
                if (visualizationState.currentStep > 0) {
                    resetVisualization();
                }

                visualizationState.isRunning = true;
                updateButtonStates();

                const steps = visualizationState.path;
                let stepIndex = 0;

                visualizationState.intervalId = setInterval(() => {
                    if (stepIndex >= steps.length) {
                        clearInterval(visualizationState.intervalId);
                        visualizationState.isRunning = false;
                        visualizationState.currentStep = steps.length;
                        updateButtonStates();
                        updateStepsList('âœ… æ¢ç´¢å®Œäº†ï¼å˜èª "ABCCED" ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸã€‚');
                        return;
                    }

                    const step = steps[stepIndex];
                    highlightCell(
                        step.pos,
                        stepIndex === steps.length - 1 ? 'completed' : 'current',
                    );
                    updateCurrentInfo(step.pos, stepIndex + 1, step.char);
                    updateStepsList(
                        `ğŸ“ ã‚¹ãƒ†ãƒƒãƒ— ${stepIndex + 1}: ä½ç½®(${step.pos[0]},${
                            step.pos[1]
                        })ã§æ–‡å­—'${step.char}'ã‚’ç™ºè¦‹`,
                    );

                    visualizationState.currentStep = stepIndex + 1;
                    stepIndex++;
                }, 1200);
            }

            function resetVisualization() {
                // Clear any running interval
                if (visualizationState.intervalId) {
                    clearInterval(visualizationState.intervalId);
                    visualizationState.intervalId = null;
                }

                // Reset state
                visualizationState.currentStep = 0;
                visualizationState.isRunning = false;

                // Reset all cells to initial state
                document.querySelectorAll('.cell').forEach((cell) => {
                    cell.className = 'cell';
                    cell.classList.remove('pulse');
                    cell.style.transform = '';
                    cell.style.backgroundColor = '';
                });

                // Reset info display
                document.getElementById('currentPos').textContent = '-';
                document.getElementById('currentDepth').textContent = '0';

                // Reset steps list
                document.getElementById('stepsList').innerHTML =
                    '<div class="step">ğŸš€ å¯è¦–åŒ–ã‚’é–‹å§‹ã—ã¦ãã ã•ã„</div>';

                // Update button states
                updateButtonStates();
            }

            function stepVisualization() {
                if (visualizationState.isRunning) return;

                const steps = visualizationState.path;
                const currentStep = visualizationState.currentStep;

                if (currentStep >= steps.length) {
                    updateStepsList('âœ… ã™ã¹ã¦ã®ã‚¹ãƒ†ãƒƒãƒ—ãŒå®Œäº†ã—ã¾ã—ãŸ');
                    return;
                }

                const step = steps[currentStep];
                highlightCell(step.pos, currentStep === steps.length - 1 ? 'completed' : 'current');
                updateCurrentInfo(step.pos, currentStep + 1, step.char);

                if (currentStep === steps.length - 1) {
                    updateStepsList(
                        `ğŸ¯ ã‚¹ãƒ†ãƒƒãƒ— ${currentStep + 1}: ä½ç½®(${step.pos[0]},${
                            step.pos[1]
                        })ã§æ–‡å­—'${step.char}'ã‚’ç™ºè¦‹ - å®Œäº†ï¼`,
                    );
                } else {
                    updateStepsList(
                        `ğŸ“ ã‚¹ãƒ†ãƒƒãƒ— ${currentStep + 1}: ä½ç½®(${step.pos[0]},${
                            step.pos[1]
                        })ã§æ–‡å­—'${step.char}'ã‚’ç™ºè¦‹`,
                    );
                }

                visualizationState.currentStep++;
                updateButtonStates();
            }

            function highlightCell(pos, type) {
                const cell = document.querySelector(`[data-pos="${pos[0]},${pos[1]}"]`);
                if (cell) {
                    // Remove previous current highlights but keep visited
                    if (type === 'current') {
                        document.querySelectorAll('.cell.current').forEach((c) => {
                            c.classList.remove('current', 'pulse');
                            if (!c.classList.contains('completed')) {
                                c.classList.add('visited');
                            }
                        });
                    }

                    // Add new highlight
                    cell.classList.remove('visited');
                    cell.classList.add(type);

                    // Add pulse animation for current cell
                    if (type === 'current') {
                        cell.classList.add('pulse');
                    } else if (type === 'completed') {
                        cell.classList.remove('pulse');
                        cell.classList.add('completed');
                    }
                }
            }

            function updateCurrentInfo(pos, depth, char) {
                document.getElementById('currentPos').textContent = `(${pos[0]}, ${pos[1]})`;
                document.getElementById('currentDepth').textContent = depth.toString();
            }

            function updateStepsList(message) {
                const stepsList = document.getElementById('stepsList');

                // If this is a reset, clear all steps
                if (message.includes('å¯è¦–åŒ–ã‚’é–‹å§‹')) {
                    stepsList.innerHTML = `<div class="step">${message}</div>`;
                    return;
                }

                const newStep = document.createElement('div');
                newStep.className = 'step active';
                newStep.textContent = message;

                // Remove active class from previous steps
                stepsList.querySelectorAll('.step').forEach((step) => {
                    step.classList.remove('active');
                    step.classList.add('completed');
                });

                stepsList.appendChild(newStep);

                // Scroll to latest step
                newStep.scrollIntoView({ behavior: 'smooth' });
            }

            // Initialize button states on page load
            document.addEventListener('DOMContentLoaded', function () {
                updateButtonStates();
            });

            // Add hover effects to cells
            document.addEventListener('DOMContentLoaded', function () {
                document.querySelectorAll('.cell').forEach((cell) => {
                    cell.addEventListener('mouseenter', function () {
                        if (
                            !this.classList.contains('current') &&
                            !this.classList.contains('visited')
                        ) {
                            this.style.transform = 'scale(1.05)';
                            this.style.backgroundColor = 'rgba(99, 102, 241, 0.2)';
                        }
                    });

                    cell.addEventListener('mouseleave', function () {
                        if (
                            !this.classList.contains('current') &&
                            !this.classList.contains('visited')
                        ) {
                            this.style.transform = 'scale(1)';
                            this.style.backgroundColor = 'var(--card-bg)';
                        }
                    });
                });
            });

            // Enhanced code highlighting
            document.addEventListener('DOMContentLoaded', function () {
                // Add line numbers to code blocks
                document.querySelectorAll('pre[class*="language-"]').forEach((pre) => {
                    pre.classList.add('line-numbers');
                });

                // Re-run Prism highlighting
                if (typeof Prism !== 'undefined') {
                    Prism.highlightAll();
                }
            });

            // Smooth scrolling for navigation
            document.querySelectorAll('.nav-tab').forEach((tab) => {
                tab.addEventListener('click', function () {
                    const targetSection = document.getElementById(this.dataset.section);
                    if (targetSection) {
                        setTimeout(() => {
                            targetSection.scrollIntoView({
                                behavior: 'smooth',
                                block: 'start',
                            });
                        }, 100);
                    }
                });
            });

            // Add loading animation for code blocks
            document.addEventListener('DOMContentLoaded', function () {
                const codeBlocks = document.querySelectorAll('.code-container');

                codeBlocks.forEach((container, index) => {
                    container.style.opacity = '0';
                    container.style.transform = 'translateY(20px)';

                    setTimeout(() => {
                        container.style.transition = 'all 0.5s ease';
                        container.style.opacity = '1';
                        container.style.transform = 'translateY(0)';
                    }, index * 200);
                });
            });

            // Performance metrics display
            function displayPerformanceMetrics() {
                const m = 6,
                    n = 6,
                    L = 15;
                const worstCase = m * n * Math.pow(4, L);
                const avgCase = worstCase * 0.1; // Estimated with pruning

                console.log(`æœ€æ‚ªã‚±ãƒ¼ã‚¹è¨ˆç®—é‡: ${worstCase.toExponential(2)}`);
                console.log(`å¹³å‡çš„ãªè¨ˆç®—é‡ï¼ˆãƒ—ãƒ«ãƒ¼ãƒ‹ãƒ³ã‚°è€ƒæ…®): ${avgCase.toExponential(2)}`);
            }

            // Initialize performance display
            document.addEventListener('DOMContentLoaded', displayPerformanceMetrics);

            // Add keyboard shortcuts
            document.addEventListener('keydown', function (e) {
                switch (e.key) {
                    case '1':
                        document.querySelector('[data-section="overview"]').click();
                        break;
                    case '2':
                        document.querySelector('[data-section="algorithm"]').click();
                        break;
                    case '3':
                        document.querySelector('[data-section="code"]').click();
                        break;
                    case '4':
                        document.querySelector('[data-section="visualization"]').click();
                        break;
                    case '5':
                        document.querySelector('[data-section="complexity"]').click();
                        break;
                    case ' ':
                        e.preventDefault();
                        if (document.getElementById('visualization').classList.contains('active')) {
                            stepVisualization();
                        }
                        break;
                    case 'Enter':
                        e.preventDefault();
                        if (document.getElementById('visualization').classList.contains('active')) {
                            startVisualization();
                        }
                        break;
                    case 'Escape':
                        if (document.getElementById('visualization').classList.contains('active')) {
                            resetVisualization();
                        }
                        break;
                }
            });

            // Add tooltips for better UX
            document.addEventListener('DOMContentLoaded', function () {
                const tooltipElements = [
                    {
                        selector: '.copy-button',
                        message: 'ã‚³ãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼',
                    },
                    {
                        selector: '.btn-primary',
                        message: 'ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼ or Enterã§ã‚‚å®Ÿè¡Œå¯èƒ½',
                    },
                    { selector: '.btn-secondary', message: 'Escapeã‚­ãƒ¼ã§ã‚‚ãƒªã‚»ãƒƒãƒˆå¯èƒ½' },
                    { selector: '.cell', message: 'ã‚»ãƒ«ã‚’ãƒ›ãƒãƒ¼ã—ã¦è©³ç´°ã‚’ç¢ºèª' },
                ];

                tooltipElements.forEach(({ selector, message }) => {
                    document.querySelectorAll(selector).forEach((element) => {
                        element.title = message;
                    });
                });
            });
        </script>
    </body>
</html>
