<!DOCTYPE html>
<html lang="ja">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Count and Say ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ è§£æ (TypeScriptç‰ˆ)</title>
        <style>
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                max-width: 1200px;
                margin: 0 auto;
                padding: 20px;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: #333;
                line-height: 1.6;
            }

            .container {
                background: white;
                border-radius: 15px;
                padding: 30px;
                box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            }

            h1,
            h2 {
                color: #2c3e50;
                text-align: center;
                margin-bottom: 30px;
            }

            h1 {
                font-size: 2.5rem;
                margin-bottom: 10px;
                background: linear-gradient(45deg, #667eea, #764ba2);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }

            .subtitle {
                text-align: center;
                color: #666;
                font-size: 1.2rem;
                margin-bottom: 40px;
            }

            .demo-section {
                background: #f8f9fa;
                border-radius: 10px;
                padding: 25px;
                margin: 30px 0;
                border-left: 5px solid #667eea;
            }

            .step-visualization {
                display: flex;
                flex-wrap: wrap;
                align-items: center;
                justify-content: center;
                gap: 20px;
                margin: 20px 0;
                padding: 20px;
                background: white;
                border-radius: 8px;
                border: 2px dashed #e9ecef;
            }

            .step-box {
                background: linear-gradient(135deg, #667eea, #764ba2);
                color: white;
                padding: 15px 25px;
                border-radius: 8px;
                font-weight: bold;
                font-size: 1.2rem;
                text-align: center;
                min-width: 80px;
                box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
                transition: transform 0.3s ease;
            }

            .step-box:hover {
                transform: translateY(-5px);
            }

            .arrow {
                font-size: 2rem;
                color: #667eea;
                font-weight: bold;
            }

            .rle-demo {
                background: #fff3cd;
                border: 2px solid #ffeaa7;
                border-radius: 10px;
                padding: 20px;
                margin: 20px 0;
            }

            .character-analysis {
                display: flex;
                flex-wrap: wrap;
                gap: 10px;
                justify-content: center;
                margin: 15px 0;
            }

            .char-group {
                background: #74b9ff;
                color: white;
                padding: 10px 15px;
                border-radius: 5px;
                font-family: monospace;
                font-size: 1.1rem;
                text-align: center;
            }

            .char-group.highlight {
                background: #e17055;
                animation: pulse 1s infinite;
            }

            @keyframes pulse {

                0%,
                100% {
                    transform: scale(1);
                }

                50% {
                    transform: scale(1.1);
                }
            }

            .code-section {
                background: #2d3748;
                color: #e2e8f0;
                padding: 25px;
                border-radius: 10px;
                margin: 30px 0;
                overflow-x: auto;
            }

            .code-section pre {
                margin: 0;
                font-family: 'Courier New', monospace;
                font-size: 0.9rem;
                line-height: 1.5;
            }

            .complexity-analysis {
                background: linear-gradient(135deg, #a8e6cf, #dcedc1);
                border-radius: 10px;
                padding: 25px;
                margin: 30px 0;
            }

            .complexity-item {
                display: flex;
                justify-content: space-between;
                align-items: center;
                background: white;
                padding: 15px;
                margin: 10px 0;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            }

            .interactive-demo {
                background: #e8f4f8;
                border-radius: 10px;
                padding: 25px;
                margin: 30px 0;
                text-align: center;
            }

            .input-group {
                margin: 20px 0;
            }

            input[type="number"] {
                padding: 10px 15px;
                border: 2px solid #667eea;
                border-radius: 5px;
                font-size: 1.1rem;
                width: 100px;
                text-align: center;
            }

            button {
                background: linear-gradient(135deg, #667eea, #764ba2);
                color: white;
                border: none;
                padding: 12px 25px;
                border-radius: 5px;
                font-size: 1.1rem;
                cursor: pointer;
                margin-left: 10px;
                transition: transform 0.3s ease;
            }

            button:hover {
                transform: translateY(-2px);
            }

            .result-display {
                background: white;
                border: 2px solid #667eea;
                border-radius: 8px;
                padding: 20px;
                margin: 20px 0;
                font-size: 1.2rem;
                font-family: monospace;
            }

            .process-steps {
                background: #f1f3f4;
                border-radius: 8px;
                padding: 15px;
                margin: 15px 0;
                font-family: monospace;
                font-size: 0.9rem;
            }
        </style>
    </head>

    <body>
        <div class="container">
            <h1>Count and Say ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ è§£æ</h1>
            <div class="subtitle">TypeScriptç‰ˆ - è¦–è¦šçš„è§£æã¨ãƒ‡ãƒ¢ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</div>

            <div class="demo-section">
                <h2>ğŸ” ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ æ¦‚è¦</h2>
                <p><strong>Count and Say</strong>ã¯ã€å‰ã®æ•°åˆ—ã®Run-Length Encodingï¼ˆRLEï¼‰ã‚’è¡Œã†ã“ã¨ã§æ¬¡ã®æ•°åˆ—ã‚’ç”Ÿæˆã™ã‚‹åå¾©çš„ãªã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã§ã™ã€‚</p>

                <div class="step-visualization">
                    <div class="step-box">n=1<br>"1"</div>
                    <div class="arrow">â†’</div>
                    <div class="step-box">n=2<br>"11"</div>
                    <div class="arrow">â†’</div>
                    <div class="step-box">n=3<br>"21"</div>
                    <div class="arrow">â†’</div>
                    <div class="step-box">n=4<br>"1211"</div>
                </div>
            </div>

            <div class="demo-section">
                <h2>ğŸ¯ Run-Length Encoding ã®è©³ç´°è§£æ</h2>

                <div class="rle-demo">
                    <h3>ä¾‹: "21" â†’ "1211" ã®å¤‰æ›ãƒ—ãƒ­ã‚»ã‚¹</h3>

                    <div class="character-analysis">
                        <div class="char-group highlight">2</div>
                        <div class="char-group highlight">1</div>
                    </div>

                    <p><strong>ã‚¹ãƒ†ãƒƒãƒ—1:</strong> æ–‡å­— "2" ã‚’1å›ã‚«ã‚¦ãƒ³ãƒˆ â†’ "12"</p>
                    <p><strong>ã‚¹ãƒ†ãƒƒãƒ—2:</strong> æ–‡å­— "1" ã‚’1å›ã‚«ã‚¦ãƒ³ãƒˆ â†’ "11"</p>
                    <p><strong>çµæœ:</strong> "12" + "11" = "1211"</p>
                </div>

                <div class="rle-demo">
                    <h3>ã‚ˆã‚Šè¤‡é›‘ãªä¾‹: "1112" â†’ "3112" ã®å¤‰æ›</h3>

                    <div class="character-analysis">
                        <div class="char-group">1</div>
                        <div class="char-group">1</div>
                        <div class="char-group">1</div>
                        <div class="char-group highlight">2</div>
                    </div>

                    <p><strong>ã‚¹ãƒ†ãƒƒãƒ—1:</strong> æ–‡å­— "1" ã‚’3å›ã‚«ã‚¦ãƒ³ãƒˆ â†’ "31"</p>
                    <p><strong>ã‚¹ãƒ†ãƒƒãƒ—2:</strong> æ–‡å­— "2" ã‚’1å›ã‚«ã‚¦ãƒ³ãƒˆ â†’ "12"</p>
                    <p><strong>çµæœ:</strong> "31" + "12" = "3112"</p>
                </div>
            </div>

            <div class="code-section">
                <h2>ğŸ’» TypeScriptå®Ÿè£…ã‚³ãƒ¼ãƒ‰</h2>
                <pre><code>/**
 * Count and Sayæ•°åˆ—ã®nç•ªç›®ã®è¦ç´ ã‚’è¿”ã™é–¢æ•°
 * @param {number} n - å–å¾—ã—ãŸã„æ•°åˆ—ã®ä½ç½®ï¼ˆ1ä»¥ä¸Š30ä»¥ä¸‹ï¼‰
 * @returns {string} nç•ªç›®ã®count-and-sayæ•°åˆ—ã®æ–‡å­—åˆ—
 */
function countAndSay(n: number): string {
    let current: string = "1";
    
    if (n === 1) return current;
    
    for (let i: number = 2; i <= n; i++) {
        current = runLengthEncode(current);
    }
    
    return current;
}

/**
 * Run-Length Encodingå®Ÿè£…
 * @param {string} str - ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã™ã‚‹æ–‡å­—åˆ—
 * @returns {string} ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰å¾Œã®æ–‡å­—åˆ—
 */
function runLengthEncode(str: string): string {
    let result: string = "";
    let count: number = 1;
    let currentChar: string = str[0];
    
    for (let i: number = 1; i < str.length; i++) {
        if (str[i] === currentChar) {
            count++;
        } else {
            result += count + currentChar;
            currentChar = str[i];
            count = 1;
        }
    }
    
    result += count + currentChar;
    return result;
}</code></pre>
            </div>

            <div class="complexity-analysis">
                <h2>ğŸ“Š è¨ˆç®—é‡è§£æ</h2>

                <div class="complexity-item">
                    <strong>æ™‚é–“è¨ˆç®—é‡:</strong>
                    <span>O(m Ã— k) - m: å„ã‚¹ãƒ†ãƒƒãƒ—ã®æ–‡å­—åˆ—é•·, k: ã‚¹ãƒ†ãƒƒãƒ—æ•°</span>
                </div>

                <div class="complexity-item">
                    <strong>ç©ºé–“è¨ˆç®—é‡:</strong>
                    <span>O(m) - å„ã‚¹ãƒ†ãƒƒãƒ—ã§ç”Ÿæˆã•ã‚Œã‚‹æ–‡å­—åˆ—ã®é•·ã•</span>
                </div>

                <div class="complexity-item">
                    <strong>æœ€é©åŒ–ãƒã‚¤ãƒ³ãƒˆ:</strong>
                    <span>åå¾©çš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã€æ–‡å­—åˆ—é€£çµã®æœ€é©åŒ–</span>
                </div>
            </div>

            <div class="interactive-demo">
                <h2>ğŸš€ ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ‡ãƒ¢</h2>
                <p>nã®å€¤ã‚’å…¥åŠ›ã—ã¦count-and-sayã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ï¼š</p>

                <div class="input-group">
                    <input type="number" id="nInput" min="1" max="15" value="4" placeholder="n">
                    <button onclick="demonstrateCountAndSay()">ç”Ÿæˆå®Ÿè¡Œ</button>
                </div>

                <div id="resultDisplay" class="result-display">
                    çµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™
                </div>

                <div id="processSteps" class="process-steps">
                    å‡¦ç†ã‚¹ãƒ†ãƒƒãƒ—ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™
                </div>
            </div>
        </div>

        <script>
            // JavaScriptç‰ˆã®å®Ÿè£…ï¼ˆHTMLã§å‹•ä½œã•ã›ã‚‹ãŸã‚ï¼‰
            function countAndSay(n) {
                let current = "1";

                if (n === 1) return current;

                for (let i = 2; i <= n; i++) {
                    current = runLengthEncode(current);
                }

                return current;
            }

            function runLengthEncode(str) {
                let result = "";
                let count = 1;
                let currentChar = str[0];

                for (let i = 1; i < str.length; i++) {
                    if (str[i] === currentChar) {
                        count++;
                    } else {
                        result += count + currentChar;
                        currentChar = str[i];
                        count = 1;
                    }
                }

                result += count + currentChar;
                return result;
            }

            function demonstrateCountAndSay() {
                const n = parseInt(document.getElementById('nInput').value);
                const resultDiv = document.getElementById('resultDisplay');
                const stepsDiv = document.getElementById('processSteps');

                if (n < 1 || n > 15) {
                    resultDiv.innerHTML = '<span style="color: red;">nã¯1ã‹ã‚‰15ã®é–“ã§å…¥åŠ›ã—ã¦ãã ã•ã„</span>';
                    return;
                }

                // çµæœã®è¡¨ç¤º
                const result = countAndSay(n);
                resultDiv.innerHTML = `<strong>countAndSay(${n}) = "${result}"</strong>`;

                // ãƒ—ãƒ­ã‚»ã‚¹ã®è¡¨ç¤º
                let steps = '<strong>å‡¦ç†ã‚¹ãƒ†ãƒƒãƒ—:</strong><br>';
                let current = "1";
                steps += `Step 1: countAndSay(1) = "${current}"<br>`;

                for (let i = 2; i <= n; i++) {
                    const previous = current;
                    current = runLengthEncode(current);
                    steps += `Step ${i}: RLE("${previous}") = "${current}"<br>`;

                    // RLEã®è©³ç´°ã‚’è¿½åŠ 
                    steps += `  â†’ "${previous}"ã®è§£æ: `;
                    let analysis = analyzeRLE(previous);
                    steps += analysis + '<br>';
                }

                stepsDiv.innerHTML = steps;
            }

            function analyzeRLE(str) {
                let analysis = "";
                let count = 1;
                let currentChar = str[0];
                let parts = [];

                for (let i = 1; i < str.length; i++) {
                    if (str[i] === currentChar) {
                        count++;
                    } else {
                        parts.push(`"${currentChar}"ã‚’${count}å› â†’ "${count}${currentChar}"`);
                        currentChar = str[i];
                        count = 1;
                    }
                }
                parts.push(`"${currentChar}"ã‚’${count}å› â†’ "${count}${currentChar}"`);

                return parts.join(', ');
            }

            // åˆæœŸãƒ‡ãƒ¢ã‚’å®Ÿè¡Œ
            document.addEventListener('DOMContentLoaded', function () {
                demonstrateCountAndSay();
            });
        </script>
    </body>

</html>