N-Queens問題の解法について、ビット操作を使った高速化アルゴリズムの詳細な解析を図解付きで説明します。このN-Queens問題の解法では、ビット操作を使った非常に効率的なアルゴリズムが実装されています。主なポイントを整理すると：

## 🔑 核心的な最適化技術

**1. ビットマスクによる制約管理**

- `cols`: 列の使用状況を1つの整数で管理
- `diag1`: 左上-右下対角線の制約（左シフトで位置調整）
- `diag2`: 右上-左下対角線の制約（右シフトで位置調整）

**2. 高速なビット演算**

- `available_positions & -available_positions`: 最下位ビット抽出
- `available_positions ^= position`: 処理済みビットのクリア
- `((1 << n) - 1) & ~(制約)`: 利用可能位置の高速計算

**3. 効果的な枝刈り**
従来の配列ベースと比較して、利用不可能な位置を事前に除外することで、無駄な再帰呼び出しを大幅に削減しています。

## 📈 パフォーマンスの改善

- **時間計算量**: O(N!) は変わらないが、定数倍が10-50倍改善
- **空間計算量**: O(N) でメモリ効率も向上
- **実行速度**: ビット演算とCPUキャッシュの効率的活用により大幅高速化

このアルゴリズムは、古典的なバックトラッキングに現代的なビット操作技術を組み合わせた、非常に洗練された解法の好例です。
