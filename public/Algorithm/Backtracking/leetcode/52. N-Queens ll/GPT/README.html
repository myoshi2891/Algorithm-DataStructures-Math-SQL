<!doctype html>
<html lang="ja">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>N-Queenså•é¡Œï¼šãƒ“ãƒƒãƒˆãƒã‚¹ã‚¯ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ è§£æ</title>
        <link
            href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css"
            rel="stylesheet"
        />
        <link
            href="/vendor/prismjs/plugins/line-numbers/prism-line-numbers.css"
            rel="stylesheet"
        />
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                min-height: 100vh;
                color: #333;
            }

            .container {
                max-width: 1200px;
                margin: 0 auto;
                padding: 20px;
            }

            .header {
                text-align: center;
                margin-bottom: 40px;
                background: rgba(255, 255, 255, 0.95);
                padding: 30px;
                border-radius: 15px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            }

            .header h1 {
                color: #2c3e50;
                font-size: 2.5rem;
                margin-bottom: 10px;
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            }

            .header p {
                color: #7f8c8d;
                font-size: 1.2rem;
            }

            .section {
                background: rgba(255, 255, 255, 0.95);
                margin-bottom: 30px;
                border-radius: 15px;
                padding: 25px;
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
                transition: transform 0.3s ease;
            }

            .section:hover {
                transform: translateY(-5px);
            }

            .section h2 {
                color: #2c3e50;
                font-size: 1.8rem;
                margin-bottom: 20px;
                border-bottom: 3px solid #3498db;
                padding-bottom: 10px;
            }

            .code-container {
                position: relative;
                margin: 20px 0;
            }

            pre[class*='language-'] {
                font-family: 'Fira Code', 'Monaco', 'Consolas', monospace;
                font-size: 14px;
                border-radius: 10px;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
                transition: box-shadow 0.3s ease;
            }

            pre[class*='language-']:hover {
                box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            }

            .algorithm-steps {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 20px;
                margin-top: 20px;
            }

            .step {
                background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
                color: white;
                padding: 20px;
                border-radius: 10px;
                text-align: center;
                transition: transform 0.3s ease;
            }

            .step:hover {
                transform: scale(1.05);
            }

            .step h3 {
                margin-bottom: 10px;
                font-size: 1.3rem;
            }

            .visualization {
                display: flex;
                flex-wrap: wrap;
                gap: 20px;
                justify-content: center;
                margin: 20px 0;
            }

            .chessboard {
                display: grid;
                grid-template-columns: repeat(4, 50px);
                grid-template-rows: repeat(4, 50px);
                gap: 2px;
                background: #34495e;
                padding: 10px;
                border-radius: 10px;
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            }

            .cell {
                width: 50px;
                height: 50px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 30px;
                font-weight: bold;
                transition: all 0.3s ease;
            }

            .cell.white {
                background: #ecf0f1;
                color: #2c3e50;
            }

            .cell.black {
                background: #34495e;
                color: #ecf0f1;
            }

            .cell.queen {
                background: #e74c3c !important;
                color: white;
                animation: pulse 2s infinite;
            }

            @keyframes pulse {
                0% {
                    transform: scale(1);
                }

                50% {
                    transform: scale(1.1);
                }

                100% {
                    transform: scale(1);
                }
            }

            .complexity-table {
                width: 100%;
                border-collapse: collapse;
                margin-top: 20px;
            }

            .complexity-table th,
            .complexity-table td {
                border: 2px solid #3498db;
                padding: 12px;
                text-align: center;
            }

            .complexity-table th {
                background: linear-gradient(135deg, #3498db, #2980b9);
                color: white;
                font-weight: bold;
            }

            .complexity-table td {
                background: #ecf0f1;
            }

            .bitmask-demo {
                background: #2c3e50;
                color: #ecf0f1;
                padding: 20px;
                border-radius: 10px;
                font-family: 'Fira Code', monospace;
                margin: 20px 0;
            }

            .bit-representation {
                display: flex;
                align-items: center;
                margin: 10px 0;
            }

            .bit-box {
                width: 30px;
                height: 30px;
                border: 2px solid #3498db;
                display: flex;
                align-items: center;
                justify-content: center;
                margin: 0 2px;
                background: #34495e;
                color: #ecf0f1;
                font-weight: bold;
                transition: all 0.3s ease;
            }

            .bit-box.set {
                background: #e74c3c;
                color: white;
            }

            .bit-box:hover {
                transform: scale(1.1);
            }

            .interactive-demo {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 20px;
                border-radius: 10px;
                text-align: center;
            }

            .demo-button {
                background: #3498db;
                color: white;
                border: none;
                padding: 12px 24px;
                border-radius: 25px;
                cursor: pointer;
                font-size: 16px;
                margin: 10px;
                transition: all 0.3s ease;
            }

            .demo-button:hover {
                background: #2980b9;
                transform: translateY(-2px);
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            }
        </style>
    </head>

    <body>
        <div class="container">
            <div class="header">
                <h1>ğŸ” N-Queenså•é¡Œï¼šãƒ“ãƒƒãƒˆãƒã‚¹ã‚¯ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ è§£æ</h1>
                <p>ãƒãƒƒã‚¯ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚° + ãƒ“ãƒƒãƒˆæ¼”ç®—ã«ã‚ˆã‚‹é«˜é€ŸåŒ–æ‰‹æ³•ã®è©³ç´°è§£èª¬</p>
            </div>

            <div class="section">
                <h2>ğŸ“‹ å•é¡Œæ¦‚è¦</h2>
                <p>
                    <strong>N-Queenså•é¡Œ</strong
                    >ã¯ã€nÃ—nã®ãƒã‚§ã‚¹ç›¤ã«nå€‹ã®ã‚¯ã‚¤ãƒ¼ãƒ³ã‚’é…ç½®ã—ã€ã©ã®ã‚¯ã‚¤ãƒ¼ãƒ³ã‚‚äº’ã„ã«æ”»æ’ƒã—åˆã‚ãªã„ã‚ˆã†ãªé…ç½®ã®æ•°ã‚’æ±‚ã‚ã‚‹å¤å…¸çš„ãªå•é¡Œã§ã™ã€‚
                </p>

                <div class="visualization">
                    <div>
                        <h3>4Ã—4ç›¤é¢ã§ã®è§£1</h3>
                        <div class="chessboard" id="solution1"></div>
                    </div>
                    <div>
                        <h3>4Ã—4ç›¤é¢ã§ã®è§£2</h3>
                        <div class="chessboard" id="solution2"></div>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>ğŸ’» TypeScriptã‚³ãƒ¼ãƒ‰å®Ÿè£…</h2>
                <div class="code-container">
                    <pre class="line-numbers"><code class="language-typescript">/**
 * n-queens puzzle ã®è§£ã®ç·æ•°ã‚’è¿”ã™é–¢æ•°
 * @param n - ãƒã‚§ã‚¹ç›¤ã®ã‚µã‚¤ã‚º (1 <= n <= 9)
 * @returns number - n-queens ã®ç•°ãªã‚‹è§£ã®æ•°
 */
function totalNQueensGPT(n: number): number {
    let count = 0;

    /**
     * æ·±ã•å„ªå…ˆæ¢ç´¢ (ãƒãƒƒã‚¯ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°)
     * @param row - ç¾åœ¨ã®è¡Œ
     * @param cols - æ—¢ã«ä½¿ç”¨ä¸­ã®åˆ— (bitmask)
     * @param diag1 - æ—¢ã«ä½¿ç”¨ä¸­ã®å¯¾è§’ç·š (â†˜æ–¹å‘, bitmask)
     * @param diag2 - æ—¢ã«ä½¿ç”¨ä¸­ã®å¯¾è§’ç·š (â†™æ–¹å‘, bitmask)
     * @returns void
     */
    function dfs(row: number, cols: number, diag1: number, diag2: number): void {
        if (row === n) {
            count++;
            return;
        }

        // ç½®ã‘ã‚‹å ´æ‰€ (n ãƒ“ãƒƒãƒˆåˆ†ã ã‘æ®‹ã™)
        let available = ((1 << n) - 1) & ~(cols | diag1 | diag2);

        while (available) {
            // æœ€å³ãƒ“ãƒƒãƒˆã‚’æŠ½å‡º
            const bit = available & -available;
            available -= bit;
            dfs(row + 1, cols | bit, (diag1 | bit) << 1, (diag2 | bit) >> 1);
        }
    }

    dfs(0, 0, 0, 0);
    return count;
}</code></pre>
                </div>
            </div>

            <div class="section">
                <h2>ğŸ§  ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®å‡¦ç†ã‚¹ãƒ†ãƒƒãƒ—</h2>
                <div class="algorithm-steps">
                    <div class="step">
                        <h3>ã‚¹ãƒ†ãƒƒãƒ—1: åˆæœŸåŒ–</h3>
                        <p>è§£ã®æ•°ã‚’ã‚«ã‚¦ãƒ³ãƒˆã™ã‚‹å¤‰æ•°countã‚’0ã§åˆæœŸåŒ–ã—ã€DFSé–¢æ•°ã‚’å®šç¾©</p>
                    </div>
                    <div class="step">
                        <h3>ã‚¹ãƒ†ãƒƒãƒ—2: ãƒ™ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹</h3>
                        <p>å…¨ã¦ã®è¡Œã«ã‚¯ã‚¤ãƒ¼ãƒ³ã‚’é…ç½®å®Œäº†ã—ãŸã‚‰ã€è§£ã®æ•°ã‚’1å¢—åŠ </p>
                    </div>
                    <div class="step">
                        <h3>ã‚¹ãƒ†ãƒƒãƒ—3: é…ç½®å¯èƒ½ä½ç½®è¨ˆç®—</h3>
                        <p>ãƒ“ãƒƒãƒˆæ¼”ç®—ã§ç¾åœ¨ã®è¡Œã§ã®é…ç½®å¯èƒ½ãªåˆ—ã‚’é«˜é€Ÿè¨ˆç®—</p>
                    </div>
                    <div class="step">
                        <h3>ã‚¹ãƒ†ãƒƒãƒ—4: å†å¸°æ¢ç´¢</h3>
                        <p>å„é…ç½®å¯èƒ½ä½ç½®ã«å¯¾ã—ã¦å†å¸°çš„ã«DFSã‚’å®Ÿè¡Œ</p>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>ğŸ”§ ãƒ“ãƒƒãƒˆãƒã‚¹ã‚¯ã®å‹•ä½œåŸç†</h2>
                <div class="bitmask-demo">
                    <h3>n=4ã®å ´åˆã®ãƒ“ãƒƒãƒˆè¡¨ç¾ä¾‹ï¼š</h3>
                    <div class="bit-representation">
                        <span style="margin-right: 15px">cols (åˆ—åˆ¶ç´„):</span>
                        <div class="bit-box">0</div>
                        <div class="bit-box set">1</div>
                        <div class="bit-box">0</div>
                        <div class="bit-box set">1</div>
                        <span style="margin-left: 15px">â†’ åˆ—1ã¨3ãŒä½¿ç”¨ä¸­</span>
                    </div>
                    <div class="bit-representation">
                        <span style="margin-right: 15px">diag1 (â†˜å¯¾è§’ç·š):</span>
                        <div class="bit-box set">1</div>
                        <div class="bit-box">0</div>
                        <div class="bit-box set">1</div>
                        <div class="bit-box">0</div>
                        <span style="margin-left: 15px">â†’ å¯¾è§’ç·šåˆ¶ç´„</span>
                    </div>
                    <div class="bit-representation">
                        <span style="margin-right: 15px">diag2 (â†™å¯¾è§’ç·š):</span>
                        <div class="bit-box">0</div>
                        <div class="bit-box set">1</div>
                        <div class="bit-box">0</div>
                        <div class="bit-box set">1</div>
                        <span style="margin-left: 15px">â†’ å¯¾è§’ç·šåˆ¶ç´„</span>
                    </div>
                    <div class="bit-representation">
                        <span style="margin-right: 15px">available:</span>
                        <div class="bit-box">0</div>
                        <div class="bit-box">0</div>
                        <div class="bit-box">0</div>
                        <div class="bit-box">0</div>
                        <span style="margin-left: 15px">â†’ é…ç½®å¯èƒ½ä½ç½®ãªã—</span>
                    </div>
                </div>

                <h3>é‡è¦ãªãƒ“ãƒƒãƒˆæ¼”ç®—ï¼š</h3>
                <ul style="margin-top: 15px; line-height: 1.8">
                    <li><code>((1 << n) - 1)</code>: nå€‹ã®1ã‹ã‚‰ãªã‚‹ãƒ“ãƒƒãƒˆãƒã‚¹ã‚¯ç”Ÿæˆ</li>
                    <li><code>available & -available</code>: æœ€å³ã®1ãƒ“ãƒƒãƒˆã‚’æŠ½å‡º</li>
                    <li><code>(diag1 | bit) << 1</code>: æ¬¡è¡Œã§ã®â†˜å¯¾è§’ç·šåˆ¶ç´„æ›´æ–°</li>
                    <li><code>(diag2 | bit) >> 1</code>: æ¬¡è¡Œã§ã®â†™å¯¾è§’ç·šåˆ¶ç´„æ›´æ–°</li>
                </ul>
            </div>

            <div class="section">
                <h2>â±ï¸ è¨ˆç®—é‡è§£æ</h2>
                <table class="complexity-table">
                    <thead>
                        <tr>
                            <th>é …ç›®</th>
                            <th>å¾“æ¥æ‰‹æ³•</th>
                            <th>ãƒ“ãƒƒãƒˆãƒã‚¹ã‚¯æ‰‹æ³•</th>
                            <th>æ”¹å–„åŠ¹æœ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>è¡çªåˆ¤å®š</td>
                            <td>O(n)</td>
                            <td>O(1)</td>
                            <td>å¤§å¹…æ”¹å–„</td>
                        </tr>
                        <tr>
                            <td>æ™‚é–“è¨ˆç®—é‡</td>
                            <td>O(n! Ã— n)</td>
                            <td>O(n!)</td>
                            <td>nå€é«˜é€ŸåŒ–</td>
                        </tr>
                        <tr>
                            <td>ç©ºé–“è¨ˆç®—é‡</td>
                            <td>O(nÂ²)</td>
                            <td>O(n)</td>
                            <td>ãƒ¡ãƒ¢ãƒªåŠ¹ç‡åŒ–</td>
                        </tr>
                        <tr>
                            <td>n=8ã§ã®å®Ÿè¡Œé€Ÿåº¦</td>
                            <td>é…ã„</td>
                            <td>é«˜é€Ÿ</td>
                            <td>å®Ÿç”¨çš„</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="section">
                <h2>ğŸ¯ ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®ç‰¹å¾´</h2>
                <div
                    style="
                        display: grid;
                        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                        gap: 20px;
                    "
                >
                    <div
                        style="
                            background: #3498db;
                            color: white;
                            padding: 20px;
                            border-radius: 10px;
                        "
                    >
                        <h3>âœ… åˆ©ç‚¹</h3>
                        <ul style="margin-top: 10px; line-height: 1.6">
                            <li>O(1)ã§ã®è¡çªåˆ¤å®š</li>
                            <li>ãƒ¡ãƒ¢ãƒªåŠ¹ç‡ãŒè‰¯ã„</li>
                            <li>ã‚³ãƒ¼ãƒ‰ãŒç°¡æ½”</li>
                            <li>é«˜é€Ÿãªå®Ÿè¡Œé€Ÿåº¦</li>
                        </ul>
                    </div>
                    <div
                        style="
                            background: #e74c3c;
                            color: white;
                            padding: 20px;
                            border-radius: 10px;
                        "
                    >
                        <h3>âš ï¸ æ³¨æ„ç‚¹</h3>
                        <ul style="margin-top: 10px; line-height: 1.6">
                            <li>ãƒ“ãƒƒãƒˆæ¼”ç®—ã®ç†è§£ãŒå¿…è¦</li>
                            <li>ãƒ‡ãƒãƒƒã‚°ãŒå›°é›£</li>
                            <li>nã®ä¸Šé™ï¼ˆé€šå¸¸32ãƒ“ãƒƒãƒˆï¼‰</li>
                            <li>å¯èª­æ€§ãŒã‚„ã‚„åŠ£ã‚‹</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="section">
                <div class="interactive-demo">
                    <h2>ğŸ® ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ‡ãƒ¢</h2>
                    <p>ç•°ãªã‚‹nã®å€¤ã§ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ å®Ÿè¡Œçµæœï¼š</p>
                    <button class="demo-button" onclick="runDemo(1)">n=1</button>
                    <button class="demo-button" onclick="runDemo(4)">n=4</button>
                    <button class="demo-button" onclick="runDemo(8)">n=8</button>
                    <div
                        id="demo-result"
                        style="margin-top: 20px; font-size: 18px; font-weight: bold"
                    ></div>
                </div>
            </div>
        </div>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>

        <script>
            // N-Queens solver implementation
            function totalNQueensGPT(n) {
                let count = 0;

                function dfs(row, cols, diag1, diag2) {
                    if (row === n) {
                        count++;
                        return;
                    }

                    let available = ((1 << n) - 1) & ~(cols | diag1 | diag2);

                    while (available) {
                        const bit = available & -available;
                        available -= bit;
                        dfs(row + 1, cols | bit, (diag1 | bit) << 1, (diag2 | bit) >> 1);
                    }
                }

                dfs(0, 0, 0, 0);
                return count;
            }

            // Initialize chessboards with solutions
            function initializeChessboards() {
                // Solution 1: Queens at (0,1), (1,3), (2,0), (3,2)
                const solution1 = [
                    [0, 1, 0, 0],
                    [0, 0, 0, 1],
                    [1, 0, 0, 0],
                    [0, 0, 1, 0],
                ];

                // Solution 2: Queens at (0,2), (1,0), (2,3), (3,1)
                const solution2 = [
                    [0, 0, 1, 0],
                    [1, 0, 0, 0],
                    [0, 0, 0, 1],
                    [0, 1, 0, 0],
                ];

                renderChessboard('solution1', solution1);
                renderChessboard('solution2', solution2);
            }

            function renderChessboard(elementId, solution) {
                const board = document.getElementById(elementId);
                board.innerHTML = '';

                for (let i = 0; i < 4; i++) {
                    for (let j = 0; j < 4; j++) {
                        const cell = document.createElement('div');
                        cell.className = `cell ${(i + j) % 2 === 0 ? 'white' : 'black'}`;

                        if (solution[i][j] === 1) {
                            cell.textContent = 'â™›';
                            cell.className += ' queen';
                        }

                        board.appendChild(cell);
                    }
                }
            }

            function runDemo(n) {
                const startTime = performance.now();
                const result = totalNQueensGPT(n);
                const endTime = performance.now();
                const executionTime = (endTime - startTime).toFixed(2);

                document.getElementById('demo-result').innerHTML =
                    `n=${n} ã®å ´åˆ: <strong>${result}</strong> é€šã‚Šã®è§£ (å®Ÿè¡Œæ™‚é–“: ${executionTime}ms)`;
            }

            // Initialize on page load
            document.addEventListener('DOMContentLoaded', function () {
                initializeChessboards();
            });
        </script>
    </body>
</html>
