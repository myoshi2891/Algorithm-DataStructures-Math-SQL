# Search in Rotated Sorted Array II - ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ è§£æ

## ğŸ“‹ å•é¡Œæ¦‚è¦

å›è»¢ã•ã‚ŒãŸã‚½ãƒ¼ãƒˆæ¸ˆã¿é…åˆ—ï¼ˆé‡è¤‡è¦ç´ ã‚ã‚Šï¼‰ã‹ã‚‰ã€æŒ‡å®šã•ã‚ŒãŸã‚¿ãƒ¼ã‚²ãƒƒãƒˆå€¤ã‚’åŠ¹ç‡çš„ã«æ¤œç´¢ã™ã‚‹å•é¡Œã§ã™ã€‚

### å…¥åŠ›ä¾‹

- `nums = [2,5,6,0,0,1,2]`, `target = 0` â†’ `true`
- `nums = [2,5,6,0,0,1,2]`, `target = 3` â†’ `false`

### åˆ¶ç´„

- `1 <= nums.length <= 5000`
- `-10^4 <= nums[i] <= 10^4`
- é…åˆ—ã¯å¿…ãšå›è»¢ã•ã‚Œã¦ã„ã‚‹
- é‡è¤‡è¦ç´ ãŒå­˜åœ¨ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹

## ğŸ¯ è§£æ³•ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

ã“ã®å•é¡Œã¯ **ä¿®æ­£ç‰ˆãƒã‚¤ãƒŠãƒªã‚µãƒ¼ãƒ** ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚é€šå¸¸ã®ãƒã‚¤ãƒŠãƒªã‚µãƒ¼ãƒã‚’å›è»¢é…åˆ—ã«å¯¾å¿œã•ã›ã€ã•ã‚‰ã«é‡è¤‡è¦ç´ ã®å‡¦ç†ã‚’è¿½åŠ ã—ãŸã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§ã™ã€‚

## ğŸ”§ ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®è©³ç´°

### 1. åŸºæœ¬æˆ¦ç•¥

```mermaid
flowchart TD
    A[Start: left=0, right=n-1] --> B[Calculate mid]
    B --> C{Target found?}
    C -->|Yes| D[Return True]
    C -->|No| E[Handle Duplicates]
    E --> F{Which half is sorted?}
    F -->|Left Half| G[Check if target in left range]
    F -->|Right Half| H[Check if target in right range]
    G --> I[Update search range]
    H --> I
    I --> J{Continue search?}
    J -->|Yes| B
    J -->|No| K[Return False]
```

### 2. é‡è¤‡è¦ç´ ã®å‡¦ç†

é‡è¤‡è¦ç´ ãŒå­˜åœ¨ã™ã‚‹å ´åˆã€ã©ã¡ã‚‰ã®åŠåˆ†ãŒã‚½ãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ã‹ã‚’åˆ¤æ–­ã§ããªã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚

#### é‡è¤‡ã‚¹ã‚­ãƒƒãƒ—ã®æ¡ä»¶

```text
nums[left] == nums[mid] == nums[right]
```

ã“ã®å ´åˆã€ä¸¡ç«¯ã‚’ 1 ã¤ãšã¤ç¸®ã‚ã¦é‡è¤‡ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¾ã™ã€‚

```mermaid
graph LR
    A[2,5,6,0,0,1,2] --> B[Skip duplicates]
    B --> C[Identify sorted half]
    C --> D[Binary search in correct range]
```

### 3. ã‚½ãƒ¼ãƒˆæ¸ˆã¿åŠåˆ†ã®åˆ¤å®š

#### ã‚±ãƒ¼ã‚¹ 1: å·¦åŠåˆ†ãŒã‚½ãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹

```text
nums[left] <= nums[mid]
```

#### ã‚±ãƒ¼ã‚¹ 2: å³åŠåˆ†ãŒã‚½ãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹

```text
nums[left] > nums[mid]
```

## ğŸ“Š å®Ÿè¡Œä¾‹ã®è©³ç´°è§£æ

### Example 1: `nums = [2,5,6,0,0,1,2]`, `target = 0`

| Step | left | right | mid | nums[mid] | Action        |
| ---- | ---- | ----- | --- | --------- | ------------- |
| 1    | 0    | 6     | 3   | 0         | Found target! |

### Example 2: `nums = [2,5,6,0,0,1,2]`, `target = 3`

| Step | left | right | mid | nums[mid] | Sorted Half        | Target Range   | New Range |
| ---- | ---- | ----- | --- | --------- | ------------------ | -------------- | --------- |
| 1    | 0    | 6     | 3   | 0         | Right (0 < 1 <= 2) | 3 not in [0,2] | left = 4  |
| 2    | 4    | 6     | 5   | 1         | Right (1 <= 2)     | 3 not in [1,2] | right = 4 |
| 3    | 4    | 4     | 4   | 0         | -                  | 0 â‰  3          | left = 5  |
| 4    | 5    | 4     | -   | -         | left > right       | Return False   | ã€€ N/A    |

## ğŸ¨ è¦–è¦šçš„ãªé…åˆ—ã®å¤‰åŒ–

### å›è»¢å‰ã®é…åˆ—

```text
[0, 1, 2, 2, 5, 6, 0]  (ã‚½ãƒ¼ãƒˆæ¸ˆã¿)
```

### å›è»¢å¾Œã®é…åˆ—ï¼ˆpivot = 4ï¼‰

```text
[2, 5, 6, 0, 0, 1, 2]
 ^        ^           ^
left     mid        right
```

### ã‚½ãƒ¼ãƒˆæ¸ˆã¿éƒ¨åˆ†ã®ç‰¹å®š

```mermaid
graph TD
    A["Array: 2,5,6,0,0,1,2"] --> B{Left half sorted?}
    B -->|"No: 2 > 0"| C[Right half is sorted]
    B -->|"Yes"| D[Left half is sorted]

    C --> E["Check target in right range<br/>Search left if not found"]
    D --> F["Check target in left range<br/>Search right if not found"]
```

## âš¡ è¨ˆç®—é‡è§£æ

### æ™‚é–“è¨ˆç®—é‡

- **å¹³å‡ã‚±ãƒ¼ã‚¹**: `O(log n)`
  - é€šå¸¸ã®ãƒã‚¤ãƒŠãƒªã‚µãƒ¼ãƒã¨åŒæ§˜
- **æœ€æ‚ªã‚±ãƒ¼ã‚¹**: `O(n)`
  - å…¨è¦ç´ ãŒåŒã˜å€¤ã®å ´åˆï¼ˆä¾‹: `[1,1,1,1,1]`ï¼‰
  - é‡è¤‡ã‚¹ã‚­ãƒƒãƒ—ã§ç·šå½¢æ™‚é–“ãŒå¿…è¦

### ç©ºé–“è¨ˆç®—é‡

- **`O(1)`**: å®šæ•°ã®è¿½åŠ ãƒ¡ãƒ¢ãƒªã®ã¿ä½¿ç”¨

## ğŸ Python å®Ÿè£…ã®ãƒã‚¤ãƒ³ãƒˆ

### 1. å‹ãƒ’ãƒ³ãƒˆæ´»ç”¨

```python
def search(self, nums: List[int], target: int) -> bool:
```

### 2. åŠ¹ç‡çš„ãªé‡è¤‡ã‚¹ã‚­ãƒƒãƒ—

```python
while left < mid and nums[left] == nums[mid] and nums[right] == nums[mid]:
    left += 1
    right -= 1
```

### 3. æ•´æ•°é™¤ç®—ã®æœ€é©åŒ–

```python
mid: int = (left + right) // 2  # Cå®Ÿè£…ã§é«˜é€Ÿ
```

## ğŸš€ æœ€é©åŒ–ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯

### 1. æ—©æœŸçµ‚äº†

- `nums[mid] == target`ã§å³åº§ã« return

### 2. é‡è¤‡è¦ç´ ã®åŠ¹ç‡çš„å‡¦ç†

- ä¸¡ç«¯ã‹ã‚‰åŒæ™‚ã«ã‚¹ã‚­ãƒƒãƒ—
- ä¸è¦ãªæ¯”è¼ƒã‚’å‰Šæ¸›

### 3. åˆ†å²ã®æœ€å°åŒ–

- æ¡ä»¶æ–‡ã‚’ç°¡æ½”ã«ä¿ã¤
- CPU ã®ãƒ–ãƒ©ãƒ³ãƒäºˆæ¸¬ã‚’æ´»ç”¨

## ğŸ” ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹

### 1. å…¨è¦ç´ ãŒåŒã˜

```text
nums = [1,1,1,1,1], target = 1  â†’ True (O(n))
nums = [1,1,1,1,1], target = 2  â†’ False (O(n))
```

### 2. é‡è¤‡ãŒå¤šã„é…åˆ—

```text
nums = [1,1,3,1,1], target = 3  â†’ True
```

### 3. å›è»¢ãªã—ï¼ˆå®Ÿè³ªã‚½ãƒ¼ãƒˆæ¸ˆã¿ï¼‰

```text
nums = [1,2,3,4,5], target = 3  â†’ True (O(log n))
```

## ğŸ“ˆ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¯”è¼ƒ

| ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ             | æ™‚é–“è¨ˆç®—é‡     | ç©ºé–“è¨ˆç®—é‡ | å®Ÿè£…è¤‡é›‘åº¦ |
| ---------------------- | -------------- | ---------- | ---------- |
| ç·šå½¢æ¢ç´¢               | O(n)           | O(1)       | ç°¡å˜       |
| ä¿®æ­£ãƒã‚¤ãƒŠãƒªã‚µãƒ¼ãƒ     | O(log n)ã€œO(n) | O(1)       | ä¸­ç¨‹åº¦     |
| ã‚½ãƒ¼ãƒˆå¾Œãƒã‚¤ãƒŠãƒªã‚µãƒ¼ãƒ | O(n log n)     | O(n)       | ç°¡å˜       |

## ğŸ¯ ã¾ã¨ã‚

ã“ã®ä¿®æ­£ç‰ˆãƒã‚¤ãƒŠãƒªã‚µãƒ¼ãƒã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯ï¼š

âœ… **åŠ¹ç‡çš„**: å¹³å‡çš„ã« O(log n)ã§å‹•ä½œ
âœ… **çœãƒ¡ãƒ¢ãƒª**: O(1)ã®ç©ºé–“è¨ˆç®—é‡
âœ… **å®Ÿç”¨çš„**: é‡è¤‡è¦ç´ ã«å¯¾å¿œ
â— **æ³¨æ„ç‚¹**: æœ€æ‚ªã‚±ãƒ¼ã‚¹ã§ O(n)ã«ãªã‚‹å¯èƒ½æ€§

é‡è¤‡è¦ç´ ã‚’å«ã‚€å›è»¢ã‚½ãƒ¼ãƒˆé…åˆ—ã®æ¤œç´¢ã«ãŠã„ã¦ã€å®Ÿç”¨çš„ã§åŠ¹ç‡çš„ãªã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚

## ğŸ”§ README.html ã®ä¿®æ­£å†…å®¹

### 1. **Copy ãƒœã‚¿ãƒ³ã®ã‚¨ãƒ©ãƒ¼ä¿®æ­£**

- `event.target`ã®å‚ç…§ã‚¨ãƒ©ãƒ¼ã‚’ä¿®æ­£
- `copyCode`é–¢æ•°ã«`btnElement`ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¿½åŠ 
- ãƒœã‚¿ãƒ³ã® onclick ã§`this`ã‚’æ¸¡ã™ã‚ˆã†ã«å¤‰æ›´

### 2. **ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–å¯è¦–åŒ–ã®å¤§å¹…æ”¹å–„**

#### ğŸ¯ æ–°ã—ã„é…åˆ—ä¾‹

- **å¤‰æ›´å‰**: `[2,5,6,0,0,1,2]` â†’ 1 ã‚¹ãƒ†ãƒƒãƒ—ã§è§£æ±º
- **å¤‰æ›´å¾Œ**: `[4,5,6,7,0,1,2]` â†’ 7 ã‚¹ãƒ†ãƒƒãƒ—ã®è©³ç´°ãƒ—ãƒ­ã‚»ã‚¹

#### ğŸ“Š ã‚¹ãƒ†ãƒƒãƒ—ãƒã‚¤ã‚¹ãƒ†ãƒƒãƒ—ã®è©³ç´°ãƒ—ãƒ­ã‚»ã‚¹

| ã‚¹ãƒ†ãƒƒãƒ— | å‡¦ç†å†…å®¹     | left | mid | right | èª¬æ˜                                 |
| -------- | ------------ | ---- | --- | ----- | ------------------------------------ |
| 1        | åˆæœŸåŒ–       | 0    | 3   | 6     | nums[3]=7, target=0 ã§ä¸ä¸€è‡´         |
| 2        | é‡è¤‡ãƒã‚§ãƒƒã‚¯ | 0    | 3   | 6     | é‡è¤‡ãªã—ã‚’ç¢ºèª                       |
| 3        | ç¯„å›²åˆ¤å®š     | 0    | 3   | 6     | å·¦åŠåˆ†ã‚½ãƒ¼ãƒˆæ¸ˆã¿ã€ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã¯å³åŠåˆ† |
| 4        | ç¯„å›²æ›´æ–°     | 4    | 5   | 6     | æ–°ã—ã„æ¤œç´¢ç¯„å›²                       |
| 5        | é‡è¤‡ãƒã‚§ãƒƒã‚¯ | 4    | 5   | 6     | é‡è¤‡ãªã—ã‚’ç¢ºèª                       |
| 6        | ç¯„å›²åˆ¤å®š     | 4    | 5   | 6     | ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã¯å·¦åŠåˆ†                   |
| 7        | ç™ºè¦‹         | 4    | 4   | 4     | nums[4]=0 ã§ã‚¿ãƒ¼ã‚²ãƒƒãƒˆç™ºè¦‹ï¼         |

#### ğŸ¨ æ–°æ©Ÿèƒ½è¿½åŠ 

- **è©³ç´°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º**: å„ã‚¹ãƒ†ãƒƒãƒ—ã®å‡¦ç†å†…å®¹ã‚’èª¬æ˜
- **ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼**: æ¤œç´¢é€²è¡ŒçŠ¶æ³ã®å¯è¦–åŒ–
- **ãƒœã‚¿ãƒ³åˆ¶å¾¡**: é©åˆ‡ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ãƒœã‚¿ãƒ³ã®æœ‰åŠ¹/ç„¡åŠ¹åŒ–
- **ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŠ¹æœ**: ç™ºè¦‹æ™‚ã®ãƒ‘ãƒ«ã‚¹ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ

ã“ã‚Œã§å®Ÿéš›ã®ãƒã‚¤ãƒŠãƒªã‚µãƒ¼ãƒã®å‹•ä½œã‚’æ®µéšçš„ã«ç†è§£ã§ãã‚‹ã€æ•™è‚²çš„ã§åˆ†ã‹ã‚Šã‚„ã™ã„å¯è¦–åŒ–ã«ãªã‚Šã¾ã—ãŸï¼

## ğŸ”§ ä¿®æ­£å†…å®¹

ã‚³ãƒ¼ãƒ‰ã«è¡Œç•ªå·ãŒè¡¨ç¤ºã•ã‚Œãªã„å•é¡Œã‚’ä¿®æ­£ã—ã¾ã™ã€‚
Prism.js ã®è¡Œç•ªå·ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒæ­£ã—ãå‹•ä½œã™ã‚‹ãŸã‚ã«ã¯ã€CSS ã¨é©åˆ‡ãªã‚¯ãƒ©ã‚¹è¨­å®šãŒå¿…è¦ã§ã™ã€‚

### 1. **Prism.js Line Numbers CSS ã®è¿½åŠ **

- `prism-line-numbers.min.css` ã‚’ CDN ã‹ã‚‰èª­ã¿è¾¼ã¿
- è¡Œç•ªå·è¡¨ç¤ºã«å¿…è¦ãª CSS ã‚¹ã‚¿ã‚¤ãƒ«ã‚’è¿½åŠ 

### 2. **HTML æ§‹é€ ã®ä¿®æ­£**

- `<pre>` è¦ç´ ã« `line-numbers` ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ 
- `<code>` è¦ç´ ã‹ã‚‰ `line-numbers` ã‚¯ãƒ©ã‚¹ã‚’å‰Šé™¤ï¼ˆæ­£ã—ã„é…ç½®ã«ä¿®æ­£ï¼‰

### 3. **ã‚«ã‚¹ã‚¿ãƒ ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°**

- è¡Œç•ªå·ã®è‰²ã¨ãƒ•ã‚©ãƒ³ãƒˆã‚’èª¿æ•´
- è¡Œç•ªå·ã®å³å´ã®å¢ƒç•Œç·šã‚¹ã‚¿ã‚¤ãƒ«ã‚’è¿½åŠ 

## âœ… ä¿®æ­£ã®ãƒã‚¤ãƒ³ãƒˆ

**å•é¡Œã®åŸå› :**

1. Line Numbers ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ç”¨ã® CSS ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ãªã‹ã£ãŸ
2. `line-numbers` ã‚¯ãƒ©ã‚¹ãŒ `<code>` ã§ã¯ãªã `<pre>` è¦ç´ ã«å¿…è¦
3. Prism.js ãŒé©åˆ‡ã«åˆæœŸåŒ–ã•ã‚Œã‚‹å‰ã« DOM ãŒå®Œäº†ã—ã¦ã„ãŸ

**ä¿®æ­£å¾Œã®å‹•ä½œ:**

- Python ã‚³ãƒ¼ãƒ‰ã«è¡Œç•ªå·ãŒå·¦å´ã«è¡¨ç¤ºã•ã‚Œã‚‹
- è¡Œç•ªå·ã¯è–„ã„ã‚°ãƒ¬ãƒ¼è‰²ã§è¦‹ã‚„ã™ãè¡¨ç¤º
- ãƒ¢ãƒã‚¹ãƒšãƒ¼ã‚¹ãƒ•ã‚©ãƒ³ãƒˆï¼ˆJetBrains Monoï¼‰ã§çµ±ä¸€ã•ã‚ŒãŸè¡¨ç¤º
