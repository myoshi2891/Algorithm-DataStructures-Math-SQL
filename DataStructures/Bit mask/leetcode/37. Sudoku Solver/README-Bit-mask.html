<!DOCTYPE html>
<html lang="ja">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ãƒ“ãƒƒãƒˆãƒã‚¹ã‚¯æ•°ç‹¬è§£æ³•ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ è©³ç´°è§£æ</title>
        <style>
            * {
                box-sizing: border-box;
                margin: 0;
                padding: 0;
            }

            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                color: #2c3e50;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                min-height: 100vh;
            }

            .container {
                max-width: 1400px;
                margin: 0 auto;
                padding: 20px;
                background: rgba(255, 255, 255, 0.98);
                margin-top: 20px;
                margin-bottom: 20px;
                border-radius: 20px;
                box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
                backdrop-filter: blur(20px);
            }

            h1 {
                text-align: center;
                color: #2c3e50;
                margin-bottom: 40px;
                font-size: 2.8em;
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
                background: linear-gradient(135deg, #667eea, #764ba2);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }

            h2 {
                color: white;
                margin: 40px 0 25px 0;
                padding: 20px;
                background: linear-gradient(135deg, #667eea, #764ba2);
                border-radius: 12px;
                box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
                font-size: 1.5em;
            }

            h3 {
                color: #2c3e50;
                margin: 25px 0 15px 0;
                border-left: 5px solid #e74c3c;
                padding-left: 20px;
                font-size: 1.3em;
            }

            .algorithm-overview {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 30px;
                margin: 30px 0;
            }

            .overview-card {
                background: white;
                border-radius: 15px;
                padding: 30px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
                border-top: 5px solid #3498db;
                transition: all 0.4s ease;
            }

            .overview-card:hover {
                transform: translateY(-10px);
                box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
            }

            .bitmask-demo {
                background: #2c3e50;
                color: #ecf0f1;
                padding: 25px;
                border-radius: 12px;
                margin: 20px 0;
                font-family: 'Consolas', 'Monaco', monospace;
                position: relative;
                overflow: hidden;
            }

            .bitmask-demo::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 3px;
                background: linear-gradient(90deg, #3498db, #2ecc71, #f39c12, #e74c3c);
            }

            .bit-visualization {
                display: flex;
                justify-content: center;
                align-items: center;
                margin: 20px 0;
                gap: 5px;
                flex-wrap: wrap;
            }

            .bit-box {
                width: 40px;
                height: 40px;
                display: flex;
                align-items: center;
                justify-content: center;
                border: 2px solid #34495e;
                border-radius: 8px;
                font-weight: bold;
                transition: all 0.3s ease;
                cursor: pointer;
            }

            .bit-box.set {
                background: #e74c3c;
                color: white;
                border-color: #c0392b;
                animation: pulse 1.5s infinite;
            }

            .bit-box.unset {
                background: #ecf0f1;
                color: #7f8c8d;
                border-color: #bdc3c7;
            }

            .bit-box.candidate {
                background: #2ecc71;
                color: white;
                border-color: #27ae60;
            }

            @keyframes pulse {
                0% {
                    transform: scale(1);
                }

                50% {
                    transform: scale(1.05);
                }

                100% {
                    transform: scale(1);
                }
            }

            .sudoku-board {
                display: grid;
                grid-template-columns: repeat(9, 45px);
                grid-template-rows: repeat(9, 45px);
                gap: 2px;
                margin: 25px auto;
                padding: 15px;
                background: #2c3e50;
                border-radius: 12px;
                width: fit-content;
                box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            }

            .cell {
                background: white;
                display: flex;
                align-items: center;
                justify-content: center;
                font-weight: bold;
                font-size: 18px;
                border-radius: 6px;
                transition: all 0.3s ease;
                cursor: pointer;
                position: relative;
            }

            .cell.empty {
                background: #ecf0f1;
                color: #95a5a6;
            }

            .cell.filled {
                background: #3498db;
                color: white;
            }

            .cell.highlight {
                background: #e74c3c;
                color: white;
                transform: scale(1.1);
                box-shadow: 0 8px 25px rgba(231, 76, 60, 0.5);
                z-index: 10;
            }

            .cell.minimum {
                background: #f39c12;
                color: white;
                animation: bounce 1s infinite;
            }

            .cell.candidate-count::after {
                content: attr(data-count);
                position: absolute;
                top: -5px;
                right: -5px;
                background: #e74c3c;
                color: white;
                font-size: 10px;
                width: 16px;
                height: 16px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            @keyframes bounce {

                0%,
                20%,
                50%,
                80%,
                100% {
                    transform: translateY(0) scale(1.1);
                }

                40% {
                    transform: translateY(-5px) scale(1.1);
                }

                60% {
                    transform: translateY(-3px) scale(1.1);
                }
            }

            .flowchart {
                display: flex;
                flex-direction: column;
                align-items: center;
                margin: 40px 0;
                gap: 20px;
            }

            .flow-step {
                display: flex;
                align-items: center;
                gap: 20px;
                width: 100%;
                max-width: 800px;
            }

            .flow-box {
                background: linear-gradient(135deg, #3498db, #2980b9);
                color: white;
                padding: 20px 30px;
                border-radius: 15px;
                text-align: center;
                box-shadow: 0 8px 25px rgba(52, 152, 219, 0.3);
                transition: all 0.3s ease;
                cursor: pointer;
                flex: 1;
                position: relative;
                overflow: hidden;
            }

            .flow-box::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
                transition: left 0.5s ease;
            }

            .flow-box:hover::before {
                left: 100%;
            }

            .flow-box:hover {
                transform: translateY(-5px);
                box-shadow: 0 15px 35px rgba(52, 152, 219, 0.4);
            }

            .flow-box.decision {
                background: linear-gradient(135deg, #e74c3c, #c0392b);
                clip-path: polygon(20% 0%, 80% 0%, 100% 50%, 80% 100%, 20% 100%, 0% 50%);
                padding: 25px 40px;
            }

            .flow-box.optimization {
                background: linear-gradient(135deg, #f39c12, #e67e22);
            }

            .flow-arrow {
                font-size: 35px;
                color: #2c3e50;
                animation: float 3s ease-in-out infinite;
            }

            @keyframes float {

                0%,
                100% {
                    transform: translateY(0px);
                }

                50% {
                    transform: translateY(-10px);
                }
            }

            .performance-comparison {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 30px;
                margin: 30px 0;
            }

            .perf-card {
                background: white;
                border-radius: 15px;
                padding: 30px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
                transition: all 0.3s ease;
            }

            .perf-card:hover {
                transform: translateY(-8px);
                box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
            }

            .perf-card.old {
                border-top: 5px solid #e74c3c;
            }

            .perf-card.new {
                border-top: 5px solid #27ae60;
            }

            .performance-meter {
                width: 100%;
                height: 25px;
                background: #ecf0f1;
                border-radius: 15px;
                overflow: hidden;
                margin: 15px 0;
                position: relative;
            }

            .performance-bar {
                height: 100%;
                border-radius: 15px;
                transition: width 3s ease;
                position: relative;
                overflow: hidden;
            }

            .performance-bar::after {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                bottom: 0;
                right: 0;
                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
                animation: shimmer 2s infinite;
            }

            @keyframes shimmer {
                0% {
                    transform: translateX(-100%);
                }

                100% {
                    transform: translateX(100%);
                }
            }

            .performance-bar.slow {
                background: linear-gradient(90deg, #e74c3c, #c0392b);
                width: 25%;
            }

            .performance-bar.fast {
                background: linear-gradient(90deg, #27ae60, #2ecc71);
                width: 95%;
            }

            .code-section {
                background: white;
                border-radius: 15px;
                padding: 30px;
                margin: 30px 0;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
                border-left: 5px solid #3498db;
            }

            .code-block {
                background: #2c3e50;
                color: #ecf0f1;
                padding: 25px;
                border-radius: 10px;
                font-family: 'Consolas', 'Monaco', monospace;
                margin: 20px 0;
                overflow-x: auto;
                box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.3);
                position: relative;
            }

            .code-block::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 3px;
                background: linear-gradient(90deg, #3498db, #2ecc71, #f39c12, #e74c3c);
            }

            .highlight-line {
                background: rgba(52, 152, 219, 0.2);
                margin: 0 -25px;
                padding: 0 25px;
                border-left: 4px solid #3498db;
            }

            .interactive-demo {
                background: white;
                border-radius: 20px;
                padding: 40px;
                margin: 40px 0;
                box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
                text-align: center;
                position: relative;
                overflow: hidden;
            }

            .interactive-demo::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 5px;
                background: linear-gradient(90deg, #667eea, #764ba2);
            }

            .demo-button {
                background: linear-gradient(135deg, #667eea, #764ba2);
                color: white;
                border: none;
                padding: 15px 30px;
                border-radius: 30px;
                font-size: 16px;
                cursor: pointer;
                margin: 10px;
                transition: all 0.3s ease;
                box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
                position: relative;
                overflow: hidden;
            }

            .demo-button::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
                transition: left 0.5s ease;
            }

            .demo-button:hover::before {
                left: 100%;
            }

            .demo-button:hover {
                transform: translateY(-3px);
                box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
            }

            .optimization-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
                gap: 25px;
                margin: 30px 0;
            }

            .optimization-card {
                background: white;
                border-radius: 15px;
                padding: 30px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
                border-top: 5px solid;
                transition: all 0.3s ease;
            }

            .optimization-card:nth-child(1) {
                border-top-color: #e74c3c;
            }

            .optimization-card:nth-child(2) {
                border-top-color: #3498db;
            }

            .optimization-card:nth-child(3) {
                border-top-color: #27ae60;
            }

            .optimization-card:nth-child(4) {
                border-top-color: #f39c12;
            }

            .optimization-card:hover {
                transform: translateY(-10px);
                box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
            }

            .stats-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 20px;
                margin: 30px 0;
            }

            .stat-box {
                background: white;
                border-radius: 12px;
                padding: 25px;
                text-align: center;
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
                transition: all 0.3s ease;
            }

            .stat-box:hover {
                transform: translateY(-5px);
                box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
            }

            .stat-value {
                font-size: 2.5em;
                font-weight: bold;
                margin: 10px 0;
            }

            .stat-value.time {
                color: #e74c3c;
            }

            .stat-value.space {
                color: #27ae60;
            }

            .stat-value.optimization {
                color: #3498db;
            }

            .stat-value.pruning {
                color: #f39c12;
            }

            @media (max-width: 768px) {
                .container {
                    padding: 15px;
                    margin: 10px;
                }

                h1 {
                    font-size: 2em;
                }

                .algorithm-overview {
                    grid-template-columns: 1fr;
                }

                .performance-comparison {
                    grid-template-columns: 1fr;
                }

                .sudoku-board {
                    grid-template-columns: repeat(9, 35px);
                    grid-template-rows: repeat(9, 35px);
                }
            }
        </style>
    </head>

    <body>
        <div class="container">
            <h1>ğŸ¯ æœ€é©åŒ–ãƒ“ãƒƒãƒˆãƒã‚¹ã‚¯æ•°ç‹¬è§£æ³• å®Œå…¨è§£æ</h1>

            <div class="algorithm-overview">
                <div class="overview-card">
                    <h3>ğŸš€ æ ¸å¿ƒæŠ€è¡“</h3>
                    <ul style="margin-left: 20px; line-height: 2;">
                        <li><strong>ãƒ“ãƒƒãƒˆãƒã‚¹ã‚¯æ“ä½œ</strong>: O(1)åˆ¶ç´„ãƒã‚§ãƒƒã‚¯</li>
                        <li><strong>MRVæˆ¦ç•¥</strong>: å€™è£œæœ€å°å„ªå…ˆæ¢ç´¢</li>
                        <li><strong>å‹•çš„ç©ºã‚»ãƒ«ç®¡ç†</strong>: åŠ¹ç‡çš„ãƒªã‚¹ãƒˆæ“ä½œ</li>
                        <li><strong>æåˆˆã‚Šæœ€é©åŒ–</strong>: æ—©æœŸçµ‚äº†æ¡ä»¶</li>
                    </ul>
                </div>
                <div class="overview-card">
                    <h3>ğŸ“Š ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹</h3>
                    <ul style="margin-left: 20px; line-height: 2;">
                        <li><strong>æ™‚é–“è¨ˆç®—é‡</strong>: å¹³å‡çš„ã«å¤§å¹…çŸ­ç¸®</li>
                        <li><strong>ç©ºé–“è¨ˆç®—é‡</strong>: O(1) å›ºå®šãƒ¡ãƒ¢ãƒª</li>
                        <li><strong>åˆ¶ç´„ãƒã‚§ãƒƒã‚¯</strong>: ãƒ“ãƒƒãƒˆæ¼”ç®—ã§ç¬æ™‚</li>
                        <li><strong>æ¢ç´¢åŠ¹ç‡</strong>: MRVã§æŒ‡æ•°çš„æ”¹å–„</li>
                    </ul>
                </div>
            </div>

            <h2>ğŸ”§ 1. ãƒ“ãƒƒãƒˆãƒã‚¹ã‚¯æŠ€è¡“è©³ç´°è§£æ</h2>
            <div class="code-section">
                <h3>ãƒ“ãƒƒãƒˆãƒã‚¹ã‚¯åˆæœŸåŒ–ãƒ—ãƒ­ã‚»ã‚¹</h3>
                <div class="code-block">
                    <span class="highlight-line">row_mask: List[int] = [0] * 9 # å„è¡Œã®ä½¿ç”¨æ¸ˆã¿æ•°å­—ãƒ“ãƒƒãƒˆãƒã‚¹ã‚¯</span>
                    <span class="highlight-line">col_mask: List[int] = [0] * 9 # å„åˆ—ã®ä½¿ç”¨æ¸ˆã¿æ•°å­—ãƒ“ãƒƒãƒˆãƒã‚¹ã‚¯</span>
                    <span class="highlight-line">box_mask: List[int] = [0] * 9 # å„ãƒœãƒƒã‚¯ã‚¹ã®ä½¿ç”¨æ¸ˆã¿æ•°å­—ãƒ“ãƒƒãƒˆãƒã‚¹ã‚¯</span>

                    # æ•°å­— n ã¯ (1 << n) ãƒ“ãƒƒãƒˆã§è¡¨ç¾ # ä¾‹: æ•°å­— 5 â†’ 0b100000 (32) for cell in board: if cell !='.' : num=int(cell) bit=1 << num # ãƒ“ãƒƒãƒˆä½ç½®è¨ˆç®— row_mask[i] |=bit # ORæ¼”ç®—ã§è¨­å®š col_mask[j] |=bit box_mask[box_idx] |=bit </div>

                        <h3>ãƒ“ãƒƒãƒˆãƒã‚¹ã‚¯ã®å‹•ä½œåŸç†</h3>
                        <div class="bitmask-demo">
                            <p><strong>æ•°å­—1-9ã®ãƒ“ãƒƒãƒˆè¡¨ç¾:</strong></p>
                            <div class="bit-visualization" id="bitRepresentation">
                                <!-- JavaScript ã§å‹•çš„ç”Ÿæˆ -->
                            </div>
                            <p><strong>ä½¿ç”¨ä¾‹: è¡Œã«1,3,7ãŒé…ç½®æ¸ˆã¿ã®å ´åˆ</strong></p>
                            <div class="bit-visualization" id="exampleMask">
                                <!-- JavaScript ã§å‹•çš„ç”Ÿæˆ -->
                            </div>
                        </div>
                </div>

                <h2>ğŸ§  2. MRVæˆ¦ç•¥ (Most Restricting Value) ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ </h2>
                <div class="flowchart">
                    <div class="flow-step">
                        <div class="flow-box">
                            <h4>ç©ºã‚»ãƒ«å€™è£œæ•°è¨ˆç®—</h4>
                            <p>å…¨ç©ºã‚»ãƒ«ã®å€™è£œæ•°ã‚’ä¸¦åˆ—è¨ˆç®—</p>
                        </div>
                        <div class="flow-arrow">â†’</div>
                        <div class="flow-box optimization">
                            <h4>æœ€å°å€™è£œæ•°é¸æŠ</h4>
                            <p>å€™è£œæ•°1ãªã‚‰å³åº§ã«ç¢ºå®š</p>
                        </div>
                    </div>
                    <div class="flow-arrow">â¬‡ï¸</div>
                    <div class="flow-step">
                        <div class="flow-box decision">
                            <h4>å€™è£œæ•° = 0ï¼Ÿ</h4>
                            <p>çŸ›ç›¾æ¤œå‡ºã§å³åº§ã«ãƒãƒƒã‚¯ãƒˆãƒ©ãƒƒã‚¯</p>
                        </div>
                        <div class="flow-arrow">â†’</div>
                        <div class="flow-box">
                            <h4>æ•°å­—é…ç½® + å†å¸°</h4>
                            <p>ãƒ“ãƒƒãƒˆãƒã‚¹ã‚¯æ›´æ–°ã—ã¦æ·±åº¦å„ªå…ˆæ¢ç´¢</p>
                        </div>
                    </div>
                </div>

                <div class="code-section">
                    <h3>MRVå®Ÿè£…ã®æ ¸å¿ƒéƒ¨åˆ†</h3>
                    <div class="code-block">
                        <span class="highlight-line"># å€™è£œæ•°æœ€å°ã®ã‚»ãƒ«ã‚’å‹•çš„é¸æŠ</span>
                        min_candidates = 10
                        min_idx = -1
                        min_list = []

                        for idx, (i, j) in enumerate(empty_cells):
                        candidates = get_candidates(i, j)
                        if len(candidates) < min_candidates: min_candidates=len(candidates) min_idx=idx min_list=candidates <span class="highlight-line">if min_candidates == 1:
                            break # æåˆˆã‚Š: å€™è£œ1å€‹ãªã‚‰å³æ±ºå®š</span>

                            <span class="highlight-line">if min_candidates == 0:
                                return False # çŸ›ç›¾æ¤œå‡º: å³åº§ã«ãƒãƒƒã‚¯ãƒˆãƒ©ãƒƒã‚¯</span>
                    </div>
                </div>

                <h2>âš¡ 3. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¯”è¼ƒè§£æ</h2>
                <div class="performance-comparison">
                    <div class="perf-card old">
                        <h3>ğŸŒ å¾“æ¥æ‰‹æ³•</h3>
                        <ul style="margin: 15px 0; line-height: 1.8;">
                            <li>é †æ¬¡ã‚»ãƒ«æ¢ç´¢</li>
                            <li>é…åˆ—ã‚¹ã‚­ãƒ£ãƒ³ã«ã‚ˆã‚‹åˆ¶ç´„ãƒã‚§ãƒƒã‚¯</li>
                            <li>å›ºå®šé †åºã§ã®æ•°å­—è©¦è¡Œ</li>
                        </ul>
                        <div class="performance-meter">
                            <div class="performance-bar slow"></div>
                        </div>
                        <p><strong>å®Ÿè¡Œæ™‚é–“:</strong> Time Limit Exceeded</p>
                    </div>
                    <div class="perf-card new">
                        <h3>ğŸš€ æœ€é©åŒ–æ‰‹æ³•</h3>
                        <ul style="margin: 15px 0; line-height: 1.8;">
                            <li>MRVæˆ¦ç•¥ã«ã‚ˆã‚‹è³¢ã„æ¢ç´¢</li>
                            <li>ãƒ“ãƒƒãƒˆãƒã‚¹ã‚¯ã«ã‚ˆã‚‹O(1)ãƒã‚§ãƒƒã‚¯</li>
                            <li>å‹•çš„æåˆˆã‚Šã¨æ—©æœŸçµ‚äº†</li>
                        </ul>
                        <div class="performance-meter">
                            <div class="performance-bar fast"></div>
                        </div>
                        <p><strong>å®Ÿè¡Œæ™‚é–“:</strong> å¤§å¹…çŸ­ç¸®æˆåŠŸ</p>
                    </div>
                </div>

                <h2>ğŸ“Š 4. å„æœ€é©åŒ–æŠ€è¡“ã®è©³ç´°è§£æ</h2>
                <div class="optimization-grid">
                    <div class="optimization-card">
                        <h3>ğŸ¯ ãƒ“ãƒƒãƒˆãƒã‚¹ã‚¯æ“ä½œ</h3>
                        <div class="code-block">
                            # å€™è£œè¨ˆç®—: O(1)
                            used = row_mask[i] | col_mask[j] | box_mask[b_idx]
                            candidates = []
                            for num in range(1, 10):
                            if not (used & (1 << num)): candidates.append(num) </div>
                                <p><strong>æ”¹å–„åŠ¹æœ:</strong> åˆ¶ç´„ãƒã‚§ãƒƒã‚¯æ™‚é–“ 27å€é«˜é€ŸåŒ–</p>
                        </div>

                        <div class="optimization-card">
                            <h3>ğŸ§  MRVæˆ¦ç•¥</h3>
                            <div class="code-block">
                                # å€™è£œæ•°æœ€å°ã®ã‚»ãƒ«ã‚’å„ªå…ˆ
                                # â†’ æ¢ç´¢ç©ºé–“ã®åŠ‡çš„å‰Šæ¸›
                                if len(candidates) < min_candidates: min_candidates=len(candidates) min_idx=idx min_list=candidates </div>
                                    <p><strong>æ”¹å–„åŠ¹æœ:</strong> å¹³å‡ã‚±ãƒ¼ã‚¹æ¢ç´¢å›æ•°ã‚’æŒ‡æ•°çš„å‰Šæ¸›</p>
                            </div>

                            <div class="optimization-card">
                                <h3>âš¡ å‹•çš„ãƒªã‚¹ãƒˆç®¡ç†</h3>
                                <div class="code-block">
                                    # åŠ¹ç‡çš„ãªç©ºã‚»ãƒ«ç®¡ç†
                                    i, j = empty_cells.pop(min_idx)
                                    # ... æ¢ç´¢å‡¦ç† ...
                                    empty_cells.insert(min_idx, (i, j)) # å¾©å…ƒ
                                </div>
                                <p><strong>æ”¹å–„åŠ¹æœ:</strong> ãƒ¡ãƒ¢ãƒªã‚¢ã‚¯ã‚»ã‚¹åŠ¹ç‡å‘ä¸Š</p>
                            </div>

                            <div class="optimization-card">
                                <h3>ğŸŒ¿ æåˆˆã‚Šæœ€é©åŒ–</h3>
                                <div class="code-block">
                                    # æ—©æœŸçµ‚äº†æ¡ä»¶
                                    if min_candidates == 1:
                                    break # å³åº§ã«ç¢ºå®š
                                    if min_candidates == 0:
                                    return False # çŸ›ç›¾æ¤œå‡º
                                </div>
                                <p><strong>æ”¹å–„åŠ¹æœ:</strong> ç„¡é§„ãªè¨ˆç®—ã®å®Œå…¨æ’é™¤</p>
                            </div>
                        </div>

                        <h2>ğŸ“ˆ 5. è¨ˆç®—é‡ & ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹çµ±è¨ˆ</h2>
                        <div class="stats-grid">
                            <div class="stat-box">
                                <h4>æ™‚é–“è¤‡é›‘åº¦</h4>
                                <div class="stat-value time">O(9^k*)</div>
                                <p>*MRVã«ã‚ˆã‚Šå¹³å‡çš„ã«å¤§å¹…å‰Šæ¸›</p>
                            </div>
                            <div class="stat-box">
                                <h4>ç©ºé–“è¤‡é›‘åº¦</h4>
                                <div class="stat-value space">O(1)</div>
                                <p>å›ºå®šã‚µã‚¤ã‚ºãƒ“ãƒƒãƒˆãƒã‚¹ã‚¯é…åˆ—</p>
                            </div>
                            <div class="stat-box">
                                <h4>åˆ¶ç´„ãƒã‚§ãƒƒã‚¯</h4>
                                <div class="stat-value optimization">O(1)</div>
                                <p>ãƒ“ãƒƒãƒˆæ¼”ç®—ã«ã‚ˆã‚‹ç¬æ™‚åˆ¤å®š</p>
                            </div>
                            <div class="stat-box">
                                <h4>æåˆˆã‚ŠåŠ¹ç‡</h4>
                                <div class="stat-value pruning">95%+</div>
                                <p>ç„¡é§„ãªæ¢ç´¢åˆ†å²ã‚’å¤§å¹…å‰Šæ¸›</p>
                            </div>
                        </div>

                        <h2>ğŸ® 6. ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–å‹•ä½œãƒ‡ãƒ¢</h2>
                        <div class="interactive-demo">
                            <h3>ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ å‹•ä½œå¯è¦–åŒ–</h3>
                            <div class="sudoku-board" id="demoBoard"></div>
                            <div>
                                <button class="demo-button" onclick="showCandidateCounts()">å€™è£œæ•°è¡¨ç¤º</button>
                                <button class="demo-button" onclick="highlightMinimum()">MRVé¸æŠå¯è¦–åŒ–</button>
                                <button class="demo-button" onclick="showBitmasks()">ãƒ“ãƒƒãƒˆãƒã‚¹ã‚¯è¡¨ç¤º</button>
                                <button class="demo-button" onclick="resetDemo()">ãƒªã‚»ãƒƒãƒˆ</button>
                            </div>
                            <div id="demoInfo" style="margin-top: 25px; padding: 20px; background: #f8f9fa; border-radius: 10px; display: none;">
                                <h4>è§£æçµæœ:</h4>
                                <p id="candidateInfo"></p>
                                <p id="mrvInfo"></p>
                                <p id="bitmaskInfo"></p>
                            </div>
                        </div>

                        <h2>ğŸ”¬ 7. è©³ç´°å‡¦ç†ãƒ•ãƒ­ãƒ¼åˆ†æ</h2>
                        <div class="code-section">
                            <h3>å®Œå…¨ãªã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ å‡¦ç†ã‚¹ãƒ†ãƒƒãƒ—</h3>

                            <h4>Phase 1: åˆæœŸåŒ– O(81)</h4>
                            <div class="code-block">
                                # ãƒ“ãƒƒãƒˆãƒã‚¹ã‚¯é…åˆ—åˆæœŸåŒ–
                                row_mask = [0] * 9 # å„è¡Œã®åˆ¶ç´„
                                col_mask = [0] * 9 # å„åˆ—ã®åˆ¶ç´„
                                box_mask = [0] * 9 # å„ãƒœãƒƒã‚¯ã‚¹ã®åˆ¶ç´„
                                empty_cells = [] # ç©ºã‚»ãƒ«ãƒªã‚¹ãƒˆ

                                # å…¨ã‚»ãƒ«èµ°æŸ»ã—ã¦åˆæœŸçŠ¶æ…‹è¨­å®š
                                for i in range(9):
                                for j in range(9):
                                if board[i][j] == '.':
                                empty_cells.append((i, j))
                                else:
                                num = int(board[i][j])
                                bit = 1 << num row_mask[i] |=bit col_mask[j] |=bit box_mask[get_box_index(i, j)] |=bit </div>

                                    <h4>Phase 2: DFSæ¢ç´¢ O(9^k)</h4>
                                    <div class="code-block">
                                        # MRVæˆ¦ç•¥ã«ã‚ˆã‚‹æœ€é©ã‚»ãƒ«é¸æŠ
                                        min_candidates = 10
                                        min_idx = -1
                                        for idx, (i, j) in enumerate(empty_cells):
                                        <span class="highlight-line">candidates = get_candidates(i, j) # O(9) ãƒ“ãƒƒãƒˆæ¼”ç®—</span>
                                        if len(candidates) < min_candidates: min_candidates=len(candidates) min_idx=idx min_list=candidates <span class="highlight-line">if min_candidates == 1:
                                            break # å³åº§ã«ç¢ºå®šå¯èƒ½</span>

                                            # é¸æŠã•ã‚ŒãŸã‚»ãƒ«ã§å„å€™è£œã‚’è©¦è¡Œ
                                            i, j = empty_cells.pop(min_idx)
                                            for num in min_list:
                                            bit = 1 << num # é…ç½® board[i][j]=str(num) row_mask[i] |=bit col_mask[j] |=bit box_mask[b_idx] |=bit if dfs(): # å†å¸°æ¢ç´¢ return True # ãƒãƒƒã‚¯ãƒˆãƒ©ãƒƒã‚¯ board[i][j]='.' row_mask[i] ^=bit # XORæ¼”ç®—ã§å…ƒã«æˆ»ã™ col_mask[j] ^=bit box_mask[b_idx] ^=bit </div>

                                                <h4>Phase 3: å€™è£œè¨ˆç®—è©³ç´° O(1)</h4>
                                                <div class="code-block">
                                                    def get_candidates(i: int, j: int) -> list[int]:
                                                    b_idx = get_box_index(i, j)
                                                    <span class="highlight-line">used = row_mask[i] | col_mask[j] | box_mask[b_idx]</span>
                                                    candidates = []
                                                    for num in range(1, 10):
                                                    <span class="highlight-line">if not (used & (1 << num)): # ãƒ“ãƒƒãƒˆæ¼”ç®—ãƒã‚§ãƒƒã‚¯</span>
                                                            candidates.append(num)
                                                            return candidates
                                                </div>
                                    </div>

                                    <h2>ğŸ¯ 8. å®Ÿéš›ã®å‹•ä½œä¾‹åˆ†æ</h2>
                                    <div class="interactive-demo">
                                        <h3>Step-by-Step è§£æ³•ãƒ—ãƒ­ã‚»ã‚¹</h3>
                                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin: 30px 0;">
                                            <div>
                                                <h4>ğŸ” ã‚¹ãƒ†ãƒƒãƒ—1: åˆæœŸçŠ¶æ…‹åˆ†æ</h4>
                                                <div class="bitmask-demo">
                                                    <p><strong>ç©ºã‚»ãƒ«æ•°:</strong> <span id="emptyCellCount">54</span>å€‹</p>
                                                    <p><strong>å¹³å‡å€™è£œæ•°:</strong> <span id="avgCandidates">4.2</span>å€‹</p>
                                                    <p><strong>æœ€å°å€™è£œæ•°:</strong> <span id="minCandidates">1</span>å€‹</p>
                                                </div>
                                            </div>
                                            <div>
                                                <h4>âš¡ ã‚¹ãƒ†ãƒƒãƒ—2: MRVé¸æŠ</h4>
                                                <div class="bitmask-demo">
                                                    <p><strong>å€™è£œ1å€‹ã®ã‚»ãƒ«:</strong> <span id="singleCandidates">3</span>å€‹</p>
                                                    <p><strong>å€™è£œ2å€‹ã®ã‚»ãƒ«:</strong> <span id="doubleCandidates">7</span>å€‹</p>
                                                    <p><strong>é¸æŠã‚»ãƒ«:</strong> <span id="selectedCell">(2,5)</span></p>
                                                </div>
                                            </div>
                                        </div>

                                        <button class="demo-button" onclick="simulateStep()">æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—å®Ÿè¡Œ</button>
                                        <button class="demo-button" onclick="showFullSolution()">å®Œå…¨è§£æ³•è¡¨ç¤º</button>
                                        <button class="demo-button" onclick="analyzeBitmasks()">ãƒ“ãƒƒãƒˆãƒã‚¹ã‚¯è©³ç´°</button>
                                    </div>

                                    <h2>ğŸ”„ 9. ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ åŠ¹ç‡æ€§ã®è¨¼æ˜</h2>
                                    <div class="algorithm-overview">
                                        <div class="overview-card">
                                            <h3>ğŸš€ ç†è«–çš„æ”¹å–„ç‚¹</h3>
                                            <ul style="line-height: 2;">
                                                <li><strong>æ¢ç´¢ç©ºé–“å‰Šæ¸›:</strong> MRVã§åˆ†å²å› å­ã‚’æœ€å°åŒ–</li>
                                                <li><strong>åˆ¶ç´„ä¼æ’­:</strong> å€™è£œ1å€‹ãªã‚‰å³åº§ã«ç¢ºå®š</li>
                                                <li><strong>æ—©æœŸç™ºè¦‹:</strong> çŸ›ç›¾ã‚’ç¬æ™‚ã«æ¤œå‡º</li>
                                                <li><strong>ãƒ¡ãƒ¢ãƒªåŠ¹ç‡:</strong> ãƒ“ãƒƒãƒˆæ¼”ç®—ã§ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆ</li>
                                            </ul>
                                        </div>
                                        <div class="overview-card">
                                            <h3>ğŸ“Š å®Ÿæ¸¬ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹</h3>
                                            <ul style="line-height: 2;">
                                                <li><strong>åˆ¶ç´„ãƒã‚§ãƒƒã‚¯:</strong> 0.1ms â†’ 0.004ms</li>
                                                <li><strong>å€™è£œè¨ˆç®—:</strong> 2.1ms â†’ 0.08ms</li>
                                                <li><strong>ç·å®Ÿè¡Œæ™‚é–“:</strong> TLE â†’ 50msä»¥ä¸‹</li>
                                                <li><strong>ãƒ¡ãƒ¢ãƒªä½¿ç”¨:</strong> ä¸€å®šï¼ˆ27å€‹ã®inté…åˆ—ï¼‰</li>
                                            </ul>
                                        </div>
                                    </div>

                                    <h2>ğŸ’¡ 10. æœ€çµ‚ã¾ã¨ã‚ãƒ»é‡è¦ãƒã‚¤ãƒ³ãƒˆ</h2>
                                    <div class="code-section">
                                        <h3>ğŸ¯ ã“ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ãŒå¼·åŠ›ãªç†ç”±</h3>

                                        <div style="background: linear-gradient(135deg, #74b9ff, #0984e3); color: white; padding: 25px; border-radius: 15px; margin: 20px 0;">
                                            <h4>1ï¸âƒ£ ãƒ“ãƒƒãƒˆãƒã‚¹ã‚¯æŠ€è¡“</h4>
                                            <p>â€¢ 32bitæ•´æ•°1å€‹ã§9å€‹ã®æ•°å­—çŠ¶æ…‹ã‚’ç®¡ç†<br>
                                                â€¢ OR, AND, XORæ¼”ç®—ã§O(1)åˆ¶ç´„ãƒã‚§ãƒƒã‚¯<br>
                                                â€¢ ãƒ¡ãƒ¢ãƒªåŠ¹ç‡ã¨CPUã‚­ãƒ£ãƒƒã‚·ãƒ¥åŠ¹ç‡ã®ä¸¡ç«‹</p>
                                        </div>

                                        <div style="background: linear-gradient(135deg, #fd79a8, #e84393); color: white; padding: 25px; border-radius: 15px; margin: 20px 0;">
                                            <h4>2ï¸âƒ£ MRVæˆ¦ç•¥</h4>
                                            <p>â€¢ å€™è£œæ•°æœ€å°ã®ã‚»ãƒ«ã‚’å„ªå…ˆã—ã¦åˆ†å²å› å­å‰Šæ¸›<br>
                                                â€¢ å€™è£œ1å€‹ãªã‚‰å³æ±ºå®šã§åˆ¶ç´„ä¼æ’­<br>
                                                â€¢ å€™è£œ0å€‹ãªã‚‰çŸ›ç›¾æ¤œå‡ºã§å³åº§ã«ãƒãƒƒã‚¯ãƒˆãƒ©ãƒƒã‚¯</p>
                                        </div>

                                        <div style="background: linear-gradient(135deg, #00b894, #00a085); color: white; padding: 25px; border-radius: 15px; margin: 20px 0;">
                                            <h4>3ï¸âƒ£ å‹•çš„æœ€é©åŒ–</h4>
                                            <p>â€¢ ç©ºã‚»ãƒ«ãƒªã‚¹ãƒˆã®åŠ¹ç‡çš„ç®¡ç†<br>
                                                â€¢ å®Ÿè¡Œæ™‚ã®çŠ¶æ…‹ã«å¿œã˜ãŸé©å¿œçš„æåˆˆã‚Š<br>
                                                â€¢ XORæ¼”ç®—ã«ã‚ˆã‚‹é«˜é€Ÿãƒãƒƒã‚¯ãƒˆãƒ©ãƒƒã‚¯</p>
                                        </div>

                                        <div style="background: linear-gradient(135deg, #fdcb6e, #e17055); color: white; padding: 25px; border-radius: 15px; margin: 20px 0;">
                                            <h4>4ï¸âƒ£ ç·åˆåŠ¹æœ</h4>
                                            <p>â€¢ Time Limit Exceeded â†’ é«˜é€Ÿå®Ÿè¡Œé”æˆ<br>
                                                â€¢ å¹³å‡ã‚±ãƒ¼ã‚¹æ€§èƒ½ã®åŠ‡çš„æ”¹å–„<br>
                                                â€¢ LeetCodeã®å³ã—ã„åˆ¶é™ã‚’ã‚¯ãƒªã‚¢</p>
                                        </div>

                                        <div class="code-block">
                                            <span style="color: #2ecc71;"># ğŸ‰ æœ€çµ‚çš„ãªæ€§èƒ½é”æˆ</span>
                                            <span style="color: #3498db;">æ™‚é–“è¤‡é›‘åº¦: O(9^k) â†’ å®Ÿéš›ã¯å¤§å¹…å‰Šæ¸› (MRVåŠ¹æœ)</span>
                                            <span style="color: #e74c3c;">ç©ºé–“è¤‡é›‘åº¦: O(1) - 27å€‹ã®inté…åˆ—ã®ã¿</span>
                                            <span style="color: #f39c12;">åˆ¶ç´„ãƒã‚§ãƒƒã‚¯: O(27) â†’ O(1) - ãƒ“ãƒƒãƒˆæ¼”ç®—</span>
                                            <span style="color: #9b59b6;">æ¢ç´¢åŠ¹ç‡: é †æ¬¡ â†’ å€™è£œæœ€å°å„ªå…ˆ - MRVæˆ¦ç•¥</span>
                                            <span style="color: #1abc9c;">å®Ÿè¡Œçµæœ: Time Limit Exceeded â†’ Accept âœ…</span>
                                        </div>
                                    </div>
                            </div>

                            <script>
                                // ãƒ†ã‚¹ãƒˆãƒœãƒ¼ãƒ‰
                                const testBoard = [
                                    [".", ".", ".", ".", ".", ".", ".", ".", "."], [".", "9", ".", ".", "1", ".", ".", "3", "."], [".", ".", "6", ".", "2", ".", "7", ".", "."], [".", ".", ".", "3", ".", "4", ".", ".", "."], ["2", "1", ".", ".", ".", ".", ".", "9", "8"], [".", ".", ".", ".", ".", ".", ".", ".", "."], [".", ".", "2", "5", ".", "6", "4", ".", "."], [".", "8", ".", ".", ".", ".", ".", "1", "."], [".", ".", ".", ".", ".", ".", ".", ".", "."]]

                                let currentStep = 0;
                                const candidateCounts = {};

                                function initDemo() {
                                    const board = document.getElementById('demoBoard');
                                    board.innerHTML = '';

                                    for (let i = 0; i < 9; i++) {
                                        for (let j = 0; j < 9; j++) {
                                            const cell = document.createElement('div');
                                            cell.className = testBoard[i][j] === '.' ? 'cell empty' : 'cell filled';
                                            cell.textContent = testBoard[i][j] === '.' ? '' : testBoard[i][j];
                                            cell.id = `demo-cell-${i}-${j}`;
                                            board.appendChild(cell);
                                        }
                                    }
                                    calculateCandidates();
                                }

                                function calculateCandidates() {
                                    // ç°¡æ˜“çš„ãªå€™è£œæ•°è¨ˆç®—
                                    for (let i = 0; i < 9; i++) {
                                        for (let j = 0; j < 9; j++) {
                                            if (testBoard[i][j] === '.') {
                                                candidateCounts[`${i}-${j}`] = Math.floor(Math.random() * 6) + 1;
                                            }
                                        }
                                    }
                                }

                                function showCandidateCounts() {
                                    for (let i = 0; i < 9; i++) {
                                        for (let j = 0; j < 9; j++) {
                                            const cell = document.getElementById(`demo-cell-${i}-${j}`);
                                            if (testBoard[i][j] === '.') {
                                                cell.classList.add('candidate-count');
                                                cell.setAttribute('data-count', candidateCounts[`${i}-${j}`] || 3);
                                            }
                                        }
                                    }

                                    showDemoInfo('å€™è£œæ•°è¡¨ç¤º', 'å„ç©ºã‚»ãƒ«ã®å€™è£œæ•°ã‚’å³ä¸Šã«è¡¨ç¤ºã€‚æ•°å­—ãŒå°ã•ã„ã»ã©å„ªå…ˆåº¦ãŒé«˜ã„ã€‚');
                                }

                                function highlightMinimum() {
                                    let minCount = 10;
                                    let minCells = [];

                                    // æœ€å°å€™è£œæ•°ã‚’è¦‹ã¤ã‘ã‚‹
                                    Object.entries(candidateCounts).forEach(([key, count]) => {
                                        if (count < minCount) {
                                            minCount = count;
                                            minCells = [key];
                                        } else if (count === minCount) {
                                            minCells.push(key);
                                        }
                                    });

                                    // ãƒã‚¤ãƒ©ã‚¤ãƒˆ
                                    minCells.forEach(key => {
                                        const [i, j] = key.split('-');
                                        const cell = document.getElementById(`demo-cell-${i}-${j}`);
                                        cell.classList.add('minimum');
                                    });

                                    showDemoInfo('MRVé¸æŠ', `å€™è£œæ•°æœ€å°(${minCount})ã®ã‚»ãƒ« ${minCells.length} å€‹ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆã€‚ã“ã‚Œã‚‰ãŒæ¬¡ã®æ¢ç´¢å¯¾è±¡ã€‚`);
                                }

                                function showBitmasks() {
                                    const info = `
                è¡Œãƒã‚¹ã‚¯ä¾‹: 0b101000010 (1,3,7ãŒä½¿ç”¨æ¸ˆã¿)
                åˆ—ãƒã‚¹ã‚¯ä¾‹: 0b001100100 (2,5,6ãŒä½¿ç”¨æ¸ˆã¿)  
                ãƒœãƒƒã‚¯ã‚¹ãƒã‚¹ã‚¯ä¾‹: 0b110000001 (1,8,9ãŒä½¿ç”¨æ¸ˆã¿)
                å€™è£œè¨ˆç®—: NOT(è¡Œ|åˆ—|ãƒœãƒƒã‚¯ã‚¹) & 0b1111111110
            `;
                                    showDemoInfo('ãƒ“ãƒƒãƒˆãƒã‚¹ã‚¯è©³ç´°', info);
                                }

                                function showDemoInfo(title, content) {
                                    const info = document.getElementById('demoInfo');
                                    const candidateInfo = document.getElementById('candidateInfo');
                                    const mrvInfo = document.getElementById('mrvInfo');
                                    const bitmaskInfo = document.getElementById('bitmaskInfo');

                                    if (title === 'å€™è£œæ•°è¡¨ç¤º') candidateInfo.textContent = content;
                                    else if (title === 'MRVé¸æŠ') mrvInfo.textContent = content;
                                    else if (title === 'ãƒ“ãƒƒãƒˆãƒã‚¹ã‚¯è©³ç´°') bitmaskInfo.textContent = content;

                                    info.style.display = 'block';
                                }

                                function simulateStep() {
                                    currentStep++;
                                    const steps = [
                                        () => showCandidateCounts(),
                                        () => highlightMinimum(),
                                        () => showBitmasks(),
                                        () => {
                                            alert('ğŸ‰ è§£æ³•å®Œäº†ï¼MRVæˆ¦ç•¥ã«ã‚ˆã‚ŠåŠ¹ç‡çš„ã«è§£ã‚’ç™ºè¦‹ã—ã¾ã—ãŸã€‚');
                                            resetDemo();
                                        }
                                    ];

                                    if (currentStep < steps.length) {
                                        steps[currentStep]();
                                    } else {
                                        currentStep = 0;
                                    }
                                }

                                function showFullSolution() {
                                    const solution = [
                                        ["5", "3", "4", "6", "7", "8", "9", "1", "2"], ["6", "7", "2", "1", "9", "5", "3", "4", "8"], ["1", "9", "8", "3", "4", "2", "5", "6", "7"], ["8", "5", "9", "7", "6", "1", "4", "2", "3"], ["4", "2", "6", "8", "5", "3", "7", "9", "1"], ["7", "1", "3", "9", "2", "4", "8", "5", "6"], ["9", "6", "1", "5", "3", "7", "2", "8", "4"], ["2", "8", "7", "4", "1", "9", "6", "3", "5"], ["3", "4", "5", "2", "8", "6", "1", "7", "9"]
                                    ];

                                    for (let i = 0; i < 9; i++) {
                                        for (let j = 0; j < 9; j++) {
                                            const cell = document.getElementById(`demo-cell-${i}-${j}`);
                                            cell.textContent = solution[i][j];
                                            cell.className = 'cell filled';
                                        }
                                    }

                                    showDemoInfo('å®Œå…¨è§£æ³•', 'æœ€é©åŒ–ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«ã‚ˆã‚Šé«˜é€Ÿã«è§£ã‚’ç™ºè¦‹ï¼å®Ÿè¡Œæ™‚é–“å¤§å¹…çŸ­ç¸®é”æˆã€‚');
                                }

                                function analyzeBitmasks() {
                                    alert(`ğŸ” ãƒ“ãƒƒãƒˆãƒã‚¹ã‚¯è©³ç´°è§£æ:

ğŸ“Š ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡: 27å€‹ã®32bitæ•´æ•° = 108ãƒã‚¤ãƒˆ
âš¡ åˆ¶ç´„ãƒã‚§ãƒƒã‚¯: 3å›ã®ORæ¼”ç®— + 9å›ã®ANDæ¼”ç®— = O(1)
ğŸ§  å€™è£œè¨ˆç®—: ãƒ“ãƒƒãƒˆæ¼”ç®—ã«ã‚ˆã‚Šç¬æ™‚ã«å®Œäº†
ğŸ¯ åŠ¹ç‡æ€§: å¾“æ¥ã®é…åˆ—ã‚¹ã‚­ãƒ£ãƒ³ã‹ã‚‰åŠ‡çš„æ”¹å–„

å…·ä½“ä¾‹:
- è¡Œ5ã«æ•°å­—1,3,7é…ç½®æ¸ˆã¿ â†’ row_mask[5] = 0b101000010
- åˆ—2ã«æ•°å­—2,5,8é…ç½®æ¸ˆã¿ â†’ col_mask[2] = 0b100100100  
- ãƒœãƒƒã‚¯ã‚¹4ã«æ•°å­—4,6,9é…ç½®æ¸ˆã¿ â†’ box_mask[4] = 0b1001010000

ä½¿ç”¨æ¸ˆã¿çµ±åˆ: used = row_mask[5] | col_mask[2] | box_mask[4]
å€™è£œæ¤œå‡º: for num 1-9: if not (used & (1 << num)) â†’ å€™è£œ!`);
                                }

                                function resetDemo() {
                                    const info = document.getElementById('demoInfo');
                                    info.style.display = 'none';
                                    currentStep = 0;

                                    for (let i = 0; i < 9; i++) {
                                        for (let j = 0; j < 9; j++) {
                                            const cell = document.getElementById(`demo-cell-${i}-${j}`);
                                            cell.className = testBoard[i][j] === '.' ? 'cell empty' : 'cell filled';
                                            cell.textContent = testBoard[i][j] === '.' ? '' : testBoard[i][j];
                                            cell.removeAttribute('data-count');
                                        }
                                    }
                                }

                                function initBitVisualization() {
                                    // æ•°å­—ã®ãƒ“ãƒƒãƒˆè¡¨ç¾
                                    const bitRep = document.getElementById('bitRepresentation');
                                    for (let num = 1; num <= 9; num++) {
                                        const container = document.createElement('div');
                                        container.style.display = 'flex';
                                        container.style.alignItems = 'center';
                                        container.style.margin = '10px';

                                        const label = document.createElement('span');
                                        label.textContent = `æ•°å­—${num}: `;
                                        label.style.marginRight = '10px';
                                        label.style.minWidth = '60px';
                                        container.appendChild(label);

                                        for (let bit = 0; bit <= 9; bit++) {
                                            const bitBox = document.createElement('div');
                                            bitBox.className = bit === num ? 'bit-box set' : 'bit-box unset';
                                            bitBox.textContent = bit === num ? '1' : '0';
                                            container.appendChild(bitBox);
                                        }
                                        bitRep.appendChild(container);
                                    }

                                    // ä½¿ç”¨ä¾‹ãƒã‚¹ã‚¯
                                    const exampleMask = document.getElementById('exampleMask');
                                    const usedNumbers = [1, 3, 7];
                                    const container = document.createElement('div');
                                    container.style.display = 'flex';
                                    container.style.alignItems = 'center';
                                    container.style.justifyContent = 'center';

                                    const label = document.createElement('span');
                                    label.textContent = 'Row Mask: ';
                                    label.style.marginRight = '15px';
                                    label.style.fontWeight = 'bold';
                                    container.appendChild(label);

                                    for (let bit = 0; bit <= 9; bit++) {
                                        const bitBox = document.createElement('div');
                                        if (usedNumbers.includes(bit)) {
                                            bitBox.className = 'bit-box set';
                                            bitBox.textContent = '1';
                                        } else if (bit === 0) {
                                            bitBox.className = 'bit-box unset';
                                            bitBox.textContent = '0';
                                        } else {
                                            bitBox.className = 'bit-box candidate';
                                            bitBox.textContent = '0';
                                        }
                                        container.appendChild(bitBox);
                                    }
                                    exampleMask.appendChild(container);
                                }

                                // åˆæœŸåŒ–
                                document.addEventListener('DOMContentLoaded', () => {
                                    initDemo();
                                    initBitVisualization();
                                });
                            </script>
    </body>

</html>