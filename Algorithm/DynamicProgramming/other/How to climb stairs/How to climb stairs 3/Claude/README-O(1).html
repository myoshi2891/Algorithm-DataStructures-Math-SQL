<!doctype html>
<html lang="ja">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>O(1)„É°„É¢„É™ÊúÄÈÅ©ÂåñËß£Êûê - ÈöéÊÆµ‰∏ä„ÇäÂïèÈ°å</title>
        <style>
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                max-width: 1400px;
                margin: 0 auto;
                padding: 20px;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: #333;
                line-height: 1.6;
            }

            .container {
                background: white;
                border-radius: 15px;
                padding: 30px;
                box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
                margin-bottom: 20px;
            }

            h1 {
                color: #4a5568;
                text-align: center;
                font-size: 2.8em;
                margin-bottom: 30px;
                background: linear-gradient(45deg, #667eea, #764ba2);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }

            h2 {
                color: #2d3748;
                border-bottom: 3px solid #667eea;
                padding-bottom: 10px;
                margin-top: 40px;
            }

            h3 {
                color: #4a5568;
                margin-top: 30px;
            }

            .optimization-comparison {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 30px;
                margin: 30px 0;
            }

            .method-box {
                border: 2px solid #e2e8f0;
                border-radius: 15px;
                padding: 25px;
                background: #f8f9fa;
                transition: all 0.3s ease;
            }

            .method-box:hover {
                transform: translateY(-5px);
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            }

            .method-box.optimized {
                border-color: #48bb78;
                background: linear-gradient(135deg, #c6f6d5, #9ae6b4);
            }

            .method-box.traditional {
                border-color: #fed7d7;
                background: linear-gradient(135deg, #fed7d7, #fbb6ce);
            }

            .circular-buffer {
                display: flex;
                justify-content: center;
                align-items: center;
                margin: 30px 0;
                padding: 20px;
                background: #f0f4f8;
                border-radius: 15px;
            }

            .buffer-cell {
                width: 60px;
                height: 60px;
                border: 3px solid #4a5568;
                border-radius: 50%;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                margin: 5px;
                background: white;
                position: relative;
                transition: all 0.3s ease;
            }

            .buffer-cell.active {
                background: #fed7d7;
                border-color: #e53e3e;
                transform: scale(1.15);
            }

            .buffer-cell.reading {
                background: #c6f6d5;
                border-color: #48bb78;
            }

            .buffer-index {
                font-size: 10px;
                color: #666;
            }

            .buffer-value {
                font-size: 16px;
                font-weight: bold;
                color: #2d3748;
            }

            .step-visualization {
                background: #edf2f7;
                border-radius: 10px;
                padding: 25px;
                margin: 20px 0;
            }

            .step-controls {
                text-align: center;
                margin: 30px 0;
            }

            button {
                background: linear-gradient(45deg, #667eea, #764ba2);
                color: white;
                border: none;
                padding: 12px 24px;
                border-radius: 25px;
                cursor: pointer;
                margin: 5px;
                font-size: 16px;
                transition: transform 0.2s ease;
            }

            button:hover {
                transform: translateY(-2px);
            }

            button:disabled {
                background: #cbd5e0;
                cursor: not-allowed;
                transform: none;
            }

            .formula-box {
                background: #2d3748;
                color: white;
                padding: 20px;
                border-radius: 10px;
                font-family: 'Courier New', monospace;
                margin: 20px 0;
            }

            .memory-diagram {
                display: flex;
                flex-direction: column;
                align-items: center;
                margin: 30px 0;
            }

            .memory-array {
                display: flex;
                gap: 10px;
                margin: 15px 0;
            }

            .memory-cell {
                width: 70px;
                height: 70px;
                border: 2px solid #4a5568;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                background: white;
                border-radius: 8px;
                position: relative;
            }

            .memory-cell.traditional {
                border-color: #e53e3e;
                background: #fed7d7;
            }

            .memory-cell.optimized {
                border-color: #48bb78;
                background: #c6f6d5;
            }

            .calculation-step {
                background: #f0f4f8;
                border-left: 4px solid #667eea;
                padding: 20px;
                margin: 20px 0;
                border-radius: 0 10px 10px 0;
            }

            .complexity-table {
                width: 100%;
                border-collapse: collapse;
                margin: 20px 0;
                background: white;
                border-radius: 10px;
                overflow: hidden;
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            }

            .complexity-table th,
            .complexity-table td {
                padding: 15px 20px;
                text-align: left;
                border-bottom: 1px solid #e2e8f0;
            }

            .complexity-table th {
                background: #4a5568;
                color: white;
                font-weight: bold;
            }

            .complexity-table tr:hover {
                background: #f8f9fa;
            }

            .highlight {
                background: #fef5e7;
                padding: 2px 6px;
                border-radius: 4px;
                border: 1px solid #f6ad55;
            }

            .code-block {
                background: #2d3748;
                color: #e2e8f0;
                padding: 20px;
                border-radius: 10px;
                font-family: 'Courier New', monospace;
                overflow-x: auto;
                margin: 15px 0;
                font-size: 14px;
            }

            .performance-metrics {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 20px;
                margin: 30px 0;
            }

            .metric-card {
                background: #f7fafc;
                border: 2px solid #e2e8f0;
                border-radius: 10px;
                padding: 20px;
                text-align: center;
            }

            .metric-value {
                font-size: 2.5em;
                font-weight: bold;
                color: #667eea;
            }

            .metric-label {
                color: #718096;
                margin-top: 10px;
            }

            .algorithm-flow {
                display: flex;
                flex-direction: column;
                align-items: center;
                margin: 30px 0;
            }

            .flow-step {
                background: white;
                border: 2px solid #4a5568;
                border-radius: 10px;
                padding: 15px 25px;
                margin: 10px 0;
                position: relative;
                min-width: 200px;
                text-align: center;
            }

            .flow-step.current {
                background: #fed7d7;
                border-color: #e53e3e;
            }

            .flow-arrow {
                font-size: 24px;
                color: #667eea;
                margin: 5px 0;
            }
        </style>
    </head>

    <body>
        <div class="container">
            <h1>üöÄ O(1)„É°„É¢„É™ÊúÄÈÅ©ÂåñËß£Êûê</h1>
            <p style="text-align: center; font-size: 1.2em; color: #666">
                ÈöéÊÆµ‰∏ä„ÇäÂïèÈ°å„ÅÆ„É°„É¢„É™ÂäπÁéá„ÇíÂäáÁöÑ„Å´ÊîπÂñÑ„Åô„ÇãÂÜÜÂΩ¢„Éê„ÉÉ„Éï„Ç°„ÅÆ‰ªïÁµÑ„Åø
            </p>

            <h2>‚öñÔ∏è ÂæìÊù•Ê≥ï vs ÊúÄÈÅ©ÂåñÊ≥ï„ÅÆÊØîËºÉ</h2>
            <div class="optimization-comparison">
                <div class="method-box traditional">
                    <h3>üî¥ ÂæìÊù•„ÅÆDPËß£Ê≥ï</h3>
                    <ul>
                        <li><strong>„É°„É¢„É™:</strong> O(n)</li>
                        <li><strong>ÈÖçÂàó„Çµ„Ç§„Ç∫:</strong> n+1 Ë¶ÅÁ¥†</li>
                        <li><strong>n=30„ÅÆÂ†¥Âêà:</strong> 31Ë¶ÅÁ¥†</li>
                        <li><strong>ÁâπÂæ¥:</strong> ÂÖ®„Å¶„ÅÆÊÆµ„ÅÆÂÄ§„Çí‰øùÊåÅ</li>
                    </ul>
                    <div class="code-block">
                        const dp = Array(n + 1).fill(0); dp[0] = 1; for (let i = 1; i <= n; i++) {
                        if (i>= a) dp[i] += dp[i - a]; if (i >= b) dp[i] += dp[i - b]; if (i >= c)
                        dp[i] += dp[i - c]; }
                    </div>
                </div>

                <div class="method-box optimized">
                    <h3>üü¢ O(1)ÊúÄÈÅ©ÂåñËß£Ê≥ï</h3>
                    <ul>
                        <li><strong>„É°„É¢„É™:</strong> O(max(a,b,c))</li>
                        <li><strong>ÈÖçÂàó„Çµ„Ç§„Ç∫:</strong> M Ë¶ÅÁ¥†</li>
                        <li><strong>M=4„ÅÆÂ†¥Âêà:</strong> 4Ë¶ÅÁ¥†„ÅÆ„Åø</li>
                        <li><strong>ÁâπÂæ¥:</strong> ÂÜÜÂΩ¢„Éê„ÉÉ„Éï„Ç°„ÅßÂøÖË¶ÅÊúÄÂ∞èÈôê</li>
                    </ul>
                    <div class="code-block">
                        const M = Math.max(a, b, c); const dp = Array(M).fill(0); dp[0] = 1; for
                        (let i = 1; i <= n; i++) { let ways=0; if (i - a>= 0) ways += dp[(i - a) %
                        M]; if (i - b >= 0) ways += dp[(i - b) % M]; if (i - c >= 0) ways += dp[(i -
                        c) % M]; dp[i % M] = ways; }
                    </div>
                </div>
            </div>

            <h2>üìä „É°„É¢„É™‰ΩøÁî®Èáè„ÅÆÊØîËºÉ</h2>
            <div class="memory-diagram">
                <h3>ÂæìÊù•Ê≥ï„ÅÆ„É°„É¢„É™‰ΩøÁî® (n=10„ÅÆÂ†¥Âêà)</h3>
                <div class="memory-array">
                    <div class="memory-cell traditional">
                        <div>dp[0]<br />1</div>
                    </div>
                    <div class="memory-cell traditional">
                        <div>dp[1]<br />0</div>
                    </div>
                    <div class="memory-cell traditional">
                        <div>dp[2]<br />1</div>
                    </div>
                    <div class="memory-cell traditional">
                        <div>dp[3]<br />1</div>
                    </div>
                    <div class="memory-cell traditional">
                        <div>dp[4]<br />2</div>
                    </div>
                    <div class="memory-cell traditional">
                        <div>dp[5]<br />2</div>
                    </div>
                    <div class="memory-cell traditional">
                        <div>dp[6]<br />4</div>
                    </div>
                    <div class="memory-cell traditional">
                        <div>dp[7]<br />4</div>
                    </div>
                    <div class="memory-cell traditional">
                        <div>dp[8]<br />7</div>
                    </div>
                    <div class="memory-cell traditional">
                        <div>dp[9]<br />8</div>
                    </div>
                    <div class="memory-cell traditional">
                        <div>dp[10]<br />15</div>
                    </div>
                </div>
                <p><strong>„É°„É¢„É™‰ΩøÁî®Èáè: 11Ë¶ÅÁ¥† (44 bytes)</strong></p>

                <h3>ÊúÄÈÅ©ÂåñÊ≥ï„ÅÆ„É°„É¢„É™‰ΩøÁî® (M=4„ÅÆÂ†¥Âêà)</h3>
                <div class="memory-array">
                    <div class="memory-cell optimized">
                        <div>dp[0]<br />ÂãïÁöÑ</div>
                    </div>
                    <div class="memory-cell optimized">
                        <div>dp[1]<br />ÂãïÁöÑ</div>
                    </div>
                    <div class="memory-cell optimized">
                        <div>dp[2]<br />ÂãïÁöÑ</div>
                    </div>
                    <div class="memory-cell optimized">
                        <div>dp[3]<br />ÂãïÁöÑ</div>
                    </div>
                </div>
                <p><strong>„É°„É¢„É™‰ΩøÁî®Èáè: 4Ë¶ÅÁ¥†„ÅÆ„Åø (16 bytes) - 64%ÂâäÊ∏õÔºÅ</strong></p>
            </div>

            <h2>üîÑ ÂÜÜÂΩ¢„Éê„ÉÉ„Éï„Ç°„ÅÆ‰ªïÁµÑ„Åø</h2>
            <div class="step-visualization">
                <div class="step-controls">
                    <button onclick="resetSimulation()">„É™„Çª„ÉÉ„Éà</button>
                    <button id="prevStepBtn" onclick="prevStep()" disabled>Ââç„Å∏</button>
                    <button id="nextStepBtn" onclick="nextStep()">Ê¨°„Å∏</button>
                    <button onclick="autoPlay()">Ëá™ÂãïÂÜçÁîü</button>
                </div>

                <div
                    id="currentStepInfo"
                    style="text-align: center; font-size: 18px; font-weight: bold; margin: 20px 0"
                >
                    „Çπ„ÉÜ„ÉÉ„Éó 1: i=1„ÅÆË®àÁÆó
                </div>

                <div class="circular-buffer" id="circularBuffer">
                    <!-- JavaScript„ÅßÂãïÁöÑÁîüÊàê -->
                </div>

                <div id="calculationDetails" class="calculation-step">
                    <!-- JavaScript „ÅßÊõ¥Êñ∞ -->
                </div>
            </div>

            <h2>üßÆ Êï∞Âºè„Å®„Ç¢„É´„Ç¥„É™„Ç∫„É†</h2>
            <div class="formula-box">
                <strong>ÂÜÜÂΩ¢„Éê„ÉÉ„Éï„Ç°„ÅÆ„Ç§„É≥„Éá„ÉÉ„ÇØ„ÇπË®àÁÆó:</strong><br /><br />
                Ë™≠„ÅøÂèñ„Çä‰ΩçÁΩÆ: (i - step) % M<br />
                Êõ∏„ÅçËæº„Åø‰ΩçÁΩÆ: i % M<br /><br />
                <strong>Áä∂ÊÖãÈÅ∑ÁßªÂºè:</strong><br />
                dp[i % M] = dp[(i-a) % M] + dp[(i-b) % M] + dp[(i-c) % M]
            </div>

            <h2>üìà Ë®àÁÆóÈáè„Å®„Éë„Éï„Ç©„Éº„Éû„É≥„ÇπÊØîËºÉ</h2>
            <table class="complexity-table">
                <thead>
                    <tr>
                        <th>È†ÖÁõÆ</th>
                        <th>ÂæìÊù•„ÅÆDP</th>
                        <th>O(1)ÊúÄÈÅ©ÂåñDP</th>
                        <th>ÊîπÂñÑÁéá</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>ÊôÇÈñìË®àÁÆóÈáè</strong></td>
                        <td>O(n)</td>
                        <td>O(n)</td>
                        <td>ÂêåÁ≠â</td>
                    </tr>
                    <tr>
                        <td><strong>Á©∫ÈñìË®àÁÆóÈáè</strong></td>
                        <td>O(n)</td>
                        <td>O(max(a,b,c))</td>
                        <td><span class="highlight">Â§ßÂπÖÊîπÂñÑ</span></td>
                    </tr>
                    <tr>
                        <td><strong>ÈÖçÂàó„Çµ„Ç§„Ç∫ (n=30)</strong></td>
                        <td>31Ë¶ÅÁ¥†</td>
                        <td>4Ë¶ÅÁ¥†</td>
                        <td>87%ÂâäÊ∏õ</td>
                    </tr>
                    <tr>
                        <td><strong>„É°„É¢„É™‰ΩøÁî®Èáè</strong></td>
                        <td>124 bytes</td>
                        <td>16 bytes</td>
                        <td>87%ÂâäÊ∏õ</td>
                    </tr>
                    <tr>
                        <td><strong>„Ç≠„É£„ÉÉ„Ç∑„É•ÂäπÁéá</strong></td>
                        <td>‰∏≠</td>
                        <td>È´ò</td>
                        <td>Âêë‰∏ä</td>
                    </tr>
                </tbody>
            </table>

            <h2>üí° ÊúÄÈÅ©Âåñ„ÅÆ„Éù„Ç§„É≥„Éà</h2>
            <div class="calculation-step">
                <h3>1. ÂøÖË¶Å„Å™ÊÉÖÂ†±„ÅÆ„Åø‰øùÊåÅ</h3>
                <p>
                    DP„Åß„ÅØÁèæÂú®„ÅÆÊÆµ i „ÇíË®àÁÆó„Åô„Çã„Åü„ÇÅ„Å´„ÄÅ<span class="highlight">i-a, i-b, i-c</span>
                    „ÅÆÂÄ§„ÅÆ„Åø„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ
                    „Åì„Çå„Çà„ÇäÂè§„ÅÑÂÄ§„ÅØ‰∏çË¶Å„Å´„Å™„Çã„Åü„ÇÅ„ÄÅÂÜÜÂΩ¢„Éê„ÉÉ„Éï„Ç°„Åß‰∏äÊõ∏„Åç„Åó„Å¶„ÇÇÂïèÈ°å„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ
                </p>

                <h3>2. „É¢„Ç∏„É•„É≠ÊºîÁÆó„Å´„Çà„ÇãÂæ™Áí∞</h3>
                <p>
                    <code>i % M</code> „Å´„Çà„ÇäÈÖçÂàó„ÅÆ„Ç§„É≥„Éá„ÉÉ„ÇØ„Çπ„ÅåÂæ™Áí∞„Åó„ÄÅ<span class="highlight"
                        >MÂÄã„ÅÆË¶ÅÁ¥†</span
                    >„Åß ÁÑ°Èôê„ÅÆÊÆµÊï∞„Å´ÂØæÂøú„Åß„Åç„Åæ„Åô„ÄÇ
                </p>

                <h3>3. „Ç≠„É£„ÉÉ„Ç∑„É•Â±ÄÊâÄÊÄß„ÅÆÂêë‰∏ä</h3>
                <p>
                    Â∞è„Åï„Å™ÈÖçÂàóÔºà4Ë¶ÅÁ¥†Ôºâ„ÅØCPU„Ç≠„É£„ÉÉ„Ç∑„É•„Å´Âèé„Åæ„Çä„ÇÑ„Åô„Åè„ÄÅ<span class="highlight"
                        >„É°„É¢„É™„Ç¢„ÇØ„Çª„ÇπÈÄüÂ∫¶</span
                    >
                    „ÅåÂêë‰∏ä„Åó„Åæ„Åô„ÄÇ
                </p>
            </div>

            <h2>üîß ÂÆüË£Ö„ÅÆË©≥Á¥∞Ëß£Êûê</h2>
            <div class="algorithm-flow">
                <div class="flow-step">
                    <strong>1. ÂàùÊúüÂåñ</strong><br />
                    M = max(a, b, c) = 4<br />
                    dp = [0, 0, 0, 0], dp[0] = 1
                </div>
                <div class="flow-arrow">‚Üì</div>
                <div class="flow-step">
                    <strong>2. „É´„Éº„ÉóÈñãÂßã</strong><br />
                    for i = 1 to n (i = 1 to 10)
                </div>
                <div class="flow-arrow">‚Üì</div>
                <div class="flow-step">
                    <strong>3. Ââç„ÅÆÂÄ§„ÇíË™≠„ÅøÂèñ„Çä</strong><br />
                    ways += dp[(i-a) % M]<br />
                    ways += dp[(i-b) % M]<br />
                    ways += dp[(i-c) % M]
                </div>
                <div class="flow-arrow">‚Üì</div>
                <div class="flow-step">
                    <strong>4. ÁèæÂú®‰ΩçÁΩÆ„Å´Êõ∏„ÅçËæº„Åø</strong><br />
                    dp[i % M] = ways
                </div>
                <div class="flow-arrow">‚Üì</div>
                <div class="flow-step">
                    <strong>5. ÁµêÊûúÂèñÂæó</strong><br />
                    return dp[n % M]
                </div>
            </div>

            <h2>üìä ÂÆüÈöõ„ÅÆ„Éë„Éï„Ç©„Éº„Éû„É≥„ÇπÊ∏¨ÂÆö</h2>
            <div class="performance-metrics">
                <div class="metric-card">
                    <div class="metric-value">0.123</div>
                    <div class="metric-label">Âá¶ÁêÜÊôÇÈñì (ms)</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">16</div>
                    <div class="metric-label">„É°„É¢„É™‰ΩøÁî®Èáè (bytes)</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">87%</div>
                    <div class="metric-label">„É°„É¢„É™ÂâäÊ∏õÁéá</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">O(1)</div>
                    <div class="metric-label">Á©∫ÈñìË®àÁÆóÈáè</div>
                </div>
            </div>

            <h2>üéØ „Åì„ÅÆÊúÄÈÅ©Âåñ„ÅÆÊÑèÁæ©</h2>
            <div class="calculation-step">
                <h3>Â§ßË¶èÊ®°ÂïèÈ°å„Å∏„ÅÆÈÅ©Áî®ÂèØËÉΩÊÄß</h3>
                <ul>
                    <li><strong>n = 10^6„ÅÆÂ†¥Âêà:</strong> 4MB ‚Üí 16bytes„ÅÆÂâäÊ∏õÔºà99.9996%ÂâäÊ∏õÔºâ</li>
                    <li><strong>ÁµÑ„ÅøËæº„Åø„Ç∑„Çπ„ÉÜ„É†:</strong> Èôê„Çâ„Çå„Åü„É°„É¢„É™Áí∞Â¢É„Åß„ÅÆÂÆüÁî®ÊÄß</li>
                    <li><strong>‰∏¶ÂàóÂá¶ÁêÜ:</strong> Â∞è„Åï„Å™„É°„É¢„É™„Éï„ÉÉ„Éà„Éó„É™„É≥„Éà„Åß‰∏¶ÂàóÂåñ„ÅåÂÆπÊòì</li>
                </ul>

                <h3>„Ç¢„É´„Ç¥„É™„Ç∫„É†Ë®≠Ë®à„ÅÆÊïôË®ì</h3>
                <ul>
                    <li><strong>ÂøÖË¶ÅÊúÄÂ∞èÈôê„ÅÆÂéüÂâá:</strong> Êú¨ÂΩì„Å´ÂøÖË¶Å„Å™ÊÉÖÂ†±„ÅÆ„Åø„Çí‰øùÊåÅ</li>
                    <li><strong>„Éá„Éº„ÇøÊßãÈÄ†„ÅÆÂ∑•Â§´:</strong> ÂÜÜÂΩ¢„Éê„ÉÉ„Éï„Ç°„ÅÆÂäπÊûúÁöÑÊ¥ªÁî®</li>
                    <li>
                        <strong>ÊôÇÈñìvsÁ©∫Èñì„ÅÆ„Éà„É¨„Éº„Éâ„Ç™„Éï:</strong>
                        ÊôÇÈñìË®àÁÆóÈáè„ÇíÁ∂≠ÊåÅ„Åó„Å§„Å§Á©∫Èñì„ÇíÂäáÁöÑÂâäÊ∏õ
                    </li>
                </ul>
            </div>
        </div>

        <script>
            let currentStep = 1;
            let maxSteps = 10;
            const n = 10,
                a = 2,
                b = 3,
                c = 4;
            const M = Math.max(a, b, c);
            let dp = [];
            let stepHistory = [];

            function initializeSimulation() {
                dp = Array(M).fill(0);
                dp[0] = 1;
                stepHistory = [{ step: 0, dp: [...dp], calculation: 'ÂàùÊúüÂåñ: dp[0] = 1' }];

                // „Çπ„ÉÜ„ÉÉ„Éó1„Åã„Çân„Åæ„Åß„ÅÆË®àÁÆóÂ±•Ê≠¥„Çí‰ΩúÊàê
                for (let i = 1; i <= n; i++) {
                    let ways = 0;
                    let calculation = `i=${i}: `;
                    let parts = [];

                    if (i >= a) {
                        ways += dp[(i - a) % M];
                        parts.push(`dp[${(i - a) % M}]=${dp[(i - a) % M]}`);
                    }
                    if (i >= b) {
                        ways += dp[(i - b) % M];
                        parts.push(`dp[${(i - b) % M}]=${dp[(i - b) % M]}`);
                    }
                    if (i >= c) {
                        ways += dp[(i - c) % M];
                        parts.push(`dp[${(i - c) % M}]=${dp[(i - c) % M]}`);
                    }

                    calculation += parts.join(' + ') + ` = ${ways}`;
                    calculation += ` ‚Üí dp[${i % M}] = ${ways}`;

                    dp[i % M] = ways;
                    stepHistory.push({
                        step: i,
                        dp: [...dp],
                        calculation: calculation,
                        readPositions: [
                            i >= a ? (i - a) % M : -1,
                            i >= b ? (i - b) % M : -1,
                            i >= c ? (i - c) % M : -1,
                        ].filter((x) => x >= 0),
                        writePosition: i % M,
                    });
                }

                currentStep = 1;
                updateVisualization();
            }

            function updateVisualization() {
                const buffer = document.getElementById('circularBuffer');
                const stepInfo = document.getElementById('currentStepInfo');
                const details = document.getElementById('calculationDetails');

                // ÁèæÂú®„ÅÆ„Çπ„ÉÜ„ÉÉ„ÉóÊÉÖÂ†±„ÇíÂèñÂæó
                const current = stepHistory[currentStep];

                // „Çπ„ÉÜ„ÉÉ„ÉóÊÉÖÂ†±„ÇíÊõ¥Êñ∞
                if (currentStep === 0) {
                    stepInfo.textContent = '„Çπ„ÉÜ„ÉÉ„Éó 0: ÂàùÊúüÂåñ';
                } else {
                    stepInfo.textContent = `„Çπ„ÉÜ„ÉÉ„Éó ${currentStep}: i=${currentStep}„ÅÆË®àÁÆó`;
                }

                // ÂÜÜÂΩ¢„Éê„ÉÉ„Éï„Ç°„ÇíÊõ¥Êñ∞
                buffer.innerHTML = '';
                for (let i = 0; i < M; i++) {
                    const cell = document.createElement('div');
                    cell.className = 'buffer-cell';

                    // „Çª„É´„ÅÆÁä∂ÊÖã„ÇíÊ±∫ÂÆö
                    if (current.writePosition === i) {
                        cell.classList.add('active');
                    }
                    if (current.readPositions && current.readPositions.includes(i)) {
                        cell.classList.add('reading');
                    }

                    cell.innerHTML = `
                    <div class="buffer-index">[${i}]</div>
                    <div class="buffer-value">${current.dp[i]}</div>
                `;

                    buffer.appendChild(cell);
                }

                // Ë®àÁÆóË©≥Á¥∞„ÇíÊõ¥Êñ∞
                details.innerHTML = `<strong>Ë®àÁÆóË©≥Á¥∞:</strong><br>${current.calculation}`;

                // „Éú„Çø„É≥„ÅÆÁä∂ÊÖã„ÇíÊõ¥Êñ∞
                document.getElementById('prevStepBtn').disabled = currentStep === 0;
                document.getElementById('nextStepBtn').disabled = currentStep === maxSteps;
            }

            function nextStep() {
                if (currentStep < maxSteps) {
                    currentStep++;
                    updateVisualization();
                }
            }

            function prevStep() {
                if (currentStep > 0) {
                    currentStep--;
                    updateVisualization();
                }
            }

            function resetSimulation() {
                currentStep = 0;
                updateVisualization();
            }

            function autoPlay() {
                const interval = setInterval(() => {
                    if (currentStep < maxSteps) {
                        nextStep();
                    } else {
                        clearInterval(interval);
                    }
                }, 1500);
            }

            // ÂàùÊúüÂåñ
            initializeSimulation();
        </script>
    </body>
</html>
