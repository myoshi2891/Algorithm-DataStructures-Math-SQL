<!doctype html>
<html lang="ja">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>BITÊú®ÊßãÈÄ†„ÅÆË©≥Á¥∞Ëß£Êûê</title>
        <style>
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                margin: 0;
                padding: 20px;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: #333;
                min-height: 100vh;
            }

            .container {
                max-width: 1200px;
                margin: 0 auto;
                background: rgba(255, 255, 255, 0.95);
                border-radius: 20px;
                padding: 30px;
                box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            }

            h1 {
                text-align: center;
                color: #2c3e50;
                margin-bottom: 30px;
                font-size: 2.5em;
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            }

            h2 {
                color: #34495e;
                border-bottom: 3px solid #3498db;
                padding-bottom: 10px;
                margin-top: 40px;
            }

            h3 {
                color: #2980b9;
                margin-top: 30px;
            }

            .tree-container {
                display: flex;
                justify-content: center;
                margin: 30px 0;
                background: #f8f9fa;
                padding: 20px;
                border-radius: 15px;
                box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.1);
                overflow-x: auto;
            }

            .tree {
                position: relative;
                width: 900px;
                height: 300px;
            }

            .node {
                position: absolute;
                width: 40px;
                height: 40px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                font-weight: bold;
                color: white;
                font-size: 14px;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
                transition: all 0.3s ease;
                cursor: pointer;
            }

            .node:hover {
                transform: scale(1.2);
                z-index: 10;
            }

            .node.root {
                background: #e74c3c;
            }

            .node.level1 {
                background: #3498db;
            }

            .node.level2 {
                background: #2ecc71;
            }

            .node.level3 {
                background: #f39c12;
            }

            .svg-node {
                transition: all 0.3s ease;
            }

            .svg-node:hover {
                filter: brightness(1.2) drop-shadow(0 0 10px rgba(255, 255, 255, 0.8));
            }

            .svg-highlighted {
                filter: brightness(1.3) drop-shadow(0 0 15px rgba(255, 107, 107, 0.8));
                animation: svgPulse 2s infinite;
            }

            @keyframes svgPulse {
                0% {
                    filter: brightness(1.3) drop-shadow(0 0 15px rgba(255, 107, 107, 0.8));
                }

                50% {
                    filter: brightness(1.5) drop-shadow(0 0 20px rgba(255, 107, 107, 1));
                }

                100% {
                    filter: brightness(1.3) drop-shadow(0 0 15px rgba(255, 107, 107, 0.8));
                }
            }

            .edge {
                position: absolute;
                background: #34495e;
                height: 2px;
                border-radius: 1px;
                z-index: 1;
            }

            .code-block {
                background: #2c3e50;
                color: #ecf0f1;
                padding: 20px;
                border-radius: 10px;
                font-family: 'Courier New', monospace;
                margin: 20px 0;
                overflow-x: auto;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
                font-size: 14px;
            }

            .example {
                background: #ecf0f1;
                padding: 20px;
                border-left: 5px solid #3498db;
                margin: 20px 0;
                border-radius: 0 10px 10px 0;
            }

            .step {
                background: linear-gradient(45deg, #74b9ff, #0984e3);
                color: #ffffff;
                padding: 15px;
                margin: 10px 0;
                border-radius: 10px;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            }

            .step strong {
                color: #ffffff;
                text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
            }

            .bit-explanation {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 20px;
                margin: 20px 0;
            }

            .bit-card {
                background: linear-gradient(135deg, #667eea, #764ba2);
                color: #ffffff !important;
                padding: 20px;
                border-radius: 15px;
                box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
            }

            .bit-card h4 {
                color: #ffffff !important;
                margin-top: 0;
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
                font-weight: bold;
            }

            .bit-card p {
                color: #ffffff !important;
                text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.4);
                font-weight: 500;
            }

            .bit-card strong {
                color: #ffeb3b !important;
                text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.6);
                font-weight: bold;
            }

            .formula {
                background: #ffffff !important;
                border: 3px solid #3498db;
                padding: 20px;
                text-align: center;
                font-family: 'Times New Roman', serif;
                font-size: 20px;
                margin: 15px 0;
                border-radius: 10px;
                font-weight: bold;
                color: #2c3e50 !important;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            }

            .interactive-demo {
                background: #fff;
                border: 2px solid #3498db;
                border-radius: 15px;
                padding: 20px;
                margin: 20px 0;
            }

            .demo-input {
                padding: 10px;
                border: 2px solid #bdc3c7;
                border-radius: 5px;
                margin: 5px;
                font-size: 16px;
                width: 80px;
            }

            .demo-button {
                background: #3498db;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 16px;
                margin: 5px;
                transition: background 0.3s ease;
            }

            .demo-button:hover {
                background: #2980b9;
            }

            .path-visualization {
                display: flex;
                align-items: center;
                justify-content: center;
                margin: 20px 0;
                flex-wrap: wrap;
            }

            .path-node {
                background: #3498db;
                color: #ffffff;
                padding: 8px 12px;
                margin: 3px;
                border-radius: 20px;
                font-weight: bold;
                min-width: 20px;
                text-align: center;
                text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.2);
            }

            .path-arrow {
                font-size: 20px;
                color: #e74c3c;
                margin: 0 5px;
                font-weight: bold;
            }

            .calculation-step {
                background: #f8f9fa;
                border: 2px solid #e9ecef;
                padding: 15px;
                margin: 10px 0;
                border-radius: 8px;
                font-family: monospace;
                color: #2c3e50;
                line-height: 1.8;
            }

            .calculation-step strong {
                color: #e74c3c;
                font-weight: bold;
            }

            .binary-display {
                background: #2c3e50;
                color: #1abc9c;
                padding: 15px;
                border-radius: 8px;
                font-family: 'Courier New', monospace;
                margin: 10px 0;
                border: 2px solid #34495e;
                font-size: 14px;
                line-height: 1.6;
                text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.5);
            }
        </style>
    </head>

    <body>
        <div class="container">
            <h1>üå≥ BITÊú®ÊßãÈÄ†„ÅÆË©≥Á¥∞Ëß£Êûê</h1>

            <h2>1. BITÔºàBinary Indexed TreeÔºâ„ÅÆÂü∫Êú¨ÊßãÈÄ†</h2>

            <div class="example">
                <strong>BIT„Å®„ÅØÔºü</strong><br />
                Binary Indexed
                TreeÔºà„Éï„Çß„É≥„Ç¶„Ç£„ÉÉ„ÇØÊú®Ôºâ„ÅØ„ÄÅÈÖçÂàó„ÅÆË¶ÅÁ¥†„Å´ÂØæ„Åô„Çã<strong>‰∏ÄÁÇπÊõ¥Êñ∞</strong>„Å®<strong>Âå∫ÈñìÂíå„ÇØ„Ç®„É™</strong>„ÇíÂäπÁéáÁöÑ„Å´Âá¶ÁêÜ„Åô„Çã„Éá„Éº„ÇøÊßãÈÄ†„Åß„Åô„ÄÇ
                ÂêÑ„Éé„Éº„Éâ„ÅØÁâπÂÆö„ÅÆÁØÑÂõ≤„ÅÆÂíå„Çí‰øùÊåÅ„Åó„ÄÅÊú®ÊßãÈÄ†„Å´„Çà„ÇäÈ´òÈÄü„Å™Êìç‰Ωú„ÅåÂèØËÉΩ„Å´„Å™„Çä„Åæ„Åô„ÄÇ
            </div>

            <h3>1.1 ÈÖçÂàó„Åã„ÇâBITÊú®„Å∏„ÅÆÂ§âÊèõÈÅéÁ®ãÔºàn=8„ÅÆÂ†¥ÂêàÔºâ</h3>

            <div class="tree-container">
                <svg width="800" height="350" viewBox="0 0 800 350">
                    <!-- ÂÆöÁæ©„Çª„ÇØ„Ç∑„Éß„É≥ -->
                    <defs>
                        <marker
                            id="arrowhead"
                            markerWidth="10"
                            markerHeight="7"
                            refX="10"
                            refY="3.5"
                            orient="auto"
                        >
                            <polygon points="0 0, 10 3.5, 0 7" fill="#34495e" />
                        </marker>
                    </defs>

                    <!-- „Ç®„ÉÉ„Ç∏ÔºàÁ∑öÔºâ -->
                    <!-- Ê†π„Åã„ÇâÁ¨¨1„É¨„Éô„É´„Å∏ -->
                    <line
                        x1="400"
                        y1="50"
                        x2="200"
                        y2="120"
                        stroke="#34495e"
                        stroke-width="2"
                        marker-end="url(#arrowhead)"
                    />
                    <line
                        x1="400"
                        y1="50"
                        x2="320"
                        y2="120"
                        stroke="#34495e"
                        stroke-width="2"
                        marker-end="url(#arrowhead)"
                    />
                    <line
                        x1="400"
                        y1="50"
                        x2="480"
                        y2="120"
                        stroke="#34495e"
                        stroke-width="2"
                        marker-end="url(#arrowhead)"
                    />
                    <line
                        x1="400"
                        y1="50"
                        x2="600"
                        y2="120"
                        stroke="#34495e"
                        stroke-width="2"
                        marker-end="url(#arrowhead)"
                    />

                    <!-- Á¨¨1„É¨„Éô„É´„Åã„ÇâÁ¨¨2„É¨„Éô„É´„Å∏ -->
                    <line
                        x1="200"
                        y1="150"
                        x2="120"
                        y2="220"
                        stroke="#34495e"
                        stroke-width="2"
                        marker-end="url(#arrowhead)"
                    />
                    <line
                        x1="320"
                        y1="150"
                        x2="280"
                        y2="220"
                        stroke="#34495e"
                        stroke-width="2"
                        marker-end="url(#arrowhead)"
                    />
                    <line
                        x1="480"
                        y1="150"
                        x2="440"
                        y2="220"
                        stroke="#34495e"
                        stroke-width="2"
                        marker-end="url(#arrowhead)"
                    />
                    <line
                        x1="600"
                        y1="150"
                        x2="560"
                        y2="220"
                        stroke="#34495e"
                        stroke-width="2"
                        marker-end="url(#arrowhead)"
                    />

                    <!-- „Éé„Éº„Éâ -->
                    <!-- Ê†π„Éé„Éº„Éâ -->
                    <circle
                        cx="400"
                        cy="50"
                        r="25"
                        fill="#e74c3c"
                        stroke="white"
                        stroke-width="3"
                        onclick="highlightPath(0)"
                        style="cursor: pointer"
                        class="svg-node"
                        data-vertex="0"
                    />
                    <text
                        x="400"
                        y="57"
                        text-anchor="middle"
                        fill="white"
                        font-weight="bold"
                        font-size="16"
                    >
                        0
                    </text>

                    <!-- Á¨¨1„É¨„Éô„É´ -->
                    <circle
                        cx="200"
                        cy="140"
                        r="25"
                        fill="#3498db"
                        stroke="white"
                        stroke-width="3"
                        onclick="highlightPath(2)"
                        style="cursor: pointer"
                        class="svg-node"
                        data-vertex="2"
                    />
                    <text
                        x="200"
                        y="147"
                        text-anchor="middle"
                        fill="white"
                        font-weight="bold"
                        font-size="16"
                    >
                        2
                    </text>

                    <circle
                        cx="320"
                        cy="140"
                        r="25"
                        fill="#3498db"
                        stroke="white"
                        stroke-width="3"
                        onclick="highlightPath(4)"
                        style="cursor: pointer"
                        class="svg-node"
                        data-vertex="4"
                    />
                    <text
                        x="320"
                        y="147"
                        text-anchor="middle"
                        fill="white"
                        font-weight="bold"
                        font-size="16"
                    >
                        4
                    </text>

                    <circle
                        cx="480"
                        cy="140"
                        r="25"
                        fill="#3498db"
                        stroke="white"
                        stroke-width="3"
                        onclick="highlightPath(6)"
                        style="cursor: pointer"
                        class="svg-node"
                        data-vertex="6"
                    />
                    <text
                        x="480"
                        y="147"
                        text-anchor="middle"
                        fill="white"
                        font-weight="bold"
                        font-size="16"
                    >
                        6
                    </text>

                    <circle
                        cx="600"
                        cy="140"
                        r="25"
                        fill="#3498db"
                        stroke="white"
                        stroke-width="3"
                        onclick="highlightPath(8)"
                        style="cursor: pointer"
                        class="svg-node"
                        data-vertex="8"
                    />
                    <text
                        x="600"
                        y="147"
                        text-anchor="middle"
                        fill="white"
                        font-weight="bold"
                        font-size="16"
                    >
                        8
                    </text>

                    <!-- Á¨¨2„É¨„Éô„É´ÔºàËëâ„Éé„Éº„ÉâÔºâ -->
                    <circle
                        cx="120"
                        cy="230"
                        r="25"
                        fill="#2ecc71"
                        stroke="white"
                        stroke-width="3"
                        onclick="highlightPath(1)"
                        style="cursor: pointer"
                        class="svg-node"
                        data-vertex="1"
                    />
                    <text
                        x="120"
                        y="237"
                        text-anchor="middle"
                        fill="white"
                        font-weight="bold"
                        font-size="16"
                    >
                        1
                    </text>

                    <circle
                        cx="280"
                        cy="230"
                        r="25"
                        fill="#2ecc71"
                        stroke="white"
                        stroke-width="3"
                        onclick="highlightPath(3)"
                        style="cursor: pointer"
                        class="svg-node"
                        data-vertex="3"
                    />
                    <text
                        x="280"
                        y="237"
                        text-anchor="middle"
                        fill="white"
                        font-weight="bold"
                        font-size="16"
                    >
                        3
                    </text>

                    <circle
                        cx="440"
                        cy="230"
                        r="25"
                        fill="#2ecc71"
                        stroke="white"
                        stroke-width="3"
                        onclick="highlightPath(5)"
                        style="cursor: pointer"
                        class="svg-node"
                        data-vertex="5"
                    />
                    <text
                        x="440"
                        y="237"
                        text-anchor="middle"
                        fill="white"
                        font-weight="bold"
                        font-size="16"
                    >
                        5
                    </text>

                    <circle
                        cx="560"
                        cy="230"
                        r="25"
                        fill="#2ecc71"
                        stroke="white"
                        stroke-width="3"
                        onclick="highlightPath(7)"
                        style="cursor: pointer"
                        class="svg-node"
                        data-vertex="7"
                    />
                    <text
                        x="560"
                        y="237"
                        text-anchor="middle"
                        fill="white"
                        font-weight="bold"
                        font-size="16"
                    >
                        7
                    </text>

                    <!-- „É¨„Éô„É´Ë°®Á§∫ -->
                    <text x="50" y="60" fill="#666" font-size="14" font-weight="bold">Ê†π</text>
                    <text x="50" y="150" fill="#666" font-size="14" font-weight="bold">
                        „É¨„Éô„É´1
                    </text>
                    <text x="50" y="240" fill="#666" font-size="14" font-weight="bold">
                        „É¨„Éô„É´2
                    </text>

                    <!-- Ë™¨Êòé„ÉÜ„Ç≠„Çπ„Éà -->
                    <text x="650" y="80" fill="#333" font-size="12">
                        <tspan x="650" dy="0">Ë¶™Â≠êÈñ¢‰øÇ:</tspan>
                        <tspan x="650" dy="20">1 ‚Üí 2 ‚Üí 4 ‚Üí 8 ‚Üí 0</tspan>
                        <tspan x="650" dy="20">3 ‚Üí 4 ‚Üí 8 ‚Üí 0</tspan>
                        <tspan x="650" dy="20">5 ‚Üí 6 ‚Üí 8 ‚Üí 0</tspan>
                        <tspan x="650" dy="20">7 ‚Üí 8 ‚Üí 0</tspan>
                    </text>
                </svg>
            </div>

            <div style="text-align: center; margin: 20px 0">
                <p style="color: #666; margin: 10px 0">
                    üí° ÂêÑ„Éé„Éº„Éâ„Çí„ÇØ„É™„ÉÉ„ÇØ„Åô„Çã„Å®„ÄÅ„Åù„ÅÆ„Éé„Éº„Éâ„Åã„ÇâÊ†π„Åæ„Åß„ÅÆ„Éë„Çπ„Åå„Éè„Ç§„É©„Ç§„Éà„Åï„Çå„Åæ„Åô
                </p>
                <div style="display: flex; justify-content: center; gap: 20px; flex-wrap: wrap">
                    <div style="display: flex; align-items: center; gap: 5px">
                        <div
                            style="
                                width: 20px;
                                height: 20px;
                                border-radius: 50%;
                                background: #e74c3c;
                            "
                        ></div>
                        <span>Ê†π„Éé„Éº„Éâ</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 5px">
                        <div
                            style="
                                width: 20px;
                                height: 20px;
                                border-radius: 50%;
                                background: #3498db;
                            "
                        ></div>
                        <span>‰∏≠Èñì„Éé„Éº„Éâ</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 5px">
                        <div
                            style="
                                width: 20px;
                                height: 20px;
                                border-radius: 50%;
                                background: #2ecc71;
                            "
                        ></div>
                        <span>Ëëâ„Éé„Éº„Éâ</span>
                    </div>
                </div>
            </div>

            <h3>1.2 Ë¶™Â≠êÈñ¢‰øÇ„ÅÆÊï∞Â≠¶ÁöÑËß£Êûê</h3>

            <div class="bit-explanation">
                <div class="bit-card">
                    <h4>üî¢ „Éì„ÉÉ„ÉàÊºîÁÆó„ÅÆÊ†∏ÂøÉ</h4>
                    <div class="formula">Ë¶™ = i + (i & -i)</div>
                    <p><strong>i & -i</strong> „ÅØ„Äåi„ÅÆÊúÄ‰∏ã‰Ωç„ÅÆ1„Éì„ÉÉ„Éà„Äç„ÇíÂèñÂæó„Åô„ÇãÊºîÁÆó„Åß„Åô</p>
                    <div class="binary-display">
                        ‰æã: 6 & -6 = 010‚ÇÇ = 2<br />
                        6 = 110‚ÇÇ, -6 = 010‚ÇÇ, 6&-6 = 010‚ÇÇ = 2
                    </div>
                </div>

                <div class="bit-card">
                    <h4>üéØ 2„ÅÆË£úÊï∞„Å´„Çà„ÇãË®àÁÆó</h4>
                    <div class="code-block">
                        Êï∞ÂÄ§ 5 „ÅÆÂ†¥Âêà: 5 = 101‚ÇÇ (binary) -5 = 011‚ÇÇ (2„ÅÆË£úÊï∞) 5 & -5 = 001‚ÇÇ = 1 Ë¶™ =
                        5 + 1 = 6
                    </div>
                </div>
            </div>

            <h2>2. ÊúÄÁü≠„Éë„ÇπÊé¢Á¥¢„Ç¢„É´„Ç¥„É™„Ç∫„É†„ÅÆË©≥Á¥∞</h2>

            <h3>2.1 „Ç§„É≥„Çø„É©„ÇØ„ÉÜ„Ç£„Éñ„Éë„ÇπË®àÁÆó</h3>

            <div class="interactive-demo">
                <h4>üîç „Éë„ÇπË®àÁÆó„Éá„É¢</h4>
                <div style="margin: 15px 0">
                    <label>ÈÖçÂàó„Çµ„Ç§„Ç∫ n: </label>
                    <input
                        type="number"
                        id="array-size"
                        class="demo-input"
                        value="8"
                        min="1"
                        max="20"
                    />
                    <label>ÈñãÂßãÈ†ÇÁÇπ: </label>
                    <input type="number" id="start-vertex" class="demo-input" value="3" min="1" />
                    <button class="demo-button" onclick="calculatePath()">„Éë„Çπ„ÇíË®àÁÆó</button>
                    <button class="demo-button" onclick="showAllPaths()">ÂÖ®„Éë„ÇπË°®Á§∫</button>
                </div>

                <div id="path-result"></div>
                <div id="step-by-step"></div>
            </div>

            <h3>2.2 ÂÖ∏ÂûãÁöÑ„Å™„Éë„ÇπÊé¢Á¥¢‰æã</h3>

            <div class="step">
                <strong>‰æã1: È†ÇÁÇπ1„Åã„Çâ„ÅÆ„Éë„Çπ (n=8)</strong>
                <div class="path-visualization">
                    <div class="path-node">1</div>
                    <div class="path-arrow">‚Üí</div>
                    <div class="path-node">2</div>
                    <div class="path-arrow">‚Üí</div>
                    <div class="path-node">4</div>
                    <div class="path-arrow">‚Üí</div>
                    <div class="path-node">8</div>
                    <div class="path-arrow">‚Üí</div>
                    <div class="path-node">0</div>
                </div>
                <div class="calculation-step">
                    <strong>Ë®àÁÆóÈÅéÁ®ã:</strong><br />
                    1: 1 & -1 = 1, Ë¶™ = 1 + 1 = 2<br />
                    2: 2 & -2 = 2, Ë¶™ = 2 + 2 = 4<br />
                    4: 4 & -4 = 4, Ë¶™ = 4 + 4 = 8<br />
                    8: 8 > n=8, Ê†π(0)Âà∞ÈÅî
                </div>
            </div>

            <div class="step">
                <strong>‰æã2: È†ÇÁÇπ5„Åã„Çâ„ÅÆ„Éë„Çπ (n=8)</strong>
                <div class="path-visualization">
                    <div class="path-node">5</div>
                    <div class="path-arrow">‚Üí</div>
                    <div class="path-node">6</div>
                    <div class="path-arrow">‚Üí</div>
                    <div class="path-node">8</div>
                    <div class="path-arrow">‚Üí</div>
                    <div class="path-node">0</div>
                </div>
                <div class="calculation-step">
                    <strong>Ë®àÁÆóÈÅéÁ®ã:</strong><br />
                    5: 5 & -5 = 1, Ë¶™ = 5 + 1 = 6<br />
                    6: 6 & -6 = 2, Ë¶™ = 6 + 2 = 8<br />
                    8: 8 > n=8, Ê†π(0)Âà∞ÈÅî
                </div>
            </div>

            <h2>3. „Ç¢„É´„Ç¥„É™„Ç∫„É†„ÅÆË®àÁÆóÈáèËß£Êûê</h2>

            <div class="bit-explanation">
                <div class="bit-card">
                    <h4>‚è±Ô∏è ÊôÇÈñìË®àÁÆóÈáè</h4>
                    <div class="formula">O(log n) per query</div>
                    <p>
                        ÂêÑÈ†ÇÁÇπ„Åã„ÇâÊ†π„Åæ„Åß„ÅÆË∑ùÈõ¢„ÅØÊúÄÂ§ß„Åßlog‚ÇÇ(n)„Åß„Åô„ÄÇ„Åì„Çå„ÅØÊï∞ÂÄ§„ÅÆ2ÈÄ≤Ë°®Áèæ„ÅÆ„Éì„ÉÉ„ÉàÊï∞„Å´ÂØæÂøú„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ
                    </p>
                </div>

                <div class="bit-card">
                    <h4>üíæ Á©∫ÈñìË®àÁÆóÈáè</h4>
                    <div class="formula">O(log n)</div>
                    <p>„Éë„Çπ„ÅÆÈï∑„Åï„ÅåÊúÄÂ§ßlog‚ÇÇ(n) + 1„Å™„ÅÆ„Åß„ÄÅÊ†ºÁ¥ç„Å´ÂøÖË¶Å„Å™Á©∫Èñì„ÇÇÂêåÁ®ãÂ∫¶„Åß„Åô„ÄÇ</p>
                </div>
            </div>

            <h2>4. ÂÆüË£Ö„Ç≥„Éº„Éâ„ÅÆË©≥Á¥∞Ëß£Ë™¨</h2>

            <div class="code-block">
                def find_path_to_root(n: int, start_vertex: int) -> List[int]: path: List[int] = []
                # „Éë„Çπ„ÇíÊ†ºÁ¥ç„Åô„Çã„É™„Çπ„Éà current: int = start_vertex # ÁèæÂú®„ÅÆÈ†ÇÁÇπ while current != 0:
                # Ê†π„Å´Âà∞ÈÅî„Åô„Çã„Åæ„Åß„É´„Éº„Éó path.append(current) # ÁèæÂú®„ÅÆÈ†ÇÁÇπ„Çí„Éë„Çπ„Å´ËøΩÂä† #
                Ë¶™„ÅÆË®àÁÆóÔºöÊúÄ‰∏ã‰Ωç„Éì„ÉÉ„Éà„ÇíÂä†ÁÆó parent: int = current + (current & -current) if parent
                > n: # Ë¶™„ÅånË∂ÖÈÅé„Å™„ÇâÊ†πÂà∞ÈÅî current = 0 else: current = parent path.append(0) #
                Ê†π(0)„ÇíËøΩÂä† return path
            </div>

            <h2>5. BITÊú®ÊßãÈÄ†„ÅÆÂà©ÁÇπ</h2>

            <div class="example">
                <strong>„Å™„ÅúBIT„ÅåÂäπÁéáÁöÑ„Å™„ÅÆ„ÅãÔºü</strong><br />
                1. <strong>„Éê„É©„É≥„ÇπÊÄß</strong>: ÂÆåÂÖ®„Å´Âπ≥Ë°°„Å™Êú®ÊßãÈÄ†„Å´„Çà„ÇäÂÆâÂÆö„Åó„ÅüÊÄßËÉΩ<br />
                2. <strong>Â±ÄÊâÄÊÄß</strong>: Êõ¥Êñ∞ÊôÇ„Å´ÂΩ±Èüø„Åô„ÇãÈ†ÇÁÇπ„ÅåÂØæÊï∞ÂÄã„Å´ÈôêÂÆö<br />
                3. <strong>„Éì„ÉÉ„ÉàÊºîÁÆó</strong>: È´òÈÄü„Å™Ë¶™Â≠êÈñ¢‰øÇ„ÅÆË®àÁÆó„ÅåÂèØËÉΩ<br />
                4. <strong>„É°„É¢„É™ÂäπÁéá</strong>: ÈÖçÂàó„Éô„Éº„Çπ„ÅÆÂÆüË£Ö„Åß„Ç≠„É£„ÉÉ„Ç∑„É•ÂäπÁéá„ÅåËâØ„ÅÑ
            </div>

            <div class="step">
                <strong>üéâ „Åæ„Å®„ÇÅ</strong><br />
                BIT„ÅÆÊú®ÊßãÈÄ†„Å´„Åä„Åë„ÇãÊúÄÁü≠„Éë„ÇπÊé¢Á¥¢„ÅØ„ÄÅ„Éì„ÉÉ„ÉàÊºîÁÆó„ÇíÂ∑ßÂ¶ô„Å´Ê¥ªÁî®„Åô„Çã„Åì„Å®„ÅßÂØæÊï∞ÊôÇÈñì„Åß„ÅÆÂäπÁéáÁöÑ„Å™ÂÆüË°å„ÇíÂÆüÁèæ„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ
                „Åì„ÅÆÁêÜËß£„Å´„Çà„Çä„ÄÅ„Çà„ÇäÈ´òÂ∫¶„Å™„Éá„Éº„ÇøÊßãÈÄ†„ÇÑ„Ç¢„É´„Ç¥„É™„Ç∫„É†„Å∏„ÅÆÂøúÁî®„ÇÇÂèØËÉΩ„Å´„Å™„Çä„Åæ„Åô„ÄÇ
            </div>
        </div>

        <script>
            // „Ç∞„É≠„Éº„Éê„É´Â§âÊï∞„Åß„Éè„Ç§„É©„Ç§„ÉàÁä∂ÊÖã„ÇíÁÆ°ÁêÜ
            let highlightedNodes = [];

            function highlightPath(startVertex) {
                // Êó¢Â≠ò„ÅÆ„Éè„Ç§„É©„Ç§„Éà„Çí„ÇØ„É™„Ç¢
                clearHighlights();

                if (startVertex === 0) {
                    // Ê†π„ÅÆÂ†¥Âêà„ÅØÊ†π„ÅÆ„Åø„Éè„Ç§„É©„Ç§„Éà
                    const rootNode = document.querySelector('[data-vertex="0"]');
                    if (rootNode) rootNode.classList.add('svg-highlighted');
                    highlightedNodes.push(rootNode);
                    return;
                }

                const n = 8; // „Éá„É¢Áî®„ÅÆÂõ∫ÂÆöÂÄ§
                const path = [];
                let current = startVertex;

                while (current !== 0) {
                    path.push(current);
                    const parent = current + (current & -current);
                    if (parent > n) {
                        current = 0;
                    } else {
                        current = parent;
                    }
                }
                path.push(0);

                // „Éë„Çπ‰∏ä„ÅÆ„Éé„Éº„Éâ„Çí„Éè„Ç§„É©„Ç§„Éà
                path.forEach((vertex) => {
                    const node = document.querySelector(`[data-vertex="${vertex}"]`);
                    if (node) {
                        node.classList.add('svg-highlighted');
                        highlightedNodes.push(node);
                    }
                });
            }

            function clearHighlights() {
                highlightedNodes.forEach((node) => {
                    node.classList.remove('svg-highlighted');
                });
                highlightedNodes = [];
            }

            function calculatePath() {
                const n = parseInt(document.getElementById('array-size').value);
                const start = parseInt(document.getElementById('start-vertex').value);

                if (isNaN(n) || isNaN(start) || start > n || start < 1) {
                    document.getElementById('path-result').innerHTML =
                        '<div style="color: red; padding: 10px;">„Ç®„É©„Éº: ÊúâÂäπ„Å™ÂÄ§„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºàÈñãÂßãÈ†ÇÁÇπ„ÅØ1„Åã„Çân„ÅÆÁØÑÂõ≤Ôºâ</div>';
                    return;
                }

                const path = [];
                const steps = [];
                let current = start;
                let stepCount = 1;

                while (current !== 0) {
                    path.push(current);
                    const lowbit = current & -current;
                    const parent = current + lowbit;

                    steps.push(`
                    <div class="calculation-step">
                        <strong>„Çπ„ÉÜ„ÉÉ„Éó${stepCount}:</strong> È†ÇÁÇπ${current}<br>
                        ${current} & -${current} = ${lowbit} (2ÈÄ≤Êï∞: ${lowbit.toString(2)})<br>  
                        Ë¶™ = ${current} + ${lowbit} = ${parent}
                        ${parent > n ? ' ‚Üí n=' + n + '„ÇíË∂ÖÈÅé„ÅÆ„Åü„ÇÅÊ†π(0)Âà∞ÈÅî' : ''}
                    </div>
                `);

                    stepCount++;

                    if (parent > n) {
                        current = 0;
                    } else {
                        current = parent;
                    }
                }

                path.push(0);

                document.getElementById('path-result').innerHTML = `
                <h4>üéØ Ë®àÁÆóÁµêÊûú:</h4>
                <div class="path-visualization">
                    ${path
                        .map(
                            (node, index) =>
                                `<div class="path-node">${node}</div>${index < path.length - 1 ? '<div class="path-arrow">‚Üí</div>' : ''}`,
                        )
                        .join('')}
                </div>
                <p><strong>„Éë„ÇπÈï∑:</strong> ${path.length}ÂÄã„ÅÆÈ†ÇÁÇπ</p>
                <p><strong>„Éë„ÇπÈÖçÂàó:</strong> [${path.join(', ')}]</p>
            `;

                document.getElementById('step-by-step').innerHTML = `
                <h4>üìä ÊÆµÈöéÁöÑË®àÁÆóÈÅéÁ®ã:</h4>
                ${steps.join('')}
            `;
            }

            function showAllPaths() {
                const n = parseInt(document.getElementById('array-size').value);

                if (isNaN(n) || n < 1 || n > 20) {
                    document.getElementById('path-result').innerHTML =
                        '<div style="color: red; padding: 10px;">„Ç®„É©„Éº: n„ÅØ1„Åã„Çâ20„ÅÆÁØÑÂõ≤„ÅßÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ</div>';
                    return;
                }

                let allPathsHtml = '<h4>üåê ÂÖ®È†ÇÁÇπ„ÅÆ„Éë„Çπ‰∏ÄË¶ß:</h4>';

                for (let i = 1; i <= n; i++) {
                    const path = [];
                    let current = i;

                    while (current !== 0) {
                        path.push(current);
                        const parent = current + (current & -current);
                        if (parent > n) {
                            current = 0;
                        } else {
                            current = parent;
                        }
                    }
                    path.push(0);

                    allPathsHtml += `
                    <div class="calculation-step">
                        <strong>È†ÇÁÇπ${i}:</strong> 
                        <div class="path-visualization" style="justify-content: flex-start;">
                            ${path
                                .map(
                                    (node, index) =>
                                        `<div class="path-node" style="font-size: 12px; padding: 4px 8px;">${node}</div>${index < path.length - 1 ? '<div class="path-arrow" style="font-size: 16px;">‚Üí</div>' : ''}`,
                                )
                                .join('')}
                        </div>
                        Èï∑„Åï: ${path.length}
                    </div>
                `;
                }

                document.getElementById('path-result').innerHTML = allPathsHtml;
                document.getElementById('step-by-step').innerHTML = '';
            }

            // ÂàùÊúüË®àÁÆó„ÇíÂÆüË°å
            document.addEventListener('DOMContentLoaded', function () {
                calculatePath();
            });
        </script>
    </body>
</html>
