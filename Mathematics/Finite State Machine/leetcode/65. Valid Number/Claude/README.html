<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Valid Number Problem - æœ‰é™çŠ¶æ…‹æ©Ÿæ¢°ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ è§£èª¬</title>

    <!-- CDN -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- Prism.js - æ­£ã—ã„èª­ã¿è¾¼ã¿é †åº -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>

    <style>
      /* Base styles */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      :root {
        --primary-bg: #0a0a0a;
        --secondary-bg: #1a1a1a;
        --card-bg: #252525;
        --accent-color: #00d4ff;
        --text-primary: #ffffff;
        --text-secondary: #a0a0a0;
        --border-color: #333;
        --success-color: #00ff88;
        --warning-color: #ffaa00;
        --error-color: #ff4444;
        --gradient-1: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        --gradient-2: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        --gradient-3: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      }

      body {
        font-family: "Inter", -apple-system, BlinkMacSystemFont, sans-serif;
        background: var(--primary-bg);
        color: var(--text-primary);
        line-height: 1.6;
        overflow-x: hidden;
      }

      /* Header */
      .header {
        background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
        padding: 3rem 2rem;
        text-align: center;
        position: relative;
        overflow: hidden;
      }

      .header::before {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(
          circle,
          rgba(255, 255, 255, 0.1) 0%,
          transparent 70%
        );
        animation: rotate 20s linear infinite;
      }

      .header h1 {
        font-size: 3.5rem;
        font-weight: 900;
        margin-bottom: 1rem;
        position: relative;
        z-index: 2;
        text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
      }

      .header .subtitle {
        font-size: 1.3rem;
        opacity: 0.9;
        position: relative;
        z-index: 2;
      }

      .algorithm-badge {
        display: inline-block;
        background: var(--gradient-3);
        padding: 0.5rem 2rem;
        border-radius: 50px;
        font-weight: bold;
        margin-top: 1rem;
        position: relative;
        z-index: 2;
      }

      /* Main container */
      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 2rem;
      }

      /* Cards */
      .card {
        background: var(--card-bg);
        border-radius: 20px;
        padding: 2rem;
        margin: 2rem 0;
        border: 1px solid var(--border-color);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 2px;
        background: var(--gradient-1);
      }

      .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 20px 50px rgba(0, 0, 0, 0.4);
      }

      .card h2 {
        font-size: 2rem;
        margin-bottom: 1.5rem;
        background: var(--gradient-1);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        display: flex;
        align-items: center;
        gap: 1rem;
      }

      .card h3 {
        font-size: 1.5rem;
        margin: 1.5rem 0 1rem 0;
        color: var(--accent-color);
      }

      /* State Machine Visualization */
      .fsm-container {
        background: var(--secondary-bg);
        border-radius: 15px;
        padding: 2rem;
        margin: 2rem 0;
        text-align: center;
        position: relative;
      }

      .states-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 1.5rem;
        margin: 2rem 0;
      }

      .state-node {
        background: var(--card-bg);
        border: 3px solid var(--accent-color);
        border-radius: 50%;
        width: 120px;
        height: 120px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
        margin: 0 auto;
      }

      .state-node:hover {
        transform: scale(1.1);
        box-shadow: 0 0 30px var(--accent-color);
      }

      .state-node.active {
        background: var(--accent-color);
        color: var(--primary-bg);
        animation: pulse 1s infinite;
      }

      .state-node.valid-end {
        border-color: var(--success-color);
      }

      /* Interactive Demo */
      .demo-section {
        background: var(--secondary-bg);
        border-radius: 15px;
        padding: 2rem;
        margin: 2rem 0;
      }

      .input-demo {
        display: flex;
        gap: 1rem;
        margin-bottom: 2rem;
        flex-wrap: wrap;
        align-items: center;
      }

      .demo-input {
        flex: 1;
        min-width: 200px;
        padding: 1rem;
        background: var(--card-bg);
        border: 2px solid var(--border-color);
        border-radius: 10px;
        color: var(--text-primary);
        font-size: 1.2rem;
        font-family: "Fira Code", monospace;
      }

      .demo-button {
        background: var(--gradient-2);
        border: none;
        padding: 1rem 2rem;
        border-radius: 10px;
        color: white;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .demo-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
      }

      .demo-result {
        padding: 1.5rem;
        border-radius: 10px;
        margin-top: 1rem;
        font-weight: bold;
        text-align: center;
        transition: all 0.5s ease;
      }

      .demo-result.valid {
        background: rgba(0, 255, 136, 0.2);
        border: 2px solid var(--success-color);
        color: var(--success-color);
      }

      .demo-result.invalid {
        background: rgba(255, 68, 68, 0.2);
        border: 2px solid var(--error-color);
        color: var(--error-color);
      }

      /* Code blocks */
      .code-section {
        margin: 2rem 0;
      }

      .code-tabs {
        display: flex;
        gap: 0.5rem;
        margin-bottom: 1rem;
      }

      .code-tab {
        background: var(--secondary-bg);
        border: none;
        padding: 0.75rem 1.5rem;
        border-radius: 10px 10px 0 0;
        color: var(--text-secondary);
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .code-tab.active {
        background: var(--card-bg);
        color: var(--accent-color);
      }

      pre[class*="language-"] {
        border-radius: 10px !important;
        margin: 0 !important;
        font-family: "Fira Code", "Consolas", monospace !important;
      }

      /* Complexity Analysis */
      .complexity-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1.5rem;
        margin: 2rem 0;
      }

      .complexity-card {
        background: var(--secondary-bg);
        border-radius: 15px;
        padding: 1.5rem;
        text-align: center;
        border: 2px solid var(--border-color);
        transition: all 0.3s ease;
      }

      .complexity-card:hover {
        border-color: var(--accent-color);
        transform: scale(1.02);
      }

      .complexity-value {
        font-size: 2rem;
        font-weight: bold;
        color: var(--accent-color);
        margin: 1rem 0;
        font-family: "Fira Code", monospace;
      }

      /* Step visualization */
      .steps-container {
        margin: 2rem 0;
      }

      .step {
        background: var(--secondary-bg);
        border-left: 4px solid var(--accent-color);
        padding: 1.5rem;
        margin: 1rem 0;
        border-radius: 0 10px 10px 0;
        transition: all 0.3s ease;
        cursor: pointer;
      }

      .step:hover {
        background: var(--card-bg);
        transform: translateX(10px);
      }

      .step h4 {
        color: var(--accent-color);
        margin-bottom: 0.5rem;
      }

      /* Animations */
      @keyframes rotate {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .fade-in {
        animation: fadeInUp 0.6s ease-out;
      }

      /* Responsive design */
      @media (max-width: 768px) {
        .header h1 {
          font-size: 2.5rem;
        }

        .container {
          padding: 1rem;
        }

        .card {
          padding: 1.5rem;
        }

        .states-grid {
          grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
        }

        .state-node {
          width: 80px;
          height: 80px;
          font-size: 0.8rem;
        }

        .input-demo {
          flex-direction: column;
        }

        .demo-input {
          min-width: 100%;
        }
      }

      /* Prism overrides */
      .line-numbers .line-numbers-rows {
        border-right: 1px solid #444 !important;
        background: #2d2d2d !important;
      }

      .line-numbers-rows > span:before {
        color: #888 !important;
        font-size: 0.9em !important;
        padding: 1.3px;
        margin: 0 1rem;
      }

      /* Toolbar styling */
      div.code-toolbar {
        position: relative !important;
      }

      div.code-toolbar > .toolbar {
        position: absolute !important;
        top: 0.3em !important;
        right: 0.3em !important;
        transition: opacity 0.3s ease-in-out !important;
        opacity: 0 !important;
      }

      div.code-toolbar:hover > .toolbar {
        opacity: 1 !important;
      }

      div.code-toolbar > .toolbar .toolbar-item {
        display: inline-block !important;
      }

      div.code-toolbar > .toolbar a,
      div.code-toolbar > .toolbar button,
      div.code-toolbar > .toolbar span {
        background: var(--accent-color) !important;
        color: var(--primary-bg) !important;
        font-size: 0.8em !important;
        padding: 1em !important;
        padding-left: 1.5em !important;
        border-radius: 0.5em !important;
        border: none !important;
        cursor: pointer !important;
        transition: all 0.3s ease !important;
        margin-top: 1rem;
        margin-right: 1rem;
      }

      div.code-toolbar > .toolbar a:hover,
      div.code-toolbar > .toolbar button:hover,
      div.code-toolbar > .toolbar span:hover {
        background: var(--success-color) !important;
        transform: scale(1.05) !important;
      }

      /* ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯å…¨ä½“ã®ã‚¹ã‚¿ã‚¤ãƒ«èª¿æ•´ */
      pre[class*="language-"] {
        position: relative !important;
        overflow: auto !important;
        font-size: 0.9em !important;
        line-height: 1.5 !important;
        background: #272822 !important;
      }

      /* è¡Œç•ªå·ä»˜ãã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã®èª¿æ•´ */
      pre[class*="language-"].line-numbers {
        padding-left: 3.8em !important;
        counter-reset: linenumber !important;
      }

      pre[class*="language-"].line-numbers > code {
        position: relative !important;
        white-space: inherit !important;
      }
    </style>
  </head>
  <body>
    <div class="header">
      <h1><i class="fas fa-code"></i> Valid Number Problem</h1>
      <p class="subtitle">
        æœ‰é™çŠ¶æ…‹æ©Ÿæ¢°ï¼ˆFinite State Machineï¼‰ã«ã‚ˆã‚‹æ•°å€¤æ–‡å­—åˆ—åˆ¤å®šã‚·ã‚¹ãƒ†ãƒ 
      </p>
      <div class="algorithm-badge">Algorithm: Finite State Machine (FSM)</div>
    </div>

    <div class="container">
      <!-- ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ æ¦‚è¦ -->
      <div class="card fade-in">
        <h2><i class="fas fa-lightbulb"></i> ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ æ¦‚è¦</h2>
        <p>
          æœ‰é™çŠ¶æ…‹æ©Ÿæ¢°ï¼ˆFSMï¼‰ã‚’ä½¿ç”¨ã—ã¦æ•°å€¤æ–‡å­—åˆ—ã®å¦¥å½“æ€§ã‚’åˆ¤å®šã™ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§ã™ã€‚æ–‡å­—åˆ—ã‚’å·¦ã‹ã‚‰å³ã¸é †æ¬¡èª­ã¿å–ã‚Šã€å„æ–‡å­—ã«å¿œã˜ã¦çŠ¶æ…‹ã‚’é·ç§»ã•ã›ãªãŒã‚‰ã€æœ€çµ‚çš„ã«æœ‰åŠ¹ãªçµ‚äº†çŠ¶æ…‹ã«åˆ°é”ã™ã‚‹ã‹ã©ã†ã‹ã§åˆ¤å®šã—ã¾ã™ã€‚
        </p>

        <div class="complexity-grid">
          <div class="complexity-card">
            <i class="fas fa-clock"></i>
            <h4>æ™‚é–“è¨ˆç®—é‡</h4>
            <div class="complexity-value">O(n)</div>
            <p>æ–‡å­—åˆ—ã‚’ä¸€åº¦ã ã‘èµ°æŸ»</p>
          </div>
          <div class="complexity-card">
            <i class="fas fa-memory"></i>
            <h4>ç©ºé–“è¨ˆç®—é‡</h4>
            <div class="complexity-value">O(1)</div>
            <p>çŠ¶æ…‹å¤‰æ•°ã®ã¿ä½¿ç”¨</p>
          </div>
          <div class="complexity-card">
            <i class="fas fa-sitemap"></i>
            <h4>çŠ¶æ…‹æ•°</h4>
            <div class="complexity-value">8</div>
            <p>åŠ¹ç‡çš„ãªçŠ¶æ…‹è¨­è¨ˆ</p>
          </div>
        </div>
      </div>

      <!-- ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ‡ãƒ¢ -->
      <div class="card fade-in">
        <h2><i class="fas fa-play-circle"></i> ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ‡ãƒ¢</h2>
        <div class="demo-section">
          <div class="input-demo">
            <input
              type="text"
              class="demo-input"
              id="testInput"
              placeholder="æ•°å€¤æ–‡å­—åˆ—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ (ä¾‹: 3.14e-5)"
              value="3.14e-5"
            />
            <button class="demo-button" onclick="validateNumber()">
              æ¤œè¨¼å®Ÿè¡Œ
            </button>
          </div>
          <div id="demoResult" class="demo-result" style="display: none"></div>
          <div id="stateVisualization" class="fsm-container">
            <h3>çŠ¶æ…‹é·ç§»ã®å¯è¦–åŒ–</h3>
            <div class="states-grid">
              <div class="state-node" id="state-0">INITIAL</div>
              <div class="state-node" id="state-1">SIGN</div>
              <div class="state-node valid-end" id="state-2">INTEGER</div>
              <div class="state-node" id="state-3">DOT</div>
              <div class="state-node valid-end" id="state-4">DECIMAL</div>
              <div class="state-node" id="state-5">EXP</div>
              <div class="state-node" id="state-6">EXP_SIGN</div>
              <div class="state-node valid-end" id="state-7">EXP_NUMBER</div>
            </div>
          </div>
        </div>
      </div>

      <!-- ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ -->
      <div class="card fade-in">
        <h2><i class="fas fa-vial"></i> ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹</h2>
        <div class="test-categories">
          <div class="test-section">
            <h3>âœ… æœ‰åŠ¹ãªæ•°å€¤ãƒ‘ã‚¿ãƒ¼ãƒ³</h3>
            <div class="test-grid">
              <div class="test-case valid" onclick="testCase('0')">
                <code>"0"</code> - å˜ä¸€æ¡æ•°å­—
              </div>
              <div class="test-case valid" onclick="testCase('2')">
                <code>"2"</code> - æ•´æ•°
              </div>
              <div class="test-case valid" onclick="testCase('-0.1')">
                <code>"-0.1"</code> - è² ã®å°æ•°
              </div>
              <div class="test-case valid" onclick="testCase('+3.14')">
                <code>"+3.14"</code> - æ­£ã®å°æ•°
              </div>
              <div class="test-case valid" onclick="testCase('4.')">
                <code>"4."</code> - æ•´æ•°éƒ¨ã®ã¿ã®å°æ•°
              </div>
              <div class="test-case valid" onclick="testCase('-.9')">
                <code>"-.9"</code> - å°æ•°éƒ¨ã®ã¿ã®è² æ•°
              </div>
              <div class="test-case valid" onclick="testCase('2e10')">
                <code>"2e10"</code> - æ•´æ•°ã®æŒ‡æ•°è¡¨è¨˜
              </div>
              <div class="test-case valid" onclick="testCase('-90E3')">
                <code>"-90E3"</code> - è² æ•°ã®æŒ‡æ•°è¡¨è¨˜
              </div>
              <div class="test-case valid" onclick="testCase('3e+7')">
                <code>"3e+7"</code> - æ­£ã®æŒ‡æ•°
              </div>
              <div class="test-case valid" onclick="testCase('53.5e93')">
                <code>"53.5e93"</code> - å°æ•°ã®æŒ‡æ•°è¡¨è¨˜
              </div>
            </div>
          </div>

          <div class="test-section">
            <h3>âŒ ç„¡åŠ¹ãªæ•°å€¤ãƒ‘ã‚¿ãƒ¼ãƒ³</h3>
            <div class="test-grid">
              <div class="test-case invalid" onclick="testCase('abc')">
                <code>"abc"</code> - ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆ
              </div>
              <div class="test-case invalid" onclick="testCase('1a')">
                <code>"1a"</code> - æ•°å­—+æ–‡å­—
              </div>
              <div class="test-case invalid" onclick="testCase('1e')">
                <code>"1e"</code> - æŒ‡æ•°éƒ¨ãªã—
              </div>
              <div class="test-case invalid" onclick="testCase('e3')">
                <code>"e3"</code> - æŒ‡æ•°ã®ã¿
              </div>
              <div class="test-case invalid" onclick="testCase('99e2.5')">
                <code>"99e2.5"</code> - å°æ•°ç‚¹æŒ‡æ•°
              </div>
              <div class="test-case invalid" onclick="testCase('--6')">
                <code>"--6"</code> - äºŒé‡ç¬¦å·
              </div>
              <div class="test-case invalid" onclick="testCase('-+3')">
                <code>"-+3"</code> - æ··åˆç¬¦å·
              </div>
              <div class="test-case invalid" onclick="testCase('e')">
                <code>"e"</code> - æŒ‡æ•°è¨˜å·ã®ã¿
              </div>
              <div class="test-case invalid" onclick="testCase('.')">
                <code>"."</code> - ãƒ‰ãƒƒãƒˆã®ã¿
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- ã‚¹ãƒ†ãƒƒãƒ—ãƒã‚¤ã‚¹ãƒ†ãƒƒãƒ—è§£èª¬ -->
      <div class="card fade-in">
        <h2><i class="fas fa-list-ol"></i> ã‚¹ãƒ†ãƒƒãƒ—ãƒã‚¤ã‚¹ãƒ†ãƒƒãƒ—è§£èª¬</h2>
        <div class="steps-container">
          <div class="step">
            <h4>ã‚¹ãƒ†ãƒƒãƒ— 1: çŠ¶æ…‹ã®å®šç¾©</h4>
            <p>
              8ã¤ã®çŠ¶æ…‹ã‚’å®šç¾©ã—ã¾ã™ï¼šINITIALï¼ˆåˆæœŸçŠ¶æ…‹ï¼‰ã€SIGNï¼ˆç¬¦å·å¾Œï¼‰ã€INTEGERï¼ˆæ•´æ•°éƒ¨ï¼‰ã€DOTï¼ˆå°æ•°ç‚¹å¾Œï¼‰ã€DECIMALï¼ˆå°æ•°éƒ¨ï¼‰ã€EXPï¼ˆæŒ‡æ•°è¨˜å·å¾Œï¼‰ã€EXP_SIGNï¼ˆæŒ‡æ•°ç¬¦å·å¾Œï¼‰ã€EXP_NUMBERï¼ˆæŒ‡æ•°éƒ¨ï¼‰
            </p>
          </div>
          <div class="step">
            <h4>ã‚¹ãƒ†ãƒƒãƒ— 2: çŠ¶æ…‹é·ç§»ãƒ«ãƒ¼ãƒ«ã®è¨­è¨ˆ</h4>
            <p>
              å„çŠ¶æ…‹ã‹ã‚‰æœ‰åŠ¹ãªå…¥åŠ›æ–‡å­—ã«å¯¾ã—ã¦ã©ã®çŠ¶æ…‹ã«é·ç§»ã™ã‚‹ã‹ã‚’å®šç¾©ã—ã¾ã™ã€‚ç„¡åŠ¹ãªå…¥åŠ›ã®å ´åˆã¯å³åº§ã«falseã‚’è¿”ã—ã¾ã™ã€‚
            </p>
          </div>
          <div class="step">
            <h4>ã‚¹ãƒ†ãƒƒãƒ— 3: æ–‡å­—åˆ—ã®é †æ¬¡å‡¦ç†</h4>
            <p>
              æ–‡å­—åˆ—ã‚’å·¦ã‹ã‚‰å³ã¸ä¸€æ–‡å­—ãšã¤èª­ã¿å–ã‚Šã€ç¾åœ¨ã®çŠ¶æ…‹ã¨å…¥åŠ›æ–‡å­—ã«åŸºã¥ã„ã¦æ¬¡ã®çŠ¶æ…‹ã‚’æ±ºå®šã—ã¾ã™ã€‚
            </p>
          </div>
          <div class="step">
            <h4>ã‚¹ãƒ†ãƒƒãƒ— 4: çµ‚äº†çŠ¶æ…‹ã®åˆ¤å®š</h4>
            <p>
              æ–‡å­—åˆ—ã®çµ‚ç«¯ã«åˆ°é”ã—ãŸæ™‚ç‚¹ã§ã€ç¾åœ¨ã®çŠ¶æ…‹ãŒæœ‰åŠ¹ãªçµ‚äº†çŠ¶æ…‹ï¼ˆINTEGERã€DECIMALã€EXP_NUMBERï¼‰ã®ä¸€ã¤ã§ã‚ã‚‹ã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚
            </p>
          </div>
        </div>
      </div>

      <!-- ã‚³ãƒ¼ãƒ‰å®Ÿè£… -->
      <div class="card fade-in">
        <h2><i class="fas fa-code"></i> Pythonå®Ÿè£…</h2>
        <div class="code-section">
          <div class="code-tabs">
            <button class="code-tab active" onclick="showCode('competitive')">
              ç«¶æŠ€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ç‰ˆ
            </button>
            <button class="code-tab" onclick="showCode('production')">
              æ¥­å‹™é–‹ç™ºç‰ˆ
            </button>
            <button class="code-tab" onclick="showCode('state-def')">
              çŠ¶æ…‹å®šç¾©
            </button>
          </div>

          <div id="competitive-code" class="code-content">
            <pre
              class="line-numbers"
            ><code class="language-python">class Solution:
    def isNumber(self, s: str) -> bool:
        """
        ç«¶æŠ€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°å‘ã‘æœ€é©åŒ–å®Ÿè£…
        """
        if not s:
            return False

        # çŠ¶æ…‹å®šç¾©ï¼ˆIntEnumã«ã‚ˆã‚‹æ•´æ•°æ¯”è¼ƒæœ€é©åŒ–ï¼‰
        INITIAL, SIGN, INTEGER, DOT, DECIMAL, EXP, EXP_SIGN, EXP_NUMBER = range(8)

        # æœ‰åŠ¹çµ‚äº†çŠ¶æ…‹
        valid_end_states = {INTEGER, DECIMAL, EXP_NUMBER}

        state = INITIAL
        i = 0
        length = len(s)

        while i < length:
            char = s[i]

            if state == INITIAL:
                if char in "+-":
                    state = SIGN
                elif "0" <= char <= "9":  # æœ€é€Ÿã®æ•°å­—åˆ¤å®š
                    state = INTEGER
                elif char == ".":
                    state = DOT
                else:
                    return False

            elif state == SIGN:
                if "0" <= char <= "9":
                    state = INTEGER
                elif char == ".":
                    state = DOT
                else:
                    return False

            elif state == INTEGER:
                if "0" <= char <= "9":
                    pass  # åŒä¸€çŠ¶æ…‹ç¶™ç¶šï¼ˆæœ€é©åŒ–ï¼‰
                elif char == ".":
                    state = DECIMAL
                elif char in "eE":
                    state = EXP
                else:
                    return False

            elif state == DOT:
                if "0" <= char <= "9":
                    state = DECIMAL
                else:
                    return False

            elif state == DECIMAL:
                if "0" <= char <= "9":
                    pass  # åŒä¸€çŠ¶æ…‹ç¶™ç¶š
                elif char in "eE":
                    state = EXP
                else:
                    return False

            elif state == EXP:
                if char in "+-":
                    state = EXP_SIGN
                elif "0" <= char <= "9":
                    state = EXP_NUMBER
                else:
                    return False

            elif state == EXP_SIGN:
                if "0" <= char <= "9":
                    state = EXP_NUMBER
                else:
                    return False

            elif state == EXP_NUMBER:
                if "0" <= char <= "9":
                    pass  # åŒä¸€çŠ¶æ…‹ç¶™ç¶š
                else:
                    return False

            i += 1

        return state in valid_end_states</code></pre>
          </div>

          <div id="production-code" class="code-content" style="display: none">
            <pre
              class="line-numbers"
            ><code class="language-python">from typing import Optional, Dict, Set
from enum import IntEnum

class State(IntEnum):
    INITIAL = 0
    SIGN = 1
    INTEGER = 2
    DOT = 3
    DECIMAL = 4
    EXP = 5
    EXP_SIGN = 6
    EXP_NUMBER = 7

class Solution:
    def solve_production(self, input_string: str, strict_validation: bool = True) -> bool:
        """
        æ¥­å‹™é–‹ç™ºå‘ã‘å®Ÿè£…ï¼ˆå‹å®‰å…¨ãƒ»ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°é‡è¦–ï¼‰
        """
        try:
            # å…¥åŠ›æ¤œè¨¼
            if strict_validation:
                self._validate_input(input_string)

            # ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹å‡¦ç†
            if self._is_edge_case(input_string):
                return self._handle_edge_case(input_string)

            # ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
            return self._main_algorithm_safe(input_string)

        except Exception as e:
            if strict_validation:
                raise
            return False

    def _validate_input(self, data) -> None:
        """å‹å®‰å…¨ãªå…¥åŠ›æ¤œè¨¼"""
        if not isinstance(data, str):
            raise TypeError(f"Expected str, got {type(data).__name__}")

        if len(data) == 0:
            raise ValueError("Input string cannot be empty")

        if len(data) > 20:
            raise ValueError(f"Input too long: {len(data)} > 20")

        # è¨±å¯ã•ã‚ŒãŸæ–‡å­—ã®ã¿ã‚’ãƒã‚§ãƒƒã‚¯
        allowed_chars = set("0123456789+-eE.")
        if not all(c in allowed_chars for c in data):
            invalid_chars = set(data) - allowed_chars
            raise ValueError(f"Invalid characters: {invalid_chars}")

    def _main_algorithm_safe(self, s: str) -> bool:
        """å‹å®‰å…¨ãªãƒ¡ã‚¤ãƒ³ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ """
        state = State.INITIAL
        valid_end_states = {State.INTEGER, State.DECIMAL, State.EXP_NUMBER}

        for char in s:
            next_state = self._transition_state(state, char)
            if next_state is None:
                return False
            state = next_state

        return state in valid_end_states

    def _transition_state(self, current_state: State, char: str) -> Optional[State]:
        """çŠ¶æ…‹é·ç§»é–¢æ•°"""
        transitions = {
            State.INITIAL: {
                "sign": State.SIGN,
                "digit": State.INTEGER,
                "dot": State.DOT,
            },
            State.SIGN: {
                "digit": State.INTEGER,
                "dot": State.DOT,
            },
            State.INTEGER: {
                "digit": State.INTEGER,
                "dot": State.DECIMAL,
                "exp": State.EXP,
            },
            State.DOT: {
                "digit": State.DECIMAL,
            },
            State.DECIMAL: {
                "digit": State.DECIMAL,
                "exp": State.EXP,
            },
            State.EXP: {
                "sign": State.EXP_SIGN,
                "digit": State.EXP_NUMBER,
            },
            State.EXP_SIGN: {
                "digit": State.EXP_NUMBER,
            },
            State.EXP_NUMBER: {
                "digit": State.EXP_NUMBER,
            },
        }

        # æ–‡å­—ç¨®åˆ¤å®š
        key = None
        if char in "+-":
            key = "sign"
        elif "0" <= char <= "9":
            key = "digit"
        elif char in "eE":
            key = "exp"
        elif char == ".":
            key = "dot"

        if key is None:
            return None

        return transitions.get(current_state, {}).get(key)</code></pre>
          </div>

          <div id="state-def-code" class="code-content" style="display: none">
            <pre
              class="line-numbers"
            ><code class="language-python">from enum import IntEnum
from typing import Set, Final

class State(IntEnum):
    """
    æœ‰é™çŠ¶æ…‹æ©Ÿæ¢°ã®çŠ¶æ…‹å®šç¾©
    IntEnumã§CPythonæœ€é©åŒ–ï¼ˆæ•´æ•°æ¯”è¼ƒï¼‰+ å¯èª­æ€§ç¢ºä¿
    """
    INITIAL = 0     # åˆæœŸçŠ¶æ…‹ - ç¬¦å·ã€æ•°å­—ã€ãƒ‰ãƒƒãƒˆã‚’å—ã‘ä»˜ã‘
    SIGN = 1        # ç¬¦å·èª­ã¿å–ã‚Šå¾Œ - æ•°å­—ã€ãƒ‰ãƒƒãƒˆã‚’å—ã‘ä»˜ã‘
    INTEGER = 2     # æ•´æ•°éƒ¨èª­ã¿å–ã‚Šä¸­ - æ•°å­—ã€ãƒ‰ãƒƒãƒˆã€æŒ‡æ•°è¨˜å·ã‚’å—ã‘ä»˜ã‘
    DOT = 3         # ãƒ‰ãƒƒãƒˆèª­ã¿å–ã‚Šå¾Œ - æ•°å­—ã®ã¿ã‚’å—ã‘ä»˜ã‘
    DECIMAL = 4     # å°æ•°éƒ¨èª­ã¿å–ã‚Šä¸­ - æ•°å­—ã€æŒ‡æ•°è¨˜å·ã‚’å—ã‘ä»˜ã‘
    EXP = 5         # E/eèª­ã¿å–ã‚Šå¾Œ - ç¬¦å·ã€æ•°å­—ã‚’å—ã‘ä»˜ã‘
    EXP_SIGN = 6    # æŒ‡æ•°ç¬¦å·èª­ã¿å–ã‚Šå¾Œ - æ•°å­—ã®ã¿ã‚’å—ã‘ä»˜ã‘
    EXP_NUMBER = 7  # æŒ‡æ•°éƒ¨èª­ã¿å–ã‚Šä¸­ - æ•°å­—ã®ã¿ã‚’å—ã‘ä»˜ã‘

# æœ‰åŠ¹ãªçµ‚äº†çŠ¶æ…‹ï¼ˆæ•°å€¤ã¨ã—ã¦å®Œæˆã—ã¦ã„ã‚‹çŠ¶æ…‹ï¼‰
ValidEndStates: Final[Set[State]] = {
    State.INTEGER,    # æ•´æ•°ã¨ã—ã¦å®Œæˆ
    State.DECIMAL,    # å°æ•°ã¨ã—ã¦å®Œæˆ
    State.EXP_NUMBER  # æŒ‡æ•°è¡¨è¨˜ã¨ã—ã¦å®Œæˆ
}

def get_state_description(state: State) -> str:
    """çŠ¶æ…‹ã®èª¬æ˜ã‚’å–å¾—"""
    descriptions = {
        State.INITIAL: "åˆæœŸçŠ¶æ…‹ - æœ€åˆã®æ–‡å­—ã‚’å¾…æ©Ÿä¸­",
        State.SIGN: "ç¬¦å·å‡¦ç†å¾Œ - æ•°å­—ã¾ãŸã¯å°æ•°ç‚¹ã‚’å¾…æ©Ÿä¸­",
        State.INTEGER: "æ•´æ•°éƒ¨å‡¦ç†ä¸­ - æ•°å­—ç¶™ç¶šã€å°æ•°ç‚¹ã€ã¾ãŸã¯æŒ‡æ•°è¨˜å·ã‚’å¾…æ©Ÿä¸­",
        State.DOT: "å°æ•°ç‚¹å‡¦ç†å¾Œ - å°æ•°éƒ¨ã®æœ€åˆã®æ•°å­—ã‚’å¾…æ©Ÿä¸­",
        State.DECIMAL: "å°æ•°éƒ¨å‡¦ç†ä¸­ - æ•°å­—ç¶™ç¶šã¾ãŸã¯æŒ‡æ•°è¨˜å·ã‚’å¾…æ©Ÿä¸­",
        State.EXP: "æŒ‡æ•°è¨˜å·å‡¦ç†å¾Œ - æŒ‡æ•°éƒ¨ã®ç¬¦å·ã¾ãŸã¯æ•°å­—ã‚’å¾…æ©Ÿä¸­",
        State.EXP_SIGN: "æŒ‡æ•°ç¬¦å·å‡¦ç†å¾Œ - æŒ‡æ•°éƒ¨ã®æ•°å­—ã‚’å¾…æ©Ÿä¸­",
        State.EXP_NUMBER: "æŒ‡æ•°éƒ¨å‡¦ç†ä¸­ - æ•°å­—ç¶™ç¶šã‚’å¾…æ©Ÿä¸­"
    }
    return descriptions.get(state, "æœªçŸ¥ã®çŠ¶æ…‹")

# çŠ¶æ…‹é·ç§»ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆå‚è€ƒç”¨ï¼‰
TRANSITION_TABLE = {
    State.INITIAL: {
        '+': State.SIGN, '-': State.SIGN,
        '0': State.INTEGER, '1': State.INTEGER, '2': State.INTEGER,
        '3': State.DECIMAL, '4': State.DECIMAL, '5': State.DECIMAL,
        '6': State.DECIMAL, '7': State.DECIMAL, '8': State.DECIMAL, '9': State.DECIMAL,
        'e': State.EXP, 'E': State.EXP
    },
    State.EXP: {
        '+': State.EXP_SIGN, '-': State.EXP_SIGN,
        '0': State.EXP_NUMBER, '1': State.EXP_NUMBER, '2': State.EXP_NUMBER,
        '3': State.EXP_NUMBER, '4': State.EXP_NUMBER, '5': State.EXP_NUMBER,
        '6': State.EXP_NUMBER, '7': State.EXP_NUMBER, '8': State.EXP_NUMBER, '9': State.EXP_NUMBER
    },
    State.EXP_SIGN: {
        '0': State.EXP_NUMBER, '1': State.EXP_NUMBER, '2': State.EXP_NUMBER,
        '3': State.EXP_NUMBER, '4': State.EXP_NUMBER, '5': State.EXP_NUMBER,
        '6': State.EXP_NUMBER, '7': State.EXP_NUMBER, '8': State.EXP_NUMBER, '9': State.EXP_NUMBER
    },
    State.EXP_NUMBER: {
        '0': State.EXP_NUMBER, '1': State.EXP_NUMBER, '2': State.EXP_NUMBER,
        '3': State.EXP_NUMBER, '4': State.EXP_NUMBER, '5': State.EXP_NUMBER,
        '6': State.EXP_NUMBER, '7': State.EXP_NUMBER, '8': State.EXP_NUMBER, '9': State.EXP_NUMBER
    }
}</code></pre>
          </div>
        </div>
      </div>

      <!-- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ -->
      <div class="card fade-in">
        <h2><i class="fas fa-chart-line"></i> ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ</h2>
        <div class="complexity-grid">
          <div class="complexity-card">
            <i class="fas fa-tachometer-alt"></i>
            <h4>å®Ÿè¡Œé€Ÿåº¦</h4>
            <div class="complexity-value">2.2x</div>
            <p>ç«¶æŠ€ç‰ˆã¯æ¥­å‹™ç‰ˆã‚ˆã‚Šé«˜é€Ÿ</p>
          </div>
          <div class="complexity-card">
            <i class="fas fa-microchip"></i>
            <h4>CPythonæœ€é©åŒ–</h4>
            <div class="complexity-value">100%</div>
            <p>æ•´æ•°æ¯”è¼ƒãƒ»æ–‡å­—åˆ¤å®šæœ€é©åŒ–</p>
          </div>
          <div class="complexity-card">
            <i class="fas fa-shield-alt"></i>
            <h4>å‹å®‰å…¨æ€§</h4>
            <div class="complexity-value">0</div>
            <p>Pylanceã‚¨ãƒ©ãƒ¼ä»¶æ•°</p>
          </div>
        </div>

        <h3>æœ€é©åŒ–æŠ€è¡“</h3>
        <div class="steps-container">
          <div class="step">
            <h4>æ•´æ•°æ¯”è¼ƒã«ã‚ˆã‚‹çŠ¶æ…‹é·ç§»</h4>
            <p>
              <code>state == State.INITIAL</code> -
              IntEnumã«ã‚ˆã‚Šæ–‡å­—åˆ—æ¯”è¼ƒã‚ˆã‚Šé«˜é€Ÿ
            </p>
          </div>
          <div class="step">
            <h4>æ–‡å­—åˆ¤å®šã®æœ€é©åŒ–</h4>
            <p>
              <code>"0" <= char <= "9"</code> - isdigit()ã‚ˆã‚Šé«˜é€ŸãªCPythonæœ€é©åŒ–
            </p>
          </div>
          <div class="step">
            <h4>ãƒ¡ãƒ³ãƒãƒ¼ã‚·ãƒƒãƒ—ãƒ†ã‚¹ãƒˆã®æ´»ç”¨</h4>
            <p><code>state in ValidEndStates</code> - Cå®Ÿè£…ã«ã‚ˆã‚‹é«˜é€Ÿåˆ¤å®š</p>
          </div>
          <div class="step">
            <h4>åŒä¸€çŠ¶æ…‹ç¶™ç¶šã®æœ€é©åŒ–</h4>
            <p><code>pass</code> - ä¸è¦ãªä»£å…¥ã‚’çœç•¥ã—ã¦ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š</p>
          </div>
        </div>
      </div>

      <!-- å®Ÿè£…ã®ãƒã‚¤ãƒ³ãƒˆ -->
      <div class="card fade-in">
        <h2><i class="fas fa-key"></i> å®Ÿè£…ã®ãƒã‚¤ãƒ³ãƒˆ</h2>
        <div class="steps-container">
          <div class="step">
            <h4>ğŸ¯ äºŒé‡å®Ÿè£…æˆ¦ç•¥</h4>
            <p>
              <strong>ç«¶æŠ€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ç‰ˆ</strong
              >ï¼ˆé€Ÿåº¦é‡è¦–ï¼‰ã¨<strong>æ¥­å‹™é–‹ç™ºç‰ˆ</strong>ï¼ˆå®‰å…¨æ€§é‡è¦–ï¼‰ã®2ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æä¾›ã€‚ç”¨é€”ã«å¿œã˜ã¦é¸æŠå¯èƒ½ã€‚
            </p>
          </div>
          <div class="step">
            <h4>âš¡ CPythonæœ€é©åŒ–</h4>
            <p>
              IntEnumã«ã‚ˆã‚‹æ•´æ•°æ¯”è¼ƒã€æ–‡å­—åˆ—æ¯”è¼ƒæ¼”ç®—å­ã€ã‚»ãƒƒãƒˆãƒ¡ãƒ³ãƒãƒ¼ã‚·ãƒƒãƒ—ãƒ†ã‚¹ãƒˆãªã©ã€CPythonç‰¹åŒ–ã®æœ€é©åŒ–æŠ€è¡“ã‚’æ´»ç”¨ã€‚
            </p>
          </div>
          <div class="step">
            <h4>ğŸ”§ å‹ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆ</h4>
            <p>
              å®Œå…¨ãªå‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã€ãƒ—ãƒ­ãƒˆã‚³ãƒ«å®šç¾©ã€ã‚«ã‚¹ã‚¿ãƒ ä¾‹å¤–éšå±¤ã«ã‚ˆã‚Šã€Pylanceã‚¨ãƒ©ãƒ¼å®Œå…¨è§£æ¶ˆã‚’å®Ÿç¾ã€‚
            </p>
          </div>
          <div class="step">
            <h4>ğŸ§ª åŒ…æ‹¬çš„ãƒ†ã‚¹ãƒˆ</h4>
            <p>
              æœ‰åŠ¹ãƒ»ç„¡åŠ¹ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ç¶²ç¾…çš„ãƒ†ã‚¹ãƒˆã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®šã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æ¤œè¨¼ã‚’å«ã‚€å®Œå…¨ãªãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆã€‚
            </p>
          </div>
        </div>
      </div>
    </div>

    <style>
      .test-section {
        margin: 2rem 0;
      }

      .test-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 1rem;
        margin-top: 1rem;
      }

      .test-case {
        background: var(--secondary-bg);
        border-radius: 10px;
        padding: 1rem;
        cursor: pointer;
        transition: all 0.3s ease;
        border: 2px solid transparent;
      }

      .test-case.valid {
        border-left: 4px solid var(--success-color);
      }

      .test-case.invalid {
        border-left: 4px solid var(--error-color);
      }

      .test-case:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      }

      .test-case.valid:hover {
        border-color: var(--success-color);
      }

      .test-case.invalid:hover {
        border-color: var(--error-color);
      }

      .test-case code {
        background: var(--card-bg);
        padding: 0.25rem 0.5rem;
        border-radius: 5px;
        font-family: "Fira Code", monospace;
        color: var(--accent-color);
      }
    </style>

    <script>
      // æœ‰é™çŠ¶æ…‹æ©Ÿæ¢°ã®å®Ÿè£…
      const States = {
        INITIAL: 0,
        SIGN: 1,
        INTEGER: 2,
        DOT: 3,
        DECIMAL: 4,
        EXP: 5,
        EXP_SIGN: 6,
        EXP_NUMBER: 7,
      };

      const StateNames = [
        "INITIAL",
        "SIGN",
        "INTEGER",
        "DOT",
        "DECIMAL",
        "EXP",
        "EXP_SIGN",
        "EXP_NUMBER",
      ];
      const ValidEndStates = new Set([
        States.INTEGER,
        States.DECIMAL,
        States.EXP_NUMBER,
      ]);

      function isValidNumber(s) {
        if (!s) return false;

        let state = States.INITIAL;
        const stateHistory = [state];

        for (let i = 0; i < s.length; i++) {
          const char = s[i];
          const prevState = state;

          if (state === States.INITIAL) {
            if (char === "+" || char === "-") {
              state = States.SIGN;
            } else if (char >= "0" && char <= "9") {
              state = States.INTEGER;
            } else if (char === ".") {
              state = States.DOT;
            } else {
              return { valid: false, stateHistory, errorAt: i };
            }
          } else if (state === States.SIGN) {
            if (char >= "0" && char <= "9") {
              state = States.INTEGER;
            } else if (char === ".") {
              state = States.DOT;
            } else {
              return { valid: false, stateHistory, errorAt: i };
            }
          } else if (state === States.INTEGER) {
            if (char >= "0" && char <= "9") {
              // åŒä¸€çŠ¶æ…‹ç¶™ç¶š
            } else if (char === ".") {
              state = States.DECIMAL;
            } else if (char === "e" || char === "E") {
              state = States.EXP;
            } else {
              return { valid: false, stateHistory, errorAt: i };
            }
          } else if (state === States.DOT) {
            if (char >= "0" && char <= "9") {
              state = States.DECIMAL;
            } else {
              return { valid: false, stateHistory, errorAt: i };
            }
          } else if (state === States.DECIMAL) {
            if (char >= "0" && char <= "9") {
              // åŒä¸€çŠ¶æ…‹ç¶™ç¶š
            } else if (char === "e" || char === "E") {
              state = States.EXP;
            } else {
              return { valid: false, stateHistory, errorAt: i };
            }
          } else if (state === States.EXP) {
            if (char === "+" || char === "-") {
              state = States.EXP_SIGN;
            } else if (char >= "0" && char <= "9") {
              state = States.EXP_NUMBER;
            } else {
              return { valid: false, stateHistory, errorAt: i };
            }
          } else if (state === States.EXP_SIGN) {
            if (char >= "0" && char <= "9") {
              state = States.EXP_NUMBER;
            } else {
              return { valid: false, stateHistory, errorAt: i };
            }
          } else if (state === States.EXP_NUMBER) {
            if (char >= "0" && char <= "9") {
              // åŒä¸€çŠ¶æ…‹ç¶™ç¶š
            } else {
              return { valid: false, stateHistory, errorAt: i };
            }
          }

          stateHistory.push(state);
        }

        const valid = ValidEndStates.has(state);
        return { valid, stateHistory, finalState: state };
      }

      function clearStateVisualization() {
        for (let i = 0; i < 8; i++) {
          const node = document.getElementById(`state-${i}`);
          node.classList.remove("active");
        }
      }

      function highlightState(stateId, delay = 0) {
        setTimeout(() => {
          clearStateVisualization();
          const node = document.getElementById(`state-${stateId}`);
          node.classList.add("active");
        }, delay);
      }

      function animateStateTransition(stateHistory) {
        clearStateVisualization();

        stateHistory.forEach((state, index) => {
          setTimeout(() => {
            clearStateVisualization();
            highlightState(state, 0);
          }, index * 500);
        });
      }

      function validateNumber() {
        const input = document.getElementById("testInput").value;
        const result = isValidNumber(input);
        const resultDiv = document.getElementById("demoResult");

        resultDiv.style.display = "block";
        resultDiv.className = `demo-result ${
          result.valid ? "valid" : "invalid"
        }`;

        if (result.valid) {
          resultDiv.innerHTML = `
                    <i class="fas fa-check-circle"></i>
                    <strong>æœ‰åŠ¹ãªæ•°å€¤ã§ã™ï¼</strong><br>
                    æœ€çµ‚çŠ¶æ…‹: ${StateNames[result.finalState]}
                `;
        } else {
          resultDiv.innerHTML = `
                    <i class="fas fa-times-circle"></i>
                    <strong>ç„¡åŠ¹ãªæ•°å€¤ã§ã™</strong><br>
                    ${
                      result.errorAt !== undefined
                        ? `ã‚¨ãƒ©ãƒ¼ä½ç½®: ${Number(result.errorAt) + 1}æ–‡å­—ç›®`
                        : `æœ€çµ‚çŠ¶æ…‹: ${
                            StateNames[
                              result.stateHistory[
                                result.stateHistory.length - 1
                              ]
                            ]
                          }`
                    }
                `;
        }

        // çŠ¶æ…‹é·ç§»ã‚’ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¡¨ç¤º
        animateStateTransition(result.stateHistory);
      }

      function showCode(codeType) {
        // ã‚¿ãƒ–ã®åˆ‡ã‚Šæ›¿ãˆ
        document.querySelectorAll(".code-tab").forEach((tab) => {
          tab.classList.remove("active");
        });
        document
          .querySelector(`[onclick="showCode('${codeType}')"]`)
          .classList.add("active");

        // ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®åˆ‡ã‚Šæ›¿ãˆ
        document.querySelectorAll(".code-content").forEach((content) => {
          content.style.display = "none";
        });
        document.getElementById(`${codeType}-code`).style.display = "block";

        // Prismã‚’å†å®Ÿè¡Œï¼ˆé…å»¶å®Ÿè¡Œã§ç¢ºå®Ÿã«å‹•ä½œã•ã›ã‚‹ï¼‰
        setTimeout(() => {
          Prism.highlightAll();
        }, 100);
      }

      function testCase(testString) {
        document.getElementById("testInput").value = testString;
        validateNumber();
      }

      // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®åˆæœŸåŒ–
      document.addEventListener("DOMContentLoaded", function () {
        // Prism.jsã®åˆæœŸåŒ–ã‚’å°‘ã—é…ã‚‰ã›ã‚‹
        setTimeout(() => {
          Prism.highlightAll();
        }, 200);

        // åˆæœŸãƒ‡ãƒ¢å®Ÿè¡Œ
        setTimeout(() => {
          validateNumber();
        }, 300);

        // ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        const cards = document.querySelectorAll(".card");
        cards.forEach((card, index) => {
          setTimeout(() => {
            card.style.animation = `fadeInUp 0.6s ease-out ${
              index * 0.1
            }s both`;
          }, 100);
        });

        // Enterã‚­ãƒ¼ã§ã®å®Ÿè¡Œ
        document
          .getElementById("testInput")
          .addEventListener("keypress", function (e) {
            if (e.key === "Enter") {
              validateNumber();
            }
          });
      });
    </script>
  </body>
</html>
