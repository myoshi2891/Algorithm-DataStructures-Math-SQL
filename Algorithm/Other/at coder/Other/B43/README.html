<!DOCTYPE html>
<html lang="ja">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>クイズ大会アルゴリズム詳細解析</title>
        <style>
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                margin: 0;
                padding: 20px;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: #333;
            }

            .container {
                max-width: 1200px;
                margin: 0 auto;
                background: rgba(255, 255, 255, 0.95);
                padding: 30px;
                border-radius: 15px;
                box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            }

            h1,
            h2,
            h3 {
                color: #2c3e50;
                text-align: center;
                margin-bottom: 30px;
            }

            h1 {
                font-size: 2.5em;
                background: linear-gradient(45deg, #667eea, #764ba2);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            }

            .section {
                margin-bottom: 40px;
                padding: 25px;
                background: #f8f9fa;
                border-radius: 10px;
                border-left: 5px solid #667eea;
            }

            .diagram {
                background: white;
                border: 2px solid #ddd;
                border-radius: 8px;
                padding: 20px;
                margin: 20px 0;
                text-align: center;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            }

            .step-container {
                display: flex;
                flex-wrap: wrap;
                gap: 20px;
                justify-content: center;
                margin: 20px 0;
            }

            .step {
                background: linear-gradient(135deg, #74b9ff, #0984e3);
                color: white;
                padding: 15px 20px;
                border-radius: 10px;
                min-width: 200px;
                text-align: center;
                box-shadow: 0 4px 12px rgba(116, 185, 255, 0.3);
                transition: transform 0.3s ease;
            }

            .step:hover {
                transform: translateY(-3px);
            }

            .table {
                width: 100%;
                border-collapse: collapse;
                margin: 20px 0;
                background: white;
                border-radius: 8px;
                overflow: hidden;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            }

            .table th,
            .table td {
                padding: 12px;
                text-align: center;
                border: 1px solid #ddd;
            }

            .table th {
                background: linear-gradient(135deg, #667eea, #764ba2);
                color: white;
                font-weight: bold;
            }

            .table tr:nth-child(even) {
                background-color: #f8f9fa;
            }

            .array-visual {
                display: flex;
                justify-content: center;
                gap: 5px;
                margin: 20px 0;
                flex-wrap: wrap;
            }

            .array-cell {
                padding: 10px 15px;
                border: 2px solid #667eea;
                border-radius: 6px;
                background: linear-gradient(135deg, #ffffff, #f1f3f4);
                font-weight: bold;
                color: #2c3e50;
                min-width: 40px;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            }

            .array-index {
                font-size: 0.8em;
                color: #666;
                margin-bottom: 5px;
            }

            .highlight {
                background: linear-gradient(135deg, #ff7675, #fd79a8) !important;
                color: white;
                animation: pulse 1.5s ease-in-out;
            }

            @keyframes pulse {

                0%,
                100% {
                    transform: scale(1);
                }

                50% {
                    transform: scale(1.05);
                }
            }

            .complexity-box {
                background: linear-gradient(135deg, #00b894, #00cec9);
                color: white;
                padding: 20px;
                border-radius: 10px;
                margin: 20px 0;
                text-align: center;
                box-shadow: 0 4px 12px rgba(0, 184, 148, 0.3);
            }

            .code-snippet {
                background: #2d3748;
                color: #e2e8f0;
                padding: 20px;
                border-radius: 8px;
                margin: 15px 0;
                font-family: 'Courier New', monospace;
                overflow-x: auto;
                border-left: 5px solid #667eea;
            }

            .memory-visual {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
                gap: 15px;
                margin: 20px 0;
            }

            .memory-block {
                background: linear-gradient(135deg, #a29bfe, #6c5ce7);
                color: white;
                padding: 15px;
                border-radius: 8px;
                text-align: center;
                box-shadow: 0 4px 8px rgba(108, 92, 231, 0.3);
            }

            .arrow {
                font-size: 2em;
                color: #667eea;
                margin: 10px;
                animation: bounce 2s infinite;
            }

            @keyframes bounce {

                0%,
                20%,
                50%,
                80%,
                100% {
                    transform: translateY(0);
                }

                40% {
                    transform: translateY(-10px);
                }

                60% {
                    transform: translateY(-5px);
                }
            }
        </style>
    </head>

    <body>
        <div class="container">
            <h1>🎯 クイズ大会アルゴリズム詳細解析</h1>

            <div class="section">
                <h2>📊 問題の理解と入力例</h2>
                <div class="diagram">
                    <h3>入力例1の詳細分解</h3>
                    <table class="table">
                        <tr>
                            <th>項目</th>
                            <th>値</th>
                            <th>説明</th>
                        </tr>
                        <tr>
                            <td>N (生徒数)</td>
                            <td>4</td>
                            <td>生徒1, 2, 3, 4の4人が参加</td>
                        </tr>
                        <tr>
                            <td>M (問題数)</td>
                            <td>6</td>
                            <td>問題1〜6の計6問が出題</td>
                        </tr>
                        <tr>
                            <td>間違えた生徒</td>
                            <td>[1, 4, 1, 4, 2, 1]</td>
                            <td>各問題で間違えた生徒の番号</td>
                        </tr>
                    </table>

                    <h3>問題ごとの正解・不正解状況</h3>
                    <table class="table">
                        <tr>
                            <th>問題</th>
                            <th>間違えた生徒</th>
                            <th>生徒1</th>
                            <th>生徒2</th>
                            <th>生徒3</th>
                            <th>生徒4</th>
                        </tr>
                        <tr>
                            <td>問題1</td>
                            <td>1</td>
                            <td style="background:#ff7675; color:white;">✗</td>
                            <td style="background:#00b894; color:white;">✓</td>
                            <td style="background:#00b894; color:white;">✓</td>
                            <td style="background:#00b894; color:white;">✓</td>
                        </tr>
                        <tr>
                            <td>問題2</td>
                            <td>4</td>
                            <td style="background:#00b894; color:white;">✓</td>
                            <td style="background:#00b894; color:white;">✓</td>
                            <td style="background:#00b894; color:white;">✓</td>
                            <td style="background:#ff7675; color:white;">✗</td>
                        </tr>
                        <tr>
                            <td>問題3</td>
                            <td>1</td>
                            <td style="background:#ff7675; color:white;">✗</td>
                            <td style="background:#00b894; color:white;">✓</td>
                            <td style="background:#00b894; color:white;">✓</td>
                            <td style="background:#00b894; color:white;">✓</td>
                        </tr>
                        <tr>
                            <td>問題4</td>
                            <td>4</td>
                            <td style="background:#00b894; color:white;">✓</td>
                            <td style="background:#00b894; color:white;">✓</td>
                            <td style="background:#00b894; color:white;">✓</td>
                            <td style="background:#ff7675; color:white;">✗</td>
                        </tr>
                        <tr>
                            <td>問題5</td>
                            <td>2</td>
                            <td style="background:#00b894; color:white;">✓</td>
                            <td style="background:#ff7675; color:white;">✗</td>
                            <td style="background:#00b894; color:white;">✓</td>
                            <td style="background:#00b894; color:white;">✓</td>
                        </tr>
                        <tr>
                            <td>問題6</td>
                            <td>1</td>
                            <td style="background:#ff7675; color:white;">✗</td>
                            <td style="background:#00b894; color:white;">✓</td>
                            <td style="background:#00b894; color:white;">✓</td>
                            <td style="background:#00b894; color:white;">✓</td>
                        </tr>
                    </table>
                </div>
            </div>

            <div class="section">
                <h2>🔍 アルゴリズムの処理フロー</h2>
                <div class="step-container">
                    <div class="step">
                        <strong>Step 1</strong><br>
                        入力データの読み込み<br>
                        N=4, M=6<br>
                        A=[1,4,1,4,2,1]
                    </div>
                    <div class="arrow">→</div>
                    <div class="step">
                        <strong>Step 2</strong><br>
                        wrongCount配列の初期化<br>
                        [0,0,0,0,0] (index 0〜4)
                    </div>
                    <div class="arrow">→</div>
                    <div class="step">
                        <strong>Step 3</strong><br>
                        各生徒の間違い数をカウント<br>
                        配列を更新
                    </div>
                    <div class="arrow">→</div>
                    <div class="step">
                        <strong>Step 4</strong><br>
                        正解数を計算<br>
                        M - wrongCount[i]
                    </div>
                    <div class="arrow">→</div>
                    <div class="step">
                        <strong>Step 5</strong><br>
                        結果を出力<br>
                        [3,5,6,4]
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>🧮 Step 3: カウンティング処理の詳細</h2>
                <div class="diagram">
                    <h3>wrongCount配列の変化過程</h3>

                    <div style="margin: 30px 0;">
                        <h4>初期状態</h4>
                        <div class="array-visual">
                            <div class="array-cell">
                                <div class="array-index">index 0</div>
                                0
                            </div>
                            <div class="array-cell">
                                <div class="array-index">生徒1</div>
                                0
                            </div>
                            <div class="array-cell">
                                <div class="array-index">生徒2</div>
                                0
                            </div>
                            <div class="array-cell">
                                <div class="array-index">生徒3</div>
                                0
                            </div>
                            <div class="array-cell">
                                <div class="array-index">生徒4</div>
                                0
                            </div>
                        </div>
                    </div>

                    <div style="margin: 30px 0;">
                        <h4>問題1処理後 (A[0] = 1)</h4>
                        <div class="array-visual">
                            <div class="array-cell">
                                <div class="array-index">index 0</div>
                                0
                            </div>
                            <div class="array-cell highlight">
                                <div class="array-index">生徒1</div>
                                1
                            </div>
                            <div class="array-cell">
                                <div class="array-index">生徒2</div>
                                0
                            </div>
                            <div class="array-cell">
                                <div class="array-index">生徒3</div>
                                0
                            </div>
                            <div class="array-cell">
                                <div class="array-index">生徒4</div>
                                0
                            </div>
                        </div>
                    </div>

                    <div style="margin: 30px 0;">
                        <h4>問題2処理後 (A[1] = 4)</h4>
                        <div class="array-visual">
                            <div class="array-cell">
                                <div class="array-index">index 0</div>
                                0
                            </div>
                            <div class="array-cell">
                                <div class="array-index">生徒1</div>
                                1
                            </div>
                            <div class="array-cell">
                                <div class="array-index">生徒2</div>
                                0
                            </div>
                            <div class="array-cell">
                                <div class="array-index">生徒3</div>
                                0
                            </div>
                            <div class="array-cell highlight">
                                <div class="array-index">生徒4</div>
                                1
                            </div>
                        </div>
                    </div>

                    <div style="margin: 30px 0;">
                        <h4>全問題処理後の最終状態</h4>
                        <div class="array-visual">
                            <div class="array-cell">
                                <div class="array-index">index 0</div>
                                0
                            </div>
                            <div class="array-cell highlight">
                                <div class="array-index">生徒1</div>
                                3
                            </div>
                            <div class="array-cell highlight">
                                <div class="array-index">生徒2</div>
                                1
                            </div>
                            <div class="array-cell highlight">
                                <div class="array-index">生徒3</div>
                                0
                            </div>
                            <div class="array-cell highlight">
                                <div class="array-index">生徒4</div>
                                2
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>🎯 Step 4: 正解数計算の詳細</h2>
                <div class="diagram">
                    <h3>M - wrongCount[i] の計算</h3>
                    <table class="table">
                        <tr>
                            <th>生徒</th>
                            <th>間違えた問題数</th>
                            <th>計算式</th>
                            <th>正解数</th>
                        </tr>
                        <tr>
                            <td>生徒1</td>
                            <td>3</td>
                            <td>6 - 3</td>
                            <td style="background:#00b894; color:white;">3</td>
                        </tr>
                        <tr>
                            <td>生徒2</td>
                            <td>1</td>
                            <td>6 - 1</td>
                            <td style="background:#00b894; color:white;">5</td>
                        </tr>
                        <tr>
                            <td>生徒3</td>
                            <td>0</td>
                            <td>6 - 0</td>
                            <td style="background:#00b894; color:white;">6</td>
                        </tr>
                        <tr>
                            <td>生徒4</td>
                            <td>2</td>
                            <td>6 - 2</td>
                            <td style="background:#00b894; color:white;">4</td>
                        </tr>
                    </table>
                </div>
            </div>

            <div class="section">
                <h2>💾 メモリ使用量解析</h2>
                <div class="memory-visual">
                    <div class="memory-block">
                        <strong>wrongCount配列</strong><br>
                        (N+1) × 4 bytes<br>
                        = 5 × 4 = 20 bytes
                    </div>
                    <div class="memory-block">
                        <strong>wrongAnswers配列</strong><br>
                        M × 4 bytes<br>
                        = 6 × 4 = 24 bytes
                    </div>
                    <div class="memory-block">
                        <strong>correctCounts配列</strong><br>
                        N × 4 bytes<br>
                        = 4 × 4 = 16 bytes
                    </div>
                    <div class="memory-block">
                        <strong>その他変数</strong><br>
                        約 20 bytes<br>
                        (n, m, i など)
                    </div>
                </div>
                <div class="complexity-box">
                    <h3>🔍 総メモリ使用量</h3>
                    <p><strong>実例:</strong> 約 80 bytes</p>
                    <p><strong>一般式:</strong> O(N + M) ≈ 4N + 4M + 40 bytes</p>
                    <p><strong>最大ケース (N=M=200,000):</strong> 約 1.6 MB &lt;&lt; 1024 MB制限</p>
                </div>
            </div>

            <div class="section">
                <h2>⏱️ 時間計算量解析</h2>
                <div class="diagram">
                    <h3>各処理ステップの時間計算量</h3>
                    <table class="table">
                        <tr>
                            <th>処理ステップ</th>
                            <th>繰り返し回数</th>
                            <th>時間計算量</th>
                            <th>説明</th>
                        </tr>
                        <tr>
                            <td>配列初期化</td>
                            <td>N+1回</td>
                            <td>O(N)</td>
                            <td>wrongCount配列をゼロで初期化</td>
                        </tr>
                        <tr>
                            <td>カウンティング</td>
                            <td>M回</td>
                            <td>O(M)</td>
                            <td>各問題の間違いをカウント</td>
                        </tr>
                        <tr>
                            <td>正解数計算</td>
                            <td>N回</td>
                            <td>O(N)</td>
                            <td>M - wrongCount[i]を計算</td>
                        </tr>
                        <tr style="background:#667eea; color:white;">
                            <td><strong>総合計算量</strong></td>
                            <td>-</td>
                            <td><strong>O(N + M)</strong></td>
                            <td>線形時間で解決</td>
                        </tr>
                    </table>
                </div>

                <div class="complexity-box">
                    <h3>⚡ 実行時間予測</h3>
                    <p><strong>実例 (N=4, M=6):</strong> 約 0.001 ms</p>
                    <p><strong>最大ケース (N=M=200,000):</strong> 約 10-50 ms &lt;&lt; 1000 ms制限</p>
                    <p><strong>効率性:</strong> 最適解（これ以上高速化不可能）</p>
                </div>
            </div>

            <div class="section">
                <h2>🔧 コア関数の内部動作</h2>
                <div class="code-snippet">
                    function calculateCorrectAnswers(n: number, m: number, wrongAnswers: number[]): number[] {
                    // Step 1: 配列初期化 - O(N)
                    const wrongCount = new Array(n + 1).fill(0);

                    // Step 2: カウンティング - O(M)
                    for (const studentId of wrongAnswers) {
                    wrongCount[studentId]++; // 定数時間操作
                    }

                    // Step 3: 正解数計算 - O(N)
                    const correctCounts: number[] = [];
                    for (let i = 1; i <= n; i++) { correctCounts.push(m - wrongCount[i]); // 定数時間操作 } return correctCounts; } </div>

                        <div class="diagram">
                            <h3>🔄 各ループの詳細分析</h3>
                            <table class="table">
                                <tr>
                                    <th>ループ</th>
                                    <th>変数</th>
                                    <th>範囲</th>
                                    <th>操作</th>
                                    <th>各反復の処理時間</th>
                                </tr>
                                <tr>
                                    <td>カウンティングループ</td>
                                    <td>studentId</td>
                                    <td>wrongAnswers配列</td>
                                    <td>配列要素の増分</td>
                                    <td>O(1)</td>
                                </tr>
                                <tr>
                                    <td>結果計算ループ</td>
                                    <td>i</td>
                                    <td>1 から N</td>
                                    <td>減算と配列追加</td>
                                    <td>O(1)</td>
                                </tr>
                            </table>
                        </div>
                </div>

                <div class="section">
                    <h2>🎭 アルゴリズムの優位性</h2>
                    <div class="memory-visual">
                        <div class="memory-block" style="background: linear-gradient(135deg, #00b894, #00cec9);">
                            <strong>✅ 現在のアプローチ</strong><br>
                            時間: O(N + M)<br>
                            空間: O(N)<br>
                            実装: シンプル
                        </div>
                        <div class="memory-block" style="background: linear-gradient(135deg, #ff7675, #fd79a8);">
                            <strong>❌ 素朴なアプローチ</strong><br>
                            時間: O(N × M)<br>
                            空間: O(N × M)<br>
                            実装: 複雑
                        </div>
                    </div>

                    <div class="complexity-box" style="background: linear-gradient(135deg, #fdcb6e, #e17055);">
                        <h3>🚀 性能比較</h3>
                        <p><strong>最大ケースでの差:</strong></p>
                        <p>現在: 400,000 操作 vs 素朴: 40,000,000,000 操作</p>
                        <p><strong>速度向上:</strong> 約 100,000倍高速！</p>
                    </div>
                </div>
            </div>
    </body>

</html>