// ```javascript
/**
 * é–¢æ•°å: permuteUnique
 * ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:
 *   @param {number[]} nums - é‡è¤‡ã‚’å«ã‚€å¯èƒ½æ€§ãŒã‚ã‚‹æ•´æ•°é…åˆ—
 * è¿”å´å€¤:
 *   @return {number[][]} - ä¸€æ„ãªé †åˆ—ã®å…¨ãƒ‘ã‚¿ãƒ¼ãƒ³
 *
 * å‡¦ç†æ¦‚è¦:
 * 1. å…¥åŠ›é…åˆ—ã‚’ã‚½ãƒ¼ãƒˆã™ã‚‹ã“ã¨ã§ã€é‡è¤‡å‡¦ç†ã‚’å®¹æ˜“ã«ã™ã‚‹ã€‚
 * 2. ãƒãƒƒã‚¯ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã«ã‚ˆã‚Šé †åˆ—ã‚’ç”Ÿæˆã€‚
 * 3. ç›´å‰ã®è¦ç´ ã¨åŒã˜ã§ã€ã‹ã¤æœªä½¿ç”¨ã®å ´åˆã¯ã‚¹ã‚­ãƒƒãƒ—ã™ã‚‹ã“ã¨ã§é‡è¤‡é †åˆ—ã‚’é˜²ãã€‚
 *
 * è¨ˆç®—é‡:
 * - æ™‚é–“è¨ˆç®—é‡: O(n * n!) ï¼ˆé †åˆ—ç”Ÿæˆã®ç‰¹æ€§ä¸Šã€‚ãŸã ã—é‡è¤‡ã‚’æ’é™¤ã™ã‚‹ãŸã‚å¹³å‡çš„ã«ã¯å°‘ã—è»½æ¸›ã•ã‚Œã‚‹ï¼‰
 * - ç©ºé–“è¨ˆç®—é‡: O(n) ï¼ˆå†å¸°ã‚¹ã‚¿ãƒƒã‚¯ + ä½¿ç”¨ä¸­ãƒ•ãƒ©ã‚°é…åˆ—ï¼‰
 *
 * Node.js 18.16.1 å®Ÿè¡Œã‚’æƒ³å®š
 */
var permuteUnique = function (nums) {
    nums.sort((a, b) => a - b); // ã‚½ãƒ¼ãƒˆã§é‡è¤‡ç®¡ç†ã‚’ç°¡å˜ã«ã™ã‚‹
    const res = [];
    const used = new Array(nums.length).fill(false);
    const path = [];

    const backtrack = () => {
        if (path.length === nums.length) {
            res.push([...path]);
            return;
        }
        for (let i = 0; i < nums.length; i++) {
            // æ—¢ã«ä½¿ã£ãŸè¦ç´ ã¯ã‚¹ã‚­ãƒƒãƒ—
            if (used[i]) continue;
            // åŒã˜æ•°å­—ãŒç¶šãå ´åˆã€å‰ã®åŒã˜æ•°å­—ã‚’ä½¿ã£ã¦ã„ãªã‘ã‚Œã°ã‚¹ã‚­ãƒƒãƒ—ï¼ˆé‡è¤‡å›é¿ï¼‰
            if (i > 0 && nums[i] === nums[i - 1] && !used[i - 1]) continue;

            used[i] = true;
            path.push(nums[i]);

            backtrack();

            // æˆ»ã™å‡¦ç†
            path.pop();
            used[i] = false;
        }
    };

    backtrack();
    return res;
};
// ```

// ã“ã®å®Ÿè£…ã¯ **ãƒãƒƒã‚¯ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚° + ã‚½ãƒ¼ãƒˆ + ä½¿ç”¨ãƒ•ãƒ©ã‚°** ã‚’ç”¨ã„ã¦ã€åŠ¹ç‡çš„ã«é‡è¤‡ã‚’é¿ã‘ãªãŒã‚‰ä¸€æ„ãªé †åˆ—ã‚’ç”Ÿæˆã—ã¾ã™ã€‚
// å‡¦ç†æ™‚é–“ã¯æœ€æ‚ª O(n \* n!) ã§ã™ãŒã€`nums.length <= 8` ãªã®ã§ Node.js ç’°å¢ƒã§ååˆ†å®Ÿç”¨çš„ã§ã™ã€‚

// ğŸ‘‰ æ¬¡ã«ã€åŒã˜å‡¦ç†ã‚’ **ã‚ˆã‚Šãƒ¡ãƒ¢ãƒªå‰Šæ¸›ã—ãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³**ï¼ˆSet ã‚’ä½¿ã‚ãªã„ï¼‰ã§æ›¸ãç›´ã™ã“ã¨ã‚‚å¯èƒ½ã§ã™ãŒã€ãã‚Œã‚‚æç¤ºã—ã¾ã™ã‹ï¼Ÿ
