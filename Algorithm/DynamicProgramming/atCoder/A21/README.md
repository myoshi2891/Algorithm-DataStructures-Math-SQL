## **DPï¼ˆå‹•çš„è¨ˆç”»æ³•ï¼‰ã®å‡¦ç†ã«ã¤ã„ã¦è©³ã—ãè§£èª¬**

ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ **åŒºé–“DPï¼ˆRange DPï¼‰** ã‚’ç”¨ã„ãŸè§£æ³•ã«ãªã£ã¦ã„ã¾ã™ã€‚  
ä»¥ä¸‹ã®ãƒã‚¤ãƒ³ãƒˆã«æ²¿ã£ã¦ã€**DPã®çŠ¶æ…‹å®šç¾©ãƒ»é·ç§»ãƒ»è¨ˆç®—ã®æµã‚Œ** ã‚’è©³ã—ãè§£èª¬ã—ã¾ã™ã€‚

---

## **1. DPã®çŠ¶æ…‹å®šç¾©**

### **çŠ¶æ…‹ï¼ˆDPãƒ†ãƒ¼ãƒ–ãƒ«ã®å®šç¾©ï¼‰**

```js
const dp = Array.from({ length: N }, () => Array(N).fill(0));
```

- `dp[i][j]` ã¯ã€ã€Œ**ãƒ–ãƒ­ãƒƒã‚¯ã®åŒºé–“ `[i, j]` ã ã‘ãŒæ®‹ã£ã¦ã„ã‚‹çŠ¶æ…‹ã®ã¨ãã«å¾—ã‚‰ã‚Œã‚‹æœ€å¤§å¾—ç‚¹**ã€ã‚’è¡¨ã™ã€‚

---

## **2. é·ç§»ã®è€ƒãˆæ–¹**

å„ã‚¹ãƒ†ãƒƒãƒ—ã§ã€**ä»Šã‚ã‚‹åŒºé–“ `[i, j]` ã«å¯¾ã—ã¦ã€å·¦ç«¯ `i` ã¾ãŸã¯å³ç«¯ `j` ã«ãƒ–ãƒ­ãƒƒã‚¯ã‚’è¿½åŠ ** ã™ã‚‹ã€‚

### **â‘  å·¦ç«¯ `i` ã‚’æ‹¡å¼µã™ã‚‹å ´åˆ**

```js
if (left > 0) {
    const [P, A] = PA[left - 1]; // å·¦ã«è¿½åŠ ã™ã‚‹ãƒ–ãƒ­ãƒƒã‚¯ã®Pã¨A
    const score = left <= P - 1 && P - 1 <= right ? A : 0; // å¾—ç‚¹ã‚’å¾—ã‚‰ã‚Œã‚‹ã‹ãƒã‚§ãƒƒã‚¯
    dp[left - 1][right] = Math.max(dp[left - 1][right], dp[left][right] + score);
}
```

- **è¿½åŠ ã™ã‚‹ãƒ–ãƒ­ãƒƒã‚¯ã® `P` ãŒåŒºé–“ `[left, right]` å†…ã«ã‚ã‚‹ãªã‚‰ã€å¾—ç‚¹ `A` ã‚’ç²å¾—ã§ãã‚‹ã€‚**
- `dp[left - 1][right]` ã‚’æ›´æ–°ã™ã‚‹ã€‚

### **â‘¡ å³ç«¯ `j` ã‚’æ‹¡å¼µã™ã‚‹å ´åˆ**

```js
if (right < N - 1) {
    const [P, A] = PA[right + 1]; // å³ã«è¿½åŠ ã™ã‚‹ãƒ–ãƒ­ãƒƒã‚¯ã®Pã¨A
    const score = left <= P - 1 && P - 1 <= right ? A : 0; // å¾—ç‚¹ã‚’å¾—ã‚‰ã‚Œã‚‹ã‹ãƒã‚§ãƒƒã‚¯
    dp[left][right + 1] = Math.max(dp[left][right + 1], dp[left][right] + score);
}
```

- **è¿½åŠ ã™ã‚‹ãƒ–ãƒ­ãƒƒã‚¯ã® `P` ãŒåŒºé–“ `[left, right]` å†…ã«ã‚ã‚‹ãªã‚‰ã€å¾—ç‚¹ `A` ã‚’ç²å¾—ã§ãã‚‹ã€‚**
- `dp[left][right + 1]` ã‚’æ›´æ–°ã™ã‚‹ã€‚

---

## **3. DPã®è¨ˆç®—é †åºï¼ˆåŒºé–“ã®æ‹¡å¼µã®ä»•æ–¹ï¼‰**

### **å¹… `width` ã‚’ 0 ã‹ã‚‰ N-1 ã¾ã§å¢—ã‚„ã™**

```js
for (let width = 0; width < N; width++) {
  for (let left = 0; left + width < N; left++) {
    const right = left + width;
```

- **åŒºé–“ `[i, j]` ã®ã‚µã‚¤ã‚ºã‚’ 1 ã‹ã‚‰ N ã¾ã§é †ã«åºƒã’ã‚‹ã€‚**
- **å°ã•ã„åŒºé–“ã‹ã‚‰è¨ˆç®—ã™ã‚‹ã“ã¨ã§ã€å¤§ãã„åŒºé–“ã® `dp` æ›´æ–°ã«ä½¿ãˆã‚‹ã€‚**

---

## **4. æœ€é©è§£ã®å–å¾—**

```js
console.log(dp[0][N - 1]);
```

- `dp[0][N - 1]` ã¯ **ã™ã¹ã¦ã®ãƒ–ãƒ­ãƒƒã‚¯ã‚’ä½¿ã„åˆ‡ã£ãŸã¨ãã®æœ€å¤§å¾—ç‚¹** ãªã®ã§ã€ãã‚Œã‚’å‡ºåŠ›ã€‚

---

## **5. è¨ˆç®—é‡**

- `dp[i][j]` ã®è¨ˆç®—ã¯ **`O(1)`**ï¼ˆæœ€å¤§2å›ã®æ›´æ–°ï¼‰
- `i, j` ã®ãƒ«ãƒ¼ãƒ—ãŒ **`O(N^2)`**
- **å…¨ä½“ã®è¨ˆç®—é‡ã¯ `O(N^2)` ã§ååˆ†é«˜é€Ÿ**

---

## **6. å…·ä½“ä¾‹ã§ã®å‹•ä½œ**

### **å…¥åŠ›**

```
4
4 20
3 30
2 40
1 10
```

### **PAé…åˆ—**

```
PA = [
  (4, 20),
  (3, 30),
  (2, 40),
  (1, 10)
]
```

### **DPã®é·ç§»**

| **åŒºé–“ [i, j]** | **dp[i][j]** | **å¾—ç‚¹ã®è¨ˆç®—ï¼ˆã©ã¡ã‚‰ã®ç«¯ã‚’è¿½åŠ ã™ã‚‹ã‹ï¼‰** |
| --------------- | ------------ | ---------------------------------------- |
| [3,3]           | 0            | åˆæœŸçŠ¶æ…‹                                 |
| [2,3]           | 10           | å³ç«¯ã«4ã‚’è¿½åŠ ã—ã€å¾—ç‚¹10                  |
| [1,3]           | 40           | å³ç«¯ã«3ã‚’è¿½åŠ ã—ã€å¾—ç‚¹40                  |
| [0,3]           | 60           | å³ç«¯ã«2ã‚’è¿½åŠ ã—ã€å¾—ç‚¹20                  |
| [0,2]           | 50           | å³ç«¯ã«3ã‚’è¿½åŠ ã—ã€å¾—ç‚¹30                  |
| [0,1]           | 30           | å³ç«¯ã«2ã‚’è¿½åŠ ã—ã€å¾—ç‚¹30                  |
| [0,0]           | 0            | åˆæœŸçŠ¶æ…‹                                 |

---

## **7. ã¾ã¨ã‚**

- **`dp[i][j]` ã¯åŒºé–“ `[i, j]` ã§å¾—ã‚‰ã‚Œã‚‹æœ€å¤§å¾—ç‚¹ã‚’è¡¨ã™**
- **å·¦å³ã®ç«¯ã‚’æ‹¡å¼µã™ã‚‹å½¢ã§ `dp` ã‚’æ›´æ–°**
- **è¨ˆç®—é †åºã‚’å·¥å¤«ã—ã€O(NÂ²) ã®é«˜é€Ÿãª DP è§£æ³•ãŒå®Ÿç¾**

ã“ã®ã‚ˆã†ã«ã€**åŒºé–“DPã‚’ç”¨ã„ã‚‹ã“ã¨ã§ã€é©åˆ‡ãªã‚¹ã‚³ã‚¢è¨ˆç®—ãŒå¯èƒ½ã«ãªã£ã¦ã„ã¾ã™ï¼** ğŸš€
