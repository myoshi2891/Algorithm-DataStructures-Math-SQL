<!doctype html>
<html lang="ja">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>æœ€é•·å¢—åŠ éƒ¨åˆ†åˆ—ï¼ˆLISï¼‰å•é¡Œã®è©³ç´°è§£æ</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <link
            href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;600&family=Inter:wght@300;400;500;600;700&display=swap"
            rel="stylesheet"
        />
        <style>
            .fira-code {
                font-family: 'Fira Code', monospace;
            }

            .inter {
                font-family: 'Inter', sans-serif;
            }

            .syntax-keyword {
                color: #ff6b6b;
            }

            .syntax-function {
                color: #4ecdc4;
            }

            .syntax-variable {
                color: #45b7d1;
            }

            .syntax-string {
                color: #96ceb4;
            }

            .syntax-number {
                color: #ffeaa7;
            }

            .syntax-comment {
                color: #74b9ff;
                opacity: 0.8;
            }

            .code-block {
                background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
                border: 1px solid #0f3460;
                font-family: 'Fira Code', Consolas, 'Liberation Mono', Menlo, monospace !important;
            }

            .code-block pre {
                font-family: 'Fira Code', Consolas, 'Liberation Mono', Menlo, monospace !important;
                white-space: pre !important;
                overflow-x: auto;
                line-height: 1.6;
                margin: 0;
                padding: 0;
            }

            .code-line {
                display: flex;
                align-items: flex-start;
                min-height: 1.6em;
                line-height: 1.6;
                font-family: 'Fira Code', monospace;
                white-space: pre;
            }

            .line-number {
                color: #6b7280;
                user-select: none;
                width: 3rem;
                text-align: right;
                margin-right: 1rem;
                flex-shrink: 0;
                font-family: 'Fira Code', monospace;
            }

            .code-content {
                flex: 1;
                font-family: 'Fira Code', monospace;
                white-space: pre;
                overflow-x: visible;
            }

            .visualization-box {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            }

            .step-card {
                background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
                transition: all 0.3s ease;
            }

            .step-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            }

            .tree-node {
                transition: all 0.3s ease;
            }

            .tree-node:hover {
                transform: scale(1.1);
            }

            .dp-cell {
                transition: all 0.5s ease;
                border: 2px solid transparent;
            }

            .dp-cell.highlight {
                border-color: #ff6b6b;
                background-color: rgba(255, 107, 107, 0.2);
                transform: scale(1.05);
            }

            .arrow {
                stroke: #4ecdc4;
                stroke-width: 2;
                fill: none;
                marker-end: url(#arrowhead);
            }

            .complexity-badge {
                background: linear-gradient(45deg, #ff9a56, #ffad56);
            }

            /* ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆç”¨ã®ã‚¹ãƒšãƒ¼ã‚·ãƒ³ã‚° */
            .indent-1 {
                padding-left: 2rem;
            }

            .indent-2 {
                padding-left: 4rem;
            }

            .indent-3 {
                padding-left: 6rem;
            }

            .indent-4 {
                padding-left: 8rem;
            }
        </style>
    </head>

    <body class="bg-gradient-to-br from-gray-900 via-purple-900 to-violet-900 min-h-screen inter">
        <!-- Header -->
        <header class="bg-black bg-opacity-50 backdrop-blur-lg border-b border-purple-500">
            <div class="container mx-auto px-6 py-4">
                <h1 class="text-4xl font-bold text-white text-center">
                    æœ€é•·å¢—åŠ éƒ¨åˆ†åˆ—ï¼ˆLISï¼‰å•é¡Œã®è©³ç´°è§£æ
                </h1>
                <p class="text-purple-200 text-center mt-2">
                    Dynamic Programming Approach with Visualization
                </p>
            </div>
        </header>

        <div class="container mx-auto px-6 py-8">
            <!-- Problem Overview -->
            <section class="mb-12">
                <div
                    class="bg-white bg-opacity-10 backdrop-blur-lg rounded-xl p-6 border border-purple-300"
                >
                    <h2 class="text-3xl font-bold text-white mb-4">å•é¡Œã®æ¦‚è¦</h2>
                    <p class="text-purple-100 text-lg leading-relaxed">
                        næœ¬ã®æœ¨ãŒæ¨ªä¸€åˆ—ã«ä¸¦ã‚“ã§ãŠã‚Šã€ä½•æœ¬ã‹ã®æœ¨ã‚’ä¼æ¡ã—ã¦æ®‹ã£ãŸæœ¨ã®é«˜ã•ãŒå˜èª¿å¢—åŠ ã«ãªã‚‹ã‚ˆã†ã«ã—ãŸã„ã€‚
                        æ®‹ã›ã‚‹æœ¨ã®æœ€å¤§æœ¬æ•°ã‚’æ±‚ã‚ã‚‹å•é¡Œã§ã™ã€‚ã“ã‚Œã¯<span
                            class="text-yellow-300 font-semibold"
                            >æœ€é•·å¢—åŠ éƒ¨åˆ†åˆ—ï¼ˆLongest Increasing Subsequence, LISï¼‰</span
                        >å•é¡Œã¨ã—ã¦çŸ¥ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚
                    </p>
                </div>
            </section>

            <!-- Algorithm Explanation -->
            <section class="mb-12">
                <h2 class="text-3xl font-bold text-white mb-6">ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®è§£èª¬</h2>

                <!-- Step 1: Problem Transformation -->
                <div class="step-card rounded-xl p-6 mb-6 text-white">
                    <h3 class="text-2xl font-semibold mb-4">ğŸ“Š ã‚¹ãƒ†ãƒƒãƒ—1: å•é¡Œã®å¤‰æ›</h3>
                    <p class="text-lg mb-4">
                        é…åˆ— [100, 102, 101, 91, 199] ã‹ã‚‰æœ€é•·å¢—åŠ éƒ¨åˆ†åˆ—ã‚’è¦‹ã¤ã‘ã‚‹
                    </p>

                    <div class="visualization-box rounded-lg p-4 mb-4">
                        <div class="flex justify-center items-center space-x-4">
                            <div
                                class="tree-node bg-blue-500 rounded-lg p-3 text-center cursor-pointer"
                                data-index="0"
                            >
                                <div class="text-sm">æœ¨1</div>
                                <div class="font-bold">100</div>
                            </div>
                            <div
                                class="tree-node bg-blue-500 rounded-lg p-3 text-center cursor-pointer"
                                data-index="1"
                            >
                                <div class="text-sm">æœ¨2</div>
                                <div class="font-bold">102</div>
                            </div>
                            <div
                                class="tree-node bg-blue-500 rounded-lg p-3 text-center cursor-pointer"
                                data-index="2"
                            >
                                <div class="text-sm">æœ¨3</div>
                                <div class="font-bold">101</div>
                            </div>
                            <div
                                class="tree-node bg-blue-500 rounded-lg p-3 text-center cursor-pointer"
                                data-index="3"
                            >
                                <div class="text-sm">æœ¨4</div>
                                <div class="font-bold">91</div>
                            </div>
                            <div
                                class="tree-node bg-blue-500 rounded-lg p-3 text-center cursor-pointer"
                                data-index="4"
                            >
                                <div class="text-sm">æœ¨5</div>
                                <div class="font-bold">199</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 2: DP Table -->
                <div class="step-card rounded-xl p-6 mb-6 text-white">
                    <h3 class="text-2xl font-semibold mb-4">ğŸ”¢ ã‚¹ãƒ†ãƒƒãƒ—2: DPãƒ†ãƒ¼ãƒ–ãƒ«ã®æ§‹ç¯‰</h3>
                    <p class="text-lg mb-4">dp[i] = iç•ªç›®ã®æœ¨ã‚’æœ€å¾Œã¨ã™ã‚‹æœ€é•·å¢—åŠ éƒ¨åˆ†åˆ—ã®é•·ã•</p>

                    <div class="visualization-box rounded-lg p-4 mb-4">
                        <div class="grid grid-cols-5 gap-2 max-w-lg mx-auto">
                            <div class="text-center text-sm mb-2">æœ¨1 (100)</div>
                            <div class="text-center text-sm mb-2">æœ¨2 (102)</div>
                            <div class="text-center text-sm mb-2">æœ¨3 (101)</div>
                            <div class="text-center text-sm mb-2">æœ¨4 (91)</div>
                            <div class="text-center text-sm mb-2">æœ¨5 (199)</div>

                            <div
                                class="dp-cell bg-green-500 rounded p-3 text-center font-bold"
                                data-dp="0"
                            >
                                1
                            </div>
                            <div
                                class="dp-cell bg-green-500 rounded p-3 text-center font-bold"
                                data-dp="1"
                            >
                                2
                            </div>
                            <div
                                class="dp-cell bg-green-500 rounded p-3 text-center font-bold"
                                data-dp="2"
                            >
                                2
                            </div>
                            <div
                                class="dp-cell bg-green-500 rounded p-3 text-center font-bold"
                                data-dp="3"
                            >
                                1
                            </div>
                            <div
                                class="dp-cell bg-green-500 rounded p-3 text-center font-bold"
                                data-dp="4"
                            >
                                3
                            </div>
                        </div>
                    </div>

                    <button
                        id="animateDP"
                        class="bg-purple-600 hover:bg-purple-700 px-6 py-2 rounded-lg font-semibold transition-colors"
                    >
                        DPè¨ˆç®—ã‚’ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã§è¡¨ç¤º
                    </button>
                </div>

                <!-- Step 3: Code Analysis -->
                <div class="step-card rounded-xl p-6 mb-6 text-white">
                    <h3 class="text-2xl font-semibold mb-4">ğŸ’» ã‚¹ãƒ†ãƒƒãƒ—3: ã‚³ãƒ¼ãƒ‰ã®è©³ç´°è§£æ</h3>

                    <div class="code-block rounded-lg p-4 overflow-x-auto">
                        <pre><div class="code-line"><span class="line-number">1</span><span class="code-content"><span class="syntax-keyword">function</span> <span class="syntax-function">longestIncreasingSubsequence</span>(<span class="syntax-variable">n</span>, <span class="syntax-variable">heights</span>) {</span></div><div class="code-line"><span class="line-number">2</span><span class="code-content">  <span class="syntax-comment">// dp[i] = iç•ªç›®ã®æœ¨ã‚’æœ€å¾Œã¨ã™ã‚‹å¢—åŠ éƒ¨åˆ†åˆ—ã®æœ€å¤§é•·</span></span></div><div class="code-line"><span class="line-number">3</span><span class="code-content">  <span class="syntax-comment">// åˆæœŸå€¤ã¯å…¨ã¦1ï¼ˆå„æœ¨å˜ä½“ã®éƒ¨åˆ†åˆ—ï¼‰</span></span></div><div class="code-line"><span class="line-number">4</span><span class="code-content">  <span class="syntax-keyword">const</span> <span class="syntax-variable">dp</span> = <span class="syntax-keyword">new</span> <span class="syntax-function">Array</span>(<span class="syntax-variable">n</span>).<span class="syntax-function">fill</span>(<span class="syntax-number">1</span>);</span></div><div class="code-line"><span class="line-number">5</span><span class="code-content"></span></div><div class="code-line"><span class="line-number">6</span><span class="code-content">  <span class="syntax-comment">// å„æœ¨ã«ã¤ã„ã¦ã€ãã®æœ¨ã‚’æœ€å¾Œã¨ã™ã‚‹æœ€é•·å¢—åŠ éƒ¨åˆ†åˆ—ã®é•·ã•ã‚’è¨ˆç®—</span></span></div><div class="code-line"><span class="line-number">7</span><span class="code-content">  <span class="syntax-keyword">for</span> (<span class="syntax-keyword">let</span> <span class="syntax-variable">i</span> = <span class="syntax-number">1</span>; <span class="syntax-variable">i</span> &lt; <span class="syntax-variable">n</span>; <span class="syntax-variable">i</span>++) {</span></div><div class="code-line"><span class="line-number">8</span><span class="code-content">    <span class="syntax-comment">// iç•ªç›®ã®æœ¨ã‚ˆã‚Šå‰ã®å…¨ã¦ã®æœ¨ã‚’ãƒã‚§ãƒƒã‚¯</span></span></div><div class="code-line"><span class="line-number">9</span><span class="code-content">    <span class="syntax-keyword">for</span> (<span class="syntax-keyword">let</span> <span class="syntax-variable">j</span> = <span class="syntax-number">0</span>; <span class="syntax-variable">j</span> &lt; <span class="syntax-variable">i</span>; <span class="syntax-variable">j</span>++) {</span></div><div class="code-line"><span class="line-number">10</span><span class="code-content">      <span class="syntax-comment">// jç•ªç›®ã®æœ¨ã®é«˜ã•ãŒiç•ªç›®ã®æœ¨ã®é«˜ã•ã‚ˆã‚Šå°ã•ã„å ´åˆ</span></span></div><div class="code-line"><span class="line-number">11</span><span class="code-content">      <span class="syntax-keyword">if</span> (<span class="syntax-variable">heights</span>[<span class="syntax-variable">j</span>] &lt; <span class="syntax-variable">heights</span>[<span class="syntax-variable">i</span>]) {</span></div><div class="code-line"><span class="line-number">12</span><span class="code-content">        <span class="syntax-comment">// jç•ªç›®ã®æœ¨ã‚’æœ€å¾Œã¨ã™ã‚‹éƒ¨åˆ†åˆ—ã«iç•ªç›®ã®æœ¨ã‚’è¿½åŠ </span></span></div><div class="code-line"><span class="line-number">13</span><span class="code-content">        <span class="syntax-variable">dp</span>[<span class="syntax-variable">i</span>] = <span class="syntax-variable">Math</span>.<span class="syntax-function">max</span>(<span class="syntax-variable">dp</span>[<span class="syntax-variable">i</span>], <span class="syntax-variable">dp</span>[<span class="syntax-variable">j</span>] + <span class="syntax-number">1</span>);</span></div><div class="code-line"><span class="line-number">14</span><span class="code-content">      }</span></div><div class="code-line"><span class="line-number">15</span><span class="code-content">    }</span></div><div class="code-line"><span class="line-number">16</span><span class="code-content">  }</span></div><div class="code-line"><span class="line-number">17</span><span class="code-content"></span></div><div class="code-line"><span class="line-number">18</span><span class="code-content">  <span class="syntax-comment">// å…¨ã¦ã®dpå€¤ã®ä¸­ã§æœ€å¤§å€¤ã‚’è¿”ã™</span></span></div><div class="code-line"><span class="line-number">19</span><span class="code-content">  <span class="syntax-keyword">return</span> <span class="syntax-variable">Math</span>.<span class="syntax-function">max</span>(...<span class="syntax-variable">dp</span>);</span></div><div class="code-line"><span class="line-number">20</span><span class="code-content">}</span></div></pre>
                    </div>
                </div>
            </section>

            <!-- Complexity Analysis -->
            <section class="mb-12">
                <h2 class="text-3xl font-bold text-white mb-6">è¨ˆç®—é‡è§£æ</h2>

                <div class="grid md:grid-cols-2 gap-6">
                    <div
                        class="bg-white bg-opacity-10 backdrop-blur-lg rounded-xl p-6 border border-purple-300"
                    >
                        <h3 class="text-2xl font-semibold text-white mb-4">â±ï¸ æ™‚é–“è¨ˆç®—é‡</h3>
                        <div class="complexity-badge rounded-lg p-4 text-center mb-4">
                            <span class="text-2xl font-bold text-white">O(nÂ²)</span>
                        </div>
                        <ul class="text-purple-100 space-y-2">
                            <li>â€¢ å¤–å´ã®ãƒ«ãƒ¼ãƒ—: n-1 å›</li>
                            <li>â€¢ å†…å´ã®ãƒ«ãƒ¼ãƒ—: æœ€å¤§ n-1 å›</li>
                            <li>â€¢ ç·æ“ä½œå›æ•°: ç´„ nÂ²/2 å›</li>
                            <li>â€¢ n=5,000 â†’ ç´„ 12,500,000 å›</li>
                        </ul>
                    </div>

                    <div
                        class="bg-white bg-opacity-10 backdrop-blur-lg rounded-xl p-6 border border-purple-300"
                    >
                        <h3 class="text-2xl font-semibold text-white mb-4">ğŸ’¾ ç©ºé–“è¨ˆç®—é‡</h3>
                        <div class="complexity-badge rounded-lg p-4 text-center mb-4">
                            <span class="text-2xl font-bold text-white">O(n)</span>
                        </div>
                        <ul class="text-purple-100 space-y-2">
                            <li>â€¢ dpãƒ†ãƒ¼ãƒ–ãƒ«: n å€‹ã®æ•´æ•°</li>
                            <li>â€¢ heightsãƒ†ãƒ¼ãƒ–ãƒ«: n å€‹ã®æ•´æ•°</li>
                            <li>â€¢ ãã®ä»–å¤‰æ•°: å®šæ•°å€‹</li>
                            <li>â€¢ ç·ãƒ¡ãƒ¢ãƒª: ç´„ 8n ãƒã‚¤ãƒˆ</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Step-by-Step Execution -->
            <section class="mb-12">
                <h2 class="text-3xl font-bold text-white mb-6">å®Ÿè¡Œéç¨‹ã®è©³ç´°</h2>

                <div id="executionSteps" class="space-y-6">
                    <!-- Steps will be dynamically generated -->
                </div>

                <div class="text-center mt-6">
                    <button
                        id="stepByStep"
                        class="bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 px-8 py-3 rounded-lg font-semibold text-white transition-all transform hover:scale-105"
                    >
                        ã‚¹ãƒ†ãƒƒãƒ—å®Ÿè¡Œã‚’é–‹å§‹
                    </button>
                    <button
                        id="resetAnimation"
                        class="bg-gray-600 hover:bg-gray-700 px-8 py-3 rounded-lg font-semibold text-white ml-4 transition-colors"
                    >
                        ãƒªã‚»ãƒƒãƒˆ
                    </button>
                </div>
            </section>

            <!-- Optimization Section -->
            <section class="mb-12">
                <div class="bg-opacity-10 backdrop-blur-lg rounded-xl p-6 border border-purple-300">
                    <h2 class="text-3xl font-bold text-white mb-4">
                        ğŸš€ æœ€é©åŒ–ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆO(n log n)ï¼‰
                    </h2>
                    <p class="text-white text-lg mb-4">
                        ã‚ˆã‚Šå¤§ããªãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã«å¯¾ã—ã¦ã¯ã€äºŒåˆ†æ¢ç´¢ã‚’ä½¿ç”¨ã—ãŸO(n log
                        n)ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚‚å®Ÿè£…å¯èƒ½ã§ã™ã€‚
                    </p>

                    <div class="code-block rounded-lg p-4 overflow-x-auto text-white">
                        <pre><div class="code-line"><span class="line-number">1</span><span class="code-content"><span class="syntax-keyword">function</span> <span class="syntax-function">longestIncreasingSubsequenceOptimized</span>(<span class="syntax-variable">n</span>, <span class="syntax-variable">heights</span>) {</span></div><div class="code-line"><span class="line-number">2</span><span class="code-content">    <span class="syntax-comment">// tails[i] = é•·ã•i+1ã®å¢—åŠ éƒ¨åˆ†åˆ—ã®æœ«å°¾è¦ç´ ã®æœ€å°å€¤</span></span></div><div class="code-line"><span class="line-number">3</span><span class="code-content">    <span class="syntax-keyword">const</span> <span class="syntax-variable">tails</span> = [];</span></div><div class="code-line"><span class="line-number">4</span><span class="code-content">    </span></div><div class="code-line"><span class="line-number">5</span><span class="code-content">    <span class="syntax-keyword">for</span> (<span class="syntax-keyword">let</span> <span class="syntax-variable">i</span> = <span class="syntax-number">0</span>; <span class="syntax-variable">i</span> &lt; <span class="syntax-variable">n</span>; <span class="syntax-variable">i</span>++) {</span></div><div class="code-line"><span class="line-number">6</span><span class="code-content">        <span class="syntax-keyword">const</span> <span class="syntax-variable">height</span> = <span class="syntax-variable">heights</span>[<span class="syntax-variable">i</span>];</span></div><div class="code-line"><span class="line-number">7</span><span class="code-content">        </span></div><div class="code-line"><span class="line-number">8</span><span class="code-content">        <span class="syntax-comment">// äºŒåˆ†æ¢ç´¢ã§æŒ¿å…¥ä½ç½®ã‚’è¦‹ã¤ã‘ã‚‹</span></span></div><div class="code-line"><span class="line-number">9</span><span class="code-content">        <span class="syntax-keyword">let</span> <span class="syntax-variable">left</span> = <span class="syntax-number">0</span>;</span></div><div class="code-line"><span class="line-number">10</span><span class="code-content">        <span class="syntax-keyword">let</span> <span class="syntax-variable">right</span> = <span class="syntax-variable">tails</span>.<span class="syntax-variable">length</span>;</span></div><div class="code-line"><span class="line-number">11</span><span class="code-content">        </span></div><div class="code-line"><span class="line-number">12</span><span class="code-content">        <span class="syntax-keyword">while</span> (<span class="syntax-variable">left</span> &lt; <span class="syntax-variable">right</span>) {</span></div><div class="code-line"><span class="line-number">13</span><span class="code-content">            <span class="syntax-keyword">const</span> <span class="syntax-variable">mid</span> = <span class="syntax-variable">Math</span>.<span class="syntax-function">floor</span>((<span class="syntax-variable">left</span> + <span class="syntax-variable">right</span>) / <span class="syntax-number">2</span>);</span></div><div class="code-line"><span class="line-number">14</span><span class="code-content">            <span class="syntax-keyword">if</span> (<span class="syntax-variable">tails</span>[<span class="syntax-variable">mid</span>] &lt; <span class="syntax-variable">height</span>) {</span></div><div class="code-line"><span class="line-number">15</span><span class="code-content">                <span class="syntax-variable">left</span> = <span class="syntax-variable">mid</span> + <span class="syntax-number">1</span>;</span></div><div class="code-line"><span class="line-number">16</span><span class="code-content">            } <span class="syntax-keyword">else</span> {</span></div><div class="code-line"><span class="line-number">17</span><span class="code-content">                <span class="syntax-variable">right</span> = <span class="syntax-variable">mid</span>;</span></div><div class="code-line"><span class="line-number">18</span><span class="code-content">            }</span></div><div class="code-line"><span class="line-number">19</span><span class="code-content">        }</span></div><div class="code-line"><span class="line-number">20</span><span class="code-content">        </span></div><div class="code-line"><span class="line-number">21</span><span class="code-content">        <span class="syntax-comment">// æŒ¿å…¥ã¾ãŸã¯æ›´æ–°</span></span></div><div class="code-line"><span class="line-number">22</span><span class="code-content">        <span class="syntax-keyword">if</span> (<span class="syntax-variable">left</span> === <span class="syntax-variable">tails</span>.<span class="syntax-variable">length</span>) {</span></div><div class="code-line"><span class="line-number">23</span><span class="code-content">            <span class="syntax-variable">tails</span>.<span class="syntax-function">push</span>(<span class="syntax-variable">height</span>);</span></div><div class="code-line"><span class="line-number">24</span><span class="code-content">        } <span class="syntax-keyword">else</span> {</span></div><div class="code-line"><span class="line-number">25</span><span class="code-content">            <span class="syntax-variable">tails</span>[<span class="syntax-variable">left</span>] = <span class="syntax-variable">height</span>;</span></div><div class="code-line"><span class="line-number">26</span><span class="code-content">        }</span></div><div class="code-line"><span class="line-number">27</span><span class="code-content">    }</span></div><div class="code-line"><span class="line-number">28</span><span class="code-content">    </span></div><div class="code-line"><span class="line-number">29</span><span class="code-content">    <span class="syntax-keyword">return</span> <span class="syntax-variable">tails</span>.<span class="syntax-variable">length</span>;</span></div><div class="code-line"><span class="line-number">30</span><span class="code-content">}</span></div></pre>
                    </div>
                </div>
            </section>
        </div>

        <script>
            // Animation state
            let currentStep = 0;
            let isAnimating = false;
            const heights = [100, 102, 101, 91, 199];
            const dp = [1, 1, 1, 1, 1];

            // Initialize execution steps
            function initializeExecutionSteps() {
                const steps = [
                    {
                        i: 1,
                        j: 0,
                        condition: '100 < 102',
                        action: 'dp[1] = max(1, 1+1) = 2',
                        dp: [1, 2, 1, 1, 1],
                    },
                    {
                        i: 2,
                        j: 0,
                        condition: '100 < 101',
                        action: 'dp[2] = max(1, 1+1) = 2',
                        dp: [1, 2, 2, 1, 1],
                    },
                    {
                        i: 2,
                        j: 1,
                        condition: '102 > 101',
                        action: 'æ¡ä»¶ä¸ä¸€è‡´ã€ã‚¹ã‚­ãƒƒãƒ—',
                        dp: [1, 2, 2, 1, 1],
                    },
                    {
                        i: 3,
                        j: 0,
                        condition: '100 > 91',
                        action: 'æ¡ä»¶ä¸ä¸€è‡´ã€ã‚¹ã‚­ãƒƒãƒ—',
                        dp: [1, 2, 2, 1, 1],
                    },
                    {
                        i: 3,
                        j: 1,
                        condition: '102 > 91',
                        action: 'æ¡ä»¶ä¸ä¸€è‡´ã€ã‚¹ã‚­ãƒƒãƒ—',
                        dp: [1, 2, 2, 1, 1],
                    },
                    {
                        i: 3,
                        j: 2,
                        condition: '101 > 91',
                        action: 'æ¡ä»¶ä¸ä¸€è‡´ã€ã‚¹ã‚­ãƒƒãƒ—',
                        dp: [1, 2, 2, 1, 1],
                    },
                    {
                        i: 4,
                        j: 0,
                        condition: '100 < 199',
                        action: 'dp[4] = max(1, 1+1) = 2',
                        dp: [1, 2, 2, 1, 2],
                    },
                    {
                        i: 4,
                        j: 1,
                        condition: '102 < 199',
                        action: 'dp[4] = max(2, 2+1) = 3',
                        dp: [1, 2, 2, 1, 3],
                    },
                    {
                        i: 4,
                        j: 2,
                        condition: '101 < 199',
                        action: 'dp[4] = max(3, 2+1) = 3',
                        dp: [1, 2, 2, 1, 3],
                    },
                    {
                        i: 4,
                        j: 3,
                        condition: '91 < 199',
                        action: 'dp[4] = max(3, 1+1) = 3',
                        dp: [1, 2, 2, 1, 3],
                    },
                ];

                const container = document.getElementById('executionSteps');
                container.innerHTML = steps
                    .map(
                        (step, index) => `
                    <div class="step-execution bg-white bg-opacity-10 backdrop-blur-lg rounded-xl p-6 border border-purple-300 opacity-30 transition-all duration-500" data-step="${index}">
                        <h4 class="text-xl font-semibold text-white mb-3">
                            ã‚¹ãƒ†ãƒƒãƒ— ${index + 1}: i=${step.i}, j=${step.j}
                        </h4>
                        <div class="grid md:grid-cols-3 gap-4">
                            <div>
                                <span class="text-purple-200 font-semibold">æ¡ä»¶ãƒã‚§ãƒƒã‚¯:</span>
                                <p class="text-white">${step.condition}</p>
                            </div>
                            <div>
                                <span class="text-purple-200 font-semibold">å®Ÿè¡Œå†…å®¹:</span>
                                <p class="text-white">${step.action}</p>
                            </div>
                            <div>
                                <span class="text-purple-200 font-semibold">DPçŠ¶æ…‹:</span>
                                <p class="text-white fira-code">[${step.dp.join(', ')}]</p>
                            </div>
                        </div>
                    </div>
                `,
                    )
                    .join('');
            }

            // Step-by-step animation
            function runStepByStep() {
                if (isAnimating) return;
                isAnimating = true;

                const steps = document.querySelectorAll('.step-execution');
                currentStep = 0;

                function nextStep() {
                    if (currentStep < steps.length) {
                        steps[currentStep].style.opacity = '1';
                        steps[currentStep].style.transform = 'translateX(0)';
                        currentStep++;
                        setTimeout(nextStep, 1000);
                    } else {
                        isAnimating = false;
                    }
                }

                nextStep();
            }

            // Reset animation
            function resetAnimation() {
                const steps = document.querySelectorAll('.step-execution');
                steps.forEach((step) => {
                    step.style.opacity = '0.3';
                    step.style.transform = 'translateX(-20px)';
                });
                currentStep = 0;
                isAnimating = false;
            }

            // DP animation
            function animateDP() {
                const dpCells = document.querySelectorAll('.dp-cell');
                let index = 0;

                function highlightCell() {
                    if (index < dpCells.length) {
                        dpCells.forEach((cell) => cell.classList.remove('highlight'));
                        dpCells[index].classList.add('highlight');
                        index++;
                        setTimeout(highlightCell, 800);
                    } else {
                        setTimeout(() => {
                            dpCells.forEach((cell) => cell.classList.remove('highlight'));
                        }, 1000);
                    }
                }

                highlightCell();
            }

            // Tree node interactions
            function setupTreeNodeInteractions() {
                const treeNodes = document.querySelectorAll('.tree-node');
                treeNodes.forEach((node, index) => {
                    node.addEventListener('click', () => {
                        treeNodes.forEach((n) => n.classList.remove('bg-red-500'));
                        node.classList.add('bg-red-500');

                        // Show possible connections
                        const currentHeight = heights[index];
                        treeNodes.forEach((n, i) => {
                            if (i > index && heights[i] > currentHeight) {
                                n.classList.add('bg-green-500');
                            }
                        });
                    });
                });
            }

            // Event listeners
            document.addEventListener('DOMContentLoaded', () => {
                initializeExecutionSteps();
                setupTreeNodeInteractions();

                document.getElementById('stepByStep').addEventListener('click', runStepByStep);
                document.getElementById('resetAnimation').addEventListener('click', resetAnimation);
                document.getElementById('animateDP').addEventListener('click', animateDP);
            });

            // Initial setup
            resetAnimation();
        </script>
    </body>
</html>
