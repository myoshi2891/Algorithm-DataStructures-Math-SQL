<!doctype html>
<html lang="ja">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>èƒŒã®é †åŒºé–“ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ  - è©³ç´°è§£æ</title>
        <link
            href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css"
            rel="stylesheet"
        />
        <link
            href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css"
            rel="stylesheet"
        />
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                min-height: 100vh;
                color: #333;
            }

            .container {
                max-width: 1200px;
                margin: 0 auto;
                padding: 20px;
            }

            h1 {
                text-align: center;
                color: white;
                margin-bottom: 30px;
                font-size: 2.5em;
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            }

            .section {
                background: white;
                border-radius: 15px;
                padding: 25px;
                margin-bottom: 30px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
                transition:
                    transform 0.3s ease,
                    box-shadow 0.3s ease;
            }

            .section:hover {
                transform: translateY(-5px);
                box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
            }

            .section h2 {
                color: #4a5568;
                margin-bottom: 20px;
                border-left: 4px solid #667eea;
                padding-left: 15px;
                font-size: 1.8em;
            }

            .code-container {
                position: relative;
                margin: 20px 0;
                border-radius: 10px;
                overflow: hidden;
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            }

            pre[class*='language-'] {
                font-family: 'Fira Code', 'Monaco', 'Consolas', monospace !important;
                font-size: 14px;
                line-height: 1.5;
                margin: 0;
                padding: 20px;
                background: #2d3748 !important;
                border-radius: 10px;
                transition: all 0.3s ease;
            }

            pre[class*='language-']:hover {
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            }

            .line-numbers .line-numbers-rows {
                border-right: 1px solid #4a5568;
                padding-right: 10px;
                margin-right: 15px;
            }

            .visualization {
                display: flex;
                flex-wrap: wrap;
                gap: 20px;
                margin: 20px 0;
                justify-content: center;
            }

            .step-card {
                background: linear-gradient(135deg, #f6f9fc 0%, #e9f4ff 100%);
                border: 2px solid #e2e8f0;
                border-radius: 12px;
                padding: 20px;
                min-width: 300px;
                max-width: 400px;
                transition: all 0.3s ease;
                cursor: pointer;
            }

            .step-card:hover {
                border-color: #667eea;
                transform: scale(1.02);
                box-shadow: 0 8px 25px rgba(102, 126, 234, 0.15);
            }

            .step-title {
                font-weight: bold;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 1.2em;
            }

            .array-visualization {
                display: flex;
                gap: 5px;
                margin: 15px 0;
                flex-wrap: wrap;
                justify-content: center;
            }

            .array-item {
                background: #4299e1;
                color: white;
                padding: 8px 12px;
                border-radius: 6px;
                font-weight: bold;
                min-width: 40px;
                text-align: center;
                transition: all 0.3s ease;
                cursor: pointer;
            }

            .array-item:hover {
                background: #3182ce;
                transform: translateY(-3px);
                box-shadow: 0 4px 12px rgba(66, 153, 225, 0.4);
            }

            .array-item.highlight {
                background: #f56565;
                animation: pulse 1s infinite;
            }

            .array-item.dp {
                background: #48bb78;
            }

            @keyframes pulse {
                0%,
                100% {
                    opacity: 1;
                }

                50% {
                    opacity: 0.7;
                }
            }

            .complexity-box {
                background: linear-gradient(135deg, #fef5e7 0%, #fbd38d 100%);
                border-left: 5px solid #ed8936;
                padding: 20px;
                border-radius: 8px;
                margin: 20px 0;
            }

            .algorithm-flow {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 20px;
                margin: 20px 0;
            }

            .flow-step {
                background: white;
                border: 2px solid #e2e8f0;
                border-radius: 10px;
                padding: 20px;
                text-align: center;
                position: relative;
                transition: all 0.3s ease;
            }

            .flow-step:hover {
                border-color: #667eea;
                box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
            }

            .flow-step::after {
                content: 'â†’';
                position: absolute;
                right: -15px;
                top: 50%;
                transform: translateY(-50%);
                font-size: 24px;
                color: #667eea;
            }

            .flow-step:last-child::after {
                display: none;
            }

            .interactive-demo {
                background: #f7fafc;
                border-radius: 10px;
                padding: 20px;
                margin: 20px 0;
            }

            .demo-controls {
                display: flex;
                gap: 10px;
                margin-bottom: 20px;
                justify-content: center;
                flex-wrap: wrap;
            }

            .demo-button {
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 6px;
                cursor: pointer;
                transition: all 0.3s ease;
                font-weight: bold;
            }

            .demo-button:hover {
                background: #5a67d8;
                transform: translateY(-2px);
                box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
            }

            .demo-button:active {
                transform: translateY(0);
            }

            .explanation-text {
                background: #ebf8ff;
                border-left: 4px solid #3182ce;
                padding: 15px;
                margin: 15px 0;
                border-radius: 0 8px 8px 0;
            }

            @media (max-width: 768px) {
                .container {
                    padding: 10px;
                }

                .section {
                    padding: 15px;
                }

                h1 {
                    font-size: 2em;
                }

                .step-card {
                    min-width: 250px;
                }
            }
        </style>
    </head>

    <body>
        <div class="container">
            <h1>ğŸ”¢ èƒŒã®é †åŒºé–“ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ  - è©³ç´°è§£æ</h1>

            <!-- ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ æ¦‚è¦ -->
            <div class="section">
                <h2>ğŸ“‹ ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ æ¦‚è¦</h2>
                <p>
                    ã“ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯<strong>å‹•çš„ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ï¼ˆDPï¼‰</strong>ã‚’ä½¿ç”¨ã—ã¦ã€é€£ç¶šã™ã‚‹èº«é•·ã®éæ¸›å°‘åŒºé–“ã®æœ€å¤§é•·ã‚’åŠ¹ç‡çš„ã«æ±‚ã‚ã¾ã™ã€‚
                </p>

                <div class="algorithm-flow">
                    <div class="flow-step">
                        <h3>å…¥åŠ›èª­ã¿å–ã‚Š</h3>
                        <p>äººæ•°nã¨å„äººã®èº«é•·ã‚’é…åˆ—ã«æ ¼ç´</p>
                    </div>
                    <div class="flow-step">
                        <h3>DPåˆæœŸåŒ–</h3>
                        <p>dp[1] = 1ã¨ã—ã¦é–‹å§‹</p>
                    </div>
                    <div class="flow-step">
                        <h3>DPè¨ˆç®—</h3>
                        <p>å„ä½ç½®ã§å‰ã®äººã¨ã®æ¯”è¼ƒã‚’å®Ÿè¡Œ</p>
                    </div>
                    <div class="flow-step">
                        <h3>æœ€å¤§å€¤å–å¾—</h3>
                        <p>dpé…åˆ—ã‹ã‚‰æœ€å¤§å€¤ã‚’è¿”ã™</p>
                    </div>
                </div>
            </div>

            <!-- ã‚³ãƒ¼ãƒ‰è¡¨ç¤º -->
            <div class="section">
                <h2>ğŸ’» å®Ÿè£…ã‚³ãƒ¼ãƒ‰</h2>
                <div class="code-container">
                    <pre
                        class="line-numbers"
                    ><code class="language-javascript">const fs = require('fs');

/**
 * æ¨™æº–å…¥åŠ›ã‹ã‚‰æ–‡å­—åˆ—ã‚’èª­ã¿å–ã‚Šã€èƒŒã®é †åŒºé–“ã®æœ€é•·é•·ã•ã‚’è¨ˆç®—ã™ã‚‹
 * @param {string} input - æ¨™æº–å…¥åŠ›ã®æ–‡å­—åˆ—
 * @returns {number} èƒŒã®é †ã§ã‚ã‚‹ã‚ˆã†ãªåŒºé–“ã®ã†ã¡ã€æœ€é•·ã§ã‚ã‚‹ã‚‚ã®ã®é•·ã•
 */
function findLongestNonDecreasingSequence(input) {
    const lines = input.trim().split('\n');
    const n = parseInt(lines[0]);
    
    // èº«é•·ãƒ‡ãƒ¼ã‚¿ã‚’é…åˆ—ã«æ ¼ç´ï¼ˆ1-indexedã§æ‰±ã†ãŸã‚å…ˆé ­ã«0ã‚’è¿½åŠ ï¼‰
    const heights = [0]; // heights[0]ã¯ä½¿ç”¨ã—ãªã„
    for (let i = 1; i <= n; i++) {
        heights.push(parseInt(lines[i]));
    }
    
    // dp[i] = äººiãŒå³ç«¯ã¨ãªã‚‹èƒŒã®é †åŒºé–“ã®æœ€é•·é•·ã•
    const dp = new Array(n + 1);
    dp[1] = 1; // æœ€åˆã®äººã¯é•·ã•1ã®åŒºé–“
    
    // å‹•çš„ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã§dpé…åˆ—ã‚’è¨ˆç®—
    for (let i = 2; i <= n; i++) {
        if (heights[i - 1] <= heights[i]) {
            // å‰ã®äººã®èº«é•·ä»¥ä¸Šãªã‚‰ã€å‰ã®åŒºé–“ã«è¿½åŠ ã§ãã‚‹
            dp[i] = dp[i - 1] + 1;
        } else {
            // å‰ã®äººã‚ˆã‚Šèº«é•·ãŒä½ã„ãªã‚‰ã€æ–°ã—ã„åŒºé–“ã®é–‹å§‹
            dp[i] = 1;
        }
    }
    
    // dpé…åˆ—ã®æœ€å¤§å€¤ã‚’æ±‚ã‚ã‚‹
    return Math.max(...dp.slice(1));
}

/**
 * ãƒ¡ã‚¤ãƒ³å‡¦ç†é–¢æ•°
 * æ¨™æº–å…¥åŠ›ã‚’èª­ã¿å–ã‚Šã€çµæœã‚’æ¨™æº–å‡ºåŠ›ã«å‡ºåŠ›ã™ã‚‹
 */
function main() {
    try {
        // æ¨™æº–å…¥åŠ›ã‚’åŒæœŸçš„ã«èª­ã¿å–ã‚Š
        const input = fs.readFileSync('/dev/stdin', 'utf8');
        
        // æœ€é•·ã®èƒŒã®é †åŒºé–“ã®é•·ã•ã‚’è¨ˆç®—
        const result = findLongestNonDecreasingSequence(input);
        
        // çµæœã‚’å‡ºåŠ›
        console.log(result);
        
    } catch (error) {
        console.error('Error reading input:', error);
        process.exit(1);
    }
}

// ãƒ¡ã‚¤ãƒ³å‡¦ç†ã‚’å®Ÿè¡Œ
main();</code></pre>
                </div>
            </div>

            <!-- å…·ä½“ä¾‹ã§ã®å‹•ä½œè§£æ -->
            <div class="section">
                <h2>ğŸ” å…·ä½“ä¾‹ã§ã®å‹•ä½œè§£æ</h2>
                <div class="explanation-text">
                    <strong>å…¥åŠ›ä¾‹:</strong> n=5, èº«é•·=[160, 178, 170, 190, 190]
                </div>

                <div class="interactive-demo">
                    <h3>ã‚¹ãƒ†ãƒƒãƒ—ãƒã‚¤ã‚¹ãƒ†ãƒƒãƒ—å®Ÿè¡Œ</h3>
                    <div class="demo-controls">
                        <button class="demo-button" onclick="resetDemo()">ãƒªã‚»ãƒƒãƒˆ</button>
                        <button class="demo-button" onclick="nextStep()">æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—</button>
                        <button class="demo-button" onclick="autoPlay()">è‡ªå‹•å®Ÿè¡Œ</button>
                    </div>

                    <div id="demo-content">
                        <div class="step-title">åˆæœŸçŠ¶æ…‹</div>
                        <div class="array-visualization" id="heights-array">
                            <div class="array-item">160</div>
                            <div class="array-item">178</div>
                            <div class="array-item">170</div>
                            <div class="array-item">190</div>
                            <div class="array-item">190</div>
                        </div>
                        <div class="array-visualization" id="dp-array">
                            <div class="array-item dp">1</div>
                            <div class="array-item dp">?</div>
                            <div class="array-item dp">?</div>
                            <div class="array-item dp">?</div>
                            <div class="array-item dp">?</div>
                        </div>
                        <div id="step-explanation">
                            <p><strong>åˆæœŸåŒ–:</strong> dp[1] = 1ï¼ˆæœ€åˆã®äººã¯é•·ã•1ã®åŒºé–“ï¼‰</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- å„å‡¦ç†ã‚¹ãƒ†ãƒƒãƒ—ã®è©³ç´° -->
            <div class="section">
                <h2>âš™ï¸ å„å‡¦ç†ã‚¹ãƒ†ãƒƒãƒ—ã®è©³ç´°</h2>
                <div class="visualization">
                    <div class="step-card">
                        <div class="step-title">ã‚¹ãƒ†ãƒƒãƒ— 1: i=2 (178)</div>
                        <p><strong>æ¯”è¼ƒ:</strong> 160 â‰¤ 178 âœ“</p>
                        <p><strong>å‡¦ç†:</strong> dp[2] = dp[1] + 1 = 2</p>
                        <p><strong>æ„å‘³:</strong> åŒºé–“[1,2]ãŒèƒŒã®é †ï¼ˆé•·ã•2ï¼‰</p>
                    </div>

                    <div class="step-card">
                        <div class="step-title">ã‚¹ãƒ†ãƒƒãƒ— 2: i=3 (170)</div>
                        <p><strong>æ¯”è¼ƒ:</strong> 178 > 170 âœ—</p>
                        <p><strong>å‡¦ç†:</strong> dp[3] = 1</p>
                        <p><strong>æ„å‘³:</strong> æ–°ã—ã„åŒºé–“é–‹å§‹ï¼ˆé•·ã•1ï¼‰</p>
                    </div>

                    <div class="step-card">
                        <div class="step-title">ã‚¹ãƒ†ãƒƒãƒ— 3: i=4 (190)</div>
                        <p><strong>æ¯”è¼ƒ:</strong> 170 â‰¤ 190 âœ“</p>
                        <p><strong>å‡¦ç†:</strong> dp[4] = dp[3] + 1 = 2</p>
                        <p><strong>æ„å‘³:</strong> åŒºé–“[3,4]ãŒèƒŒã®é †ï¼ˆé•·ã•2ï¼‰</p>
                    </div>

                    <div class="step-card">
                        <div class="step-title">ã‚¹ãƒ†ãƒƒãƒ— 4: i=5 (190)</div>
                        <p><strong>æ¯”è¼ƒ:</strong> 190 â‰¤ 190 âœ“</p>
                        <p><strong>å‡¦ç†:</strong> dp[5] = dp[4] + 1 = 3</p>
                        <p><strong>æ„å‘³:</strong> åŒºé–“[3,5]ãŒèƒŒã®é †ï¼ˆé•·ã•3ï¼‰</p>
                    </div>
                </div>
            </div>

            <!-- è¨ˆç®—é‡è§£æ -->
            <div class="section">
                <h2>ğŸ“Š è¨ˆç®—é‡è§£æ</h2>
                <div class="complexity-box">
                    <h3>ğŸ•’ æ™‚é–“è¨ˆç®—é‡: O(n)</h3>
                    <p>å„äººã«ã¤ã„ã¦ä¸€åº¦ã ã‘å‡¦ç†ã‚’è¡Œã†ãŸã‚ã€ç·šå½¢æ™‚é–“ã§è§£æ±ºã§ãã¾ã™ã€‚</p>
                    <ul style="margin-top: 10px; padding-left: 20px">
                        <li>å…¥åŠ›èª­ã¿å–ã‚Š: O(n)</li>
                        <li>DPé…åˆ—è¨ˆç®—: O(n)</li>
                        <li>æœ€å¤§å€¤å–å¾—: O(n)</li>
                        <li><strong>åˆè¨ˆ: O(n)</strong></li>
                    </ul>
                </div>

                <div
                    class="complexity-box"
                    style="
                        background: linear-gradient(135deg, #e6fffa 0%, #81e6d9 100%);
                        border-left-color: #38b2ac;
                    "
                >
                    <h3>ğŸ’¾ ç©ºé–“è¨ˆç®—é‡: O(n)</h3>
                    <p>èº«é•·é…åˆ—ã¨DPé…åˆ—ã®2ã¤ã®nè¦ç´ é…åˆ—ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</p>
                    <ul style="margin-top: 10px; padding-left: 20px">
                        <li>heightsé…åˆ—: O(n)</li>
                        <li>dpé…åˆ—: O(n)</li>
                        <li><strong>åˆè¨ˆ: O(n)</strong></li>
                    </ul>
                </div>
            </div>

            <!-- DPã®çŠ¶æ…‹é·ç§» -->
            <div class="section">
                <h2>ğŸ”„ å‹•çš„ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®çŠ¶æ…‹é·ç§»</h2>
                <div class="explanation-text">
                    <strong>çŠ¶æ…‹å®šç¾©:</strong> dp[i] = äººiãŒå³ç«¯ã¨ãªã‚‹èƒŒã®é †åŒºé–“ã®æœ€é•·é•·ã•
                </div>

                <div class="code-container">
                    <pre class="line-numbers"><code class="language-javascript">// çŠ¶æ…‹é·ç§»å¼
if (heights[i-1] <= heights[i]) {
    dp[i] = dp[i-1] + 1;  // å‰ã®åŒºé–“ã‚’å»¶é•·
} else {
    dp[i] = 1;            // æ–°ã—ã„åŒºé–“ã‚’é–‹å§‹
}</code></pre>
                </div>

                <div class="visualization">
                    <div class="step-card" style="width: 100%; max-width: none">
                        <div class="step-title">ğŸ§  ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®æ ¸å¿ƒ</div>
                        <p>
                            ã“ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®ç¾ã—ã•ã¯ã€<strong>å„ä½ç½®ã§å±€æ‰€çš„ãªåˆ¤æ–­</strong>ã‚’è¡Œã†ã“ã¨ã§ã€<strong>å…¨ä½“ã®æœ€é©è§£</strong>ã‚’æ±‚ã‚ã‚‰ã‚Œã‚‹ç‚¹ã«ã‚ã‚Šã¾ã™ã€‚
                        </p>
                        <p>
                            å‰ã®äººã‚ˆã‚Šèº«é•·ãŒé«˜ã„ã‹åŒã˜ãªã‚‰åŒºé–“ã‚’å»¶é•·ã—ã€ä½ã„ãªã‚‰æ–°ã—ã„åŒºé–“ã‚’é–‹å§‹ã™ã‚‹å˜ç´”ãªè¦å‰‡ã§ã€ã™ã¹ã¦ã®å¯èƒ½ãªèƒŒã®é †åŒºé–“ã‚’åŠ¹ç‡çš„ã«æ¢ç´¢ã§ãã¾ã™ã€‚
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>

        <script>
            let currentStep = 0;
            const heights = [160, 178, 170, 190, 190];
            const dpSteps = [
                { dp: [1, '?', '?', '?', '?'], explanation: 'åˆæœŸåŒ–: dp[1] = 1', highlight: 0 },
                {
                    dp: [1, 2, '?', '?', '?'],
                    explanation: 'i=2: 160 â‰¤ 178 ãªã®ã§ dp[2] = dp[1] + 1 = 2',
                    highlight: 1,
                },
                {
                    dp: [1, 2, 1, '?', '?'],
                    explanation: 'i=3: 178 > 170 ãªã®ã§ dp[3] = 1 (æ–°åŒºé–“é–‹å§‹)',
                    highlight: 2,
                },
                {
                    dp: [1, 2, 1, 2, '?'],
                    explanation: 'i=4: 170 â‰¤ 190 ãªã®ã§ dp[4] = dp[3] + 1 = 2',
                    highlight: 3,
                },
                {
                    dp: [1, 2, 1, 2, 3],
                    explanation: 'i=5: 190 â‰¤ 190 ãªã®ã§ dp[5] = dp[4] + 1 = 3',
                    highlight: 4,
                },
                {
                    dp: [1, 2, 1, 2, 3],
                    explanation: 'å®Œäº†: æœ€å¤§å€¤ã¯ 3 ï¼ˆåŒºé–“[3,5]ã®é•·ã•ï¼‰',
                    highlight: -1,
                },
            ];

            function resetDemo() {
                currentStep = 0;
                updateDemo();
            }

            function nextStep() {
                if (currentStep < dpSteps.length - 1) {
                    currentStep++;
                    updateDemo();
                }
            }

            function autoPlay() {
                resetDemo();
                const interval = setInterval(() => {
                    nextStep();
                    if (currentStep >= dpSteps.length - 1) {
                        clearInterval(interval);
                    }
                }, 1500);
            }

            function updateDemo() {
                const step = dpSteps[currentStep];
                const heightsArray = document.getElementById('heights-array');
                const dpArray = document.getElementById('dp-array');
                const explanation = document.getElementById('step-explanation');

                // Clear highlights
                heightsArray.querySelectorAll('.array-item').forEach((item, index) => {
                    item.classList.remove('highlight');
                    if (index === step.highlight) {
                        item.classList.add('highlight');
                    }
                });

                // Update DP array
                dpArray.innerHTML = '';
                step.dp.forEach((value, index) => {
                    const item = document.createElement('div');
                    item.className = 'array-item dp';
                    item.textContent = value;
                    if (index === step.highlight) {
                        item.classList.add('highlight');
                    }
                    dpArray.appendChild(item);
                });

                // Update explanation
                explanation.innerHTML = `<p><strong>ã‚¹ãƒ†ãƒƒãƒ— ${currentStep}:</strong> ${step.explanation}</p>`;
            }

            // Initialize demo
            updateDemo();
        </script>
    </body>
</html>
