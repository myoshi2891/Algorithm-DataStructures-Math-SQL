<!doctype html>
<html lang="ja">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Spiral Matrix Algorithm Analysis</title>
        <link
            href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css"
            rel="stylesheet"
        />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
        <link
            href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css"
            rel="stylesheet"
        />
        <style>
            @import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;600&family=Inter:wght@300;400;500;600;700&display=swap');

            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family: 'Inter', sans-serif;
                line-height: 1.6;
                color: #333;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                min-height: 100vh;
                padding: 20px;
            }

            .container {
                max-width: 1200px;
                margin: 0 auto;
                background: rgba(255, 255, 255, 0.95);
                border-radius: 20px;
                box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
                backdrop-filter: blur(10px);
                overflow: hidden;
            }

            .header {
                background: linear-gradient(135deg, #2d3748 0%, #4a5568 100%);
                color: white;
                padding: 30px;
                text-align: center;
            }

            h1 {
                font-size: 2.5rem;
                font-weight: 700;
                margin-bottom: 10px;
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            }

            .subtitle {
                font-size: 1.1rem;
                opacity: 0.9;
            }

            .content {
                padding: 40px;
            }

            .section {
                margin-bottom: 50px;
            }

            .section h2 {
                color: #2d3748;
                font-size: 1.8rem;
                margin-bottom: 20px;
                border-bottom: 3px solid #667eea;
                padding-bottom: 10px;
            }

            .code-container {
                background: #2d3748;
                border-radius: 15px;
                margin: 20px 0;
                overflow: hidden;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
                transition:
                    transform 0.3s ease,
                    box-shadow 0.3s ease;
            }

            .code-container:hover {
                transform: translateY(-5px);
                box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            }

            .code-header {
                background: linear-gradient(135deg, #4a5568 0%, #2d3748 100%);
                padding: 15px 20px;
                color: white;
                font-weight: 600;
                border-bottom: 1px solid #4a5568;
            }

            pre[class*='language-'] {
                font-family: 'Fira Code', 'Monaco', 'Consolas', monospace !important;
                font-size: 14px;
                line-height: 1.5;
                margin: 0;
                padding: 20px;
                background: #2d3748 !important;
            }

            .line-numbers .line-numbers-rows {
                border-right: 2px solid #4a5568;
                background: #1a202c;
            }

            .visualization {
                background: #f7fafc;
                border-radius: 15px;
                padding: 30px;
                margin: 20px 0;
                box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.05);
            }

            .matrix-demo {
                display: flex;
                flex-wrap: wrap;
                gap: 30px;
                justify-content: center;
                margin: 20px 0;
            }

            .matrix {
                display: grid;
                gap: 2px;
                background: #e2e8f0;
                padding: 10px;
                border-radius: 10px;
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            }

            .matrix.small {
                grid-template-columns: repeat(3, 50px);
            }

            .matrix.large {
                grid-template-columns: repeat(4, 45px);
            }

            .cell {
                width: 50px;
                height: 50px;
                background: white;
                border: 2px solid #cbd5e0;
                border-radius: 8px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-weight: 600;
                font-size: 14px;
                transition: all 0.3s ease;
                cursor: pointer;
            }

            .cell.large {
                width: 45px;
                height: 45px;
                font-size: 13px;
            }

            .cell:hover {
                transform: scale(1.1);
                box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
            }

            .step {
                background: white;
                border-radius: 12px;
                padding: 25px;
                margin: 15px 0;
                border-left: 5px solid #667eea;
                box-shadow: 0 3px 15px rgba(0, 0, 0, 0.05);
                transition: transform 0.2s ease;
            }

            .step:hover {
                transform: translateX(5px);
            }

            .step h3 {
                color: #667eea;
                font-size: 1.3rem;
                margin-bottom: 15px;
            }

            .step-number {
                background: #667eea;
                color: white;
                width: 30px;
                height: 30px;
                border-radius: 50%;
                display: inline-flex;
                align-items: center;
                justify-content: center;
                font-weight: 600;
                margin-right: 10px;
            }

            .complexity-box {
                background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
                color: white;
                padding: 25px;
                border-radius: 15px;
                margin: 20px 0;
                box-shadow: 0 10px 25px rgba(72, 187, 120, 0.3);
            }

            .complexity-box h3 {
                font-size: 1.5rem;
                margin-bottom: 15px;
            }

            .demo-controls {
                text-align: center;
                margin: 30px 0;
            }

            .btn {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                border: none;
                padding: 12px 25px;
                border-radius: 8px;
                font-size: 16px;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s ease;
                margin: 0 10px;
            }

            .btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
            }

            .arrow {
                color: #667eea;
                font-size: 1.5rem;
                font-weight: bold;
            }

            @media (max-width: 768px) {
                .container {
                    margin: 10px;
                    border-radius: 15px;
                }

                .content {
                    padding: 20px;
                }

                h1 {
                    font-size: 2rem;
                }

                .matrix-demo {
                    flex-direction: column;
                    align-items: center;
                }
            }
        </style>
    </head>

    <body>
        <div class="container">
            <div class="header">
                <h1>ğŸŒ€ Spiral Matrix Algorithm</h1>
                <p class="subtitle">TypeScriptå®Ÿè£…ã®è©³ç´°è§£æã¨å¯è¦–åŒ–</p>
            </div>

            <div class="content">
                <div class="section">
                    <h2>ğŸ“ å®Œå…¨ãªã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰</h2>
                    <div class="code-container">
                        <div class="code-header">
                            <span>spiralMatrix.ts</span>
                        </div>
                        <pre class="line-numbers"><code class="language-typescript">/**
 * è¡Œåˆ—ã‚’èºæ—‹çŠ¶ã®é †åºã§èª­ã¿å–ã‚Šã€è¦ç´ ã‚’é…åˆ—ã¨ã—ã¦è¿”ã™
 * @param matrix - m x n ã®æ•´æ•°è¡Œåˆ—
 * @returns èºæ—‹çŠ¶ã«èª­ã¿å–ã£ãŸè¦ç´ ã®é…åˆ—
 */
function spiralOrder(matrix: number[][]): number[] {
    // ç©ºã®è¡Œåˆ—ãƒã‚§ãƒƒã‚¯
    if (!matrix || matrix.length === 0 || matrix[0].length === 0) {
        return [];
    }
    
    const m = matrix.length;
    const n = matrix[0].length;
    const result: number[] = [];
    
    // å¢ƒç•Œã‚’å®šç¾©
    let top = 0;
    let bottom = m - 1;
    let left = 0;
    let right = n - 1;
    
    while (top <= bottom && left <= right) {
        // ä¸Šã®è¡Œã‚’å·¦ã‹ã‚‰å³ã¸
        for (let j = left; j <= right; j++) {
            result.push(matrix[top][j]);
        }
        top++;
        
        // å³ã®åˆ—ã‚’ä¸Šã‹ã‚‰ä¸‹ã¸
        for (let i = top; i <= bottom; i++) {
            result.push(matrix[i][right]);
        }
        right--;
        
        // ä¸‹ã®è¡Œã‚’å³ã‹ã‚‰å·¦ã¸ï¼ˆæ®‹ã‚Šã®è¡ŒãŒã‚ã‚‹å ´åˆï¼‰
        if (top <= bottom) {
            for (let j = right; j >= left; j--) {
                result.push(matrix[bottom][j]);
            }
            bottom--;
        }
        
        // å·¦ã®åˆ—ã‚’ä¸‹ã‹ã‚‰ä¸Šã¸ï¼ˆæ®‹ã‚Šã®åˆ—ãŒã‚ã‚‹å ´åˆï¼‰
        if (left <= right) {
            for (let i = bottom; i >= top; i--) {
                result.push(matrix[i][left]);
            }
            left++;
        }
    }
    
    return result;
}</code></pre>
                    </div>
                </div>

                <div class="section">
                    <h2>ğŸ¯ ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®å¯è¦–åŒ–</h2>
                    <div class="visualization">
                        <h3>Example 1: 3Ã—3 è¡Œåˆ—</h3>
                        <div class="matrix-demo">
                            <div class="matrix small" id="matrix1">
                                <div class="cell" data-value="1">1</div>
                                <div class="cell" data-value="2">2</div>
                                <div class="cell" data-value="3">3</div>
                                <div class="cell" data-value="4">4</div>
                                <div class="cell" data-value="5">5</div>
                                <div class="cell" data-value="6">6</div>
                                <div class="cell" data-value="7">7</div>
                                <div class="cell" data-value="8">8</div>
                                <div class="cell" data-value="9">9</div>
                            </div>
                            <div class="arrow">â†’</div>
                            <div id="result1">[1,2,3,6,9,8,7,4,5]</div>
                        </div>

                        <h3>Example 2: 3Ã—4 è¡Œåˆ—</h3>
                        <div class="matrix-demo">
                            <div class="matrix large" id="matrix2">
                                <div class="cell large" data-value="1">1</div>
                                <div class="cell large" data-value="2">2</div>
                                <div class="cell large" data-value="3">3</div>
                                <div class="cell large" data-value="4">4</div>
                                <div class="cell large" data-value="5">5</div>
                                <div class="cell large" data-value="6">6</div>
                                <div class="cell large" data-value="7">7</div>
                                <div class="cell large" data-value="8">8</div>
                                <div class="cell large" data-value="9">9</div>
                                <div class="cell large" data-value="10">10</div>
                                <div class="cell large" data-value="11">11</div>
                                <div class="cell large" data-value="12">12</div>
                            </div>
                            <div class="arrow">â†’</div>
                            <div id="result2">[1,2,3,4,8,12,11,10,9,5,6,7]</div>
                        </div>

                        <div class="demo-controls">
                            <button class="btn" onclick="animateSpiral(1)">
                                3Ã—3 ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
                            </button>
                            <button class="btn" onclick="animateSpiral(2)">
                                3Ã—4 ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
                            </button>
                            <button class="btn" onclick="resetAnimation()">ãƒªã‚»ãƒƒãƒˆ</button>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h2>ğŸ” ã‚¹ãƒ†ãƒƒãƒ—ãƒã‚¤ã‚¹ãƒ†ãƒƒãƒ—è§£æ</h2>

                    <div class="step">
                        <h3><span class="step-number">1</span>åˆæœŸåŒ–ã¨å¢ƒç•Œè¨­å®š</h3>
                        <div class="code-container">
                            <div class="code-header">åˆæœŸåŒ–å‡¦ç†</div>
                            <pre><code class="language-typescript">const m = matrix.length;        // è¡Œæ•°
const n = matrix[0].length;     // åˆ—æ•°
const result: number[] = [];    // çµæœé…åˆ—

// 4ã¤ã®å¢ƒç•Œã‚’è¨­å®š
let top = 0;        // ä¸Šå¢ƒç•Œ
let bottom = m - 1; // ä¸‹å¢ƒç•Œ  
let left = 0;       // å·¦å¢ƒç•Œ
let right = n - 1;  // å³å¢ƒç•Œ</code></pre>
                        </div>
                        <p>
                            4ã¤ã®å¢ƒç•Œå¤‰æ•°ã‚’ä½¿ã£ã¦ã€ç¾åœ¨å‡¦ç†ä¸­ã®ç¯„å›²ã‚’ç®¡ç†ã—ã¾ã™ã€‚ã“ã‚Œã‚‰ã®å¢ƒç•Œã¯å‡¦ç†ãŒé€²ã‚€ã«ã¤ã‚Œã¦å†…å´ã«ç§»å‹•ã—ã¾ã™ã€‚
                        </p>
                    </div>

                    <div class="step">
                        <h3><span class="step-number">2</span>å³æ–¹å‘ã¸ã®ç§»å‹•</h3>
                        <div class="code-container">
                            <div class="code-header">ä¸Šã®è¡Œã‚’å·¦ã‹ã‚‰å³ã¸</div>
                            <pre><code class="language-typescript">for (let j = left; j <= right; j++) {
    result.push(matrix[top][j]);
}
top++; // ä¸Šå¢ƒç•Œã‚’1è¡Œä¸‹ã«ç§»å‹•</code></pre>
                        </div>
                        <p>æœ€ä¸Šè¡Œã‚’å·¦ã‹ã‚‰å³ã«èª­ã¿å–ã‚Šã€å‡¦ç†å¾Œã«ä¸Šå¢ƒç•Œã‚’1è¡Œä¸‹ã«ç§»å‹•ã—ã¾ã™ã€‚</p>
                    </div>

                    <div class="step">
                        <h3><span class="step-number">3</span>ä¸‹æ–¹å‘ã¸ã®ç§»å‹•</h3>
                        <div class="code-container">
                            <div class="code-header">å³ã®åˆ—ã‚’ä¸Šã‹ã‚‰ä¸‹ã¸</div>
                            <pre><code class="language-typescript">for (let i = top; i <= bottom; i++) {
    result.push(matrix[i][right]);
}
right--; // å³å¢ƒç•Œã‚’1åˆ—å·¦ã«ç§»å‹•</code></pre>
                        </div>
                        <p>æœ€å³åˆ—ã‚’ä¸Šã‹ã‚‰ä¸‹ã«èª­ã¿å–ã‚Šã€å‡¦ç†å¾Œã«å³å¢ƒç•Œã‚’1åˆ—å·¦ã«ç§»å‹•ã—ã¾ã™ã€‚</p>
                    </div>

                    <div class="step">
                        <h3><span class="step-number">4</span>å·¦æ–¹å‘ã¸ã®ç§»å‹•</h3>
                        <div class="code-container">
                            <div class="code-header">ä¸‹ã®è¡Œã‚’å³ã‹ã‚‰å·¦ã¸</div>
                            <pre><code class="language-typescript">if (top <= bottom) {
    for (let j = right; j >= left; j--) {
        result.push(matrix[bottom][j]);
    }
    bottom--; // ä¸‹å¢ƒç•Œã‚’1è¡Œä¸Šã«ç§»å‹•
}</code></pre>
                        </div>
                        <p>
                            æœ€ä¸‹è¡Œã‚’å³ã‹ã‚‰å·¦ã«èª­ã¿å–ã‚Šã¾ã™ã€‚æ®‹ã‚Šã®è¡ŒãŒã‚ã‚‹å ´åˆã®ã¿å®Ÿè¡Œã—ã€å‡¦ç†å¾Œã«ä¸‹å¢ƒç•Œã‚’1è¡Œä¸Šã«ç§»å‹•ã—ã¾ã™ã€‚
                        </p>
                    </div>

                    <div class="step">
                        <h3><span class="step-number">5</span>ä¸Šæ–¹å‘ã¸ã®ç§»å‹•</h3>
                        <div class="code-container">
                            <div class="code-header">å·¦ã®åˆ—ã‚’ä¸‹ã‹ã‚‰ä¸Šã¸</div>
                            <pre><code class="language-typescript">if (left <= right) {
    for (let i = bottom; i >= top; i--) {
        result.push(matrix[i][left]);
    }
    left++; // å·¦å¢ƒç•Œã‚’1åˆ—å³ã«ç§»å‹•
}</code></pre>
                        </div>
                        <p>
                            æœ€å·¦åˆ—ã‚’ä¸‹ã‹ã‚‰ä¸Šã«èª­ã¿å–ã‚Šã¾ã™ã€‚æ®‹ã‚Šã®åˆ—ãŒã‚ã‚‹å ´åˆã®ã¿å®Ÿè¡Œã—ã€å‡¦ç†å¾Œã«å·¦å¢ƒç•Œã‚’1åˆ—å³ã«ç§»å‹•ã—ã¾ã™ã€‚
                        </p>
                    </div>
                </div>

                <div class="section">
                    <h2>âš¡ è¨ˆç®—é‡è§£æ</h2>
                    <div class="complexity-box">
                        <h3>ğŸ• æ™‚é–“è¨ˆç®—é‡: O(m Ã— n)</h3>
                        <p>å„è¦ç´ ã‚’æ­£ç¢ºã«1å›ã ã‘è¨ªå•ã™ã‚‹ãŸã‚ã€è¡Œåˆ—ã®ã‚µã‚¤ã‚ºã«ç·šå½¢æ¯”ä¾‹ã—ã¾ã™ã€‚</p>

                        <h3>ğŸ’¾ ç©ºé–“è¨ˆç®—é‡: O(1)</h3>
                        <p>
                            çµæœé…åˆ—ä»¥å¤–ã«ä½¿ç”¨ã™ã‚‹è¿½åŠ ãƒ¡ãƒ¢ãƒªã¯å¢ƒç•Œå¤‰æ•°ï¼ˆtop, bottom, left,
                            rightï¼‰ã®ã¿ã§ã€å®šæ•°é‡ã§ã™ã€‚
                        </p>
                    </div>
                </div>

                <div class="section">
                    <h2>ğŸ¨ é‡è¦ãªãƒã‚¤ãƒ³ãƒˆ</h2>
                    <div class="visualization">
                        <div class="step">
                            <h3>å¢ƒç•Œæ¡ä»¶ã®ãƒã‚§ãƒƒã‚¯</h3>
                            <p>
                                ä¸‹æ–¹å‘ã¨å·¦æ–¹å‘ã®ç§»å‹•ã§ã¯ã€é‡è¤‡å‡¦ç†ã‚’é¿ã‘ã‚‹ãŸã‚ã«å¢ƒç•Œæ¡ä»¶ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€å˜ä¸€è¡Œã‚„å˜ä¸€åˆ—ã®è¡Œåˆ—ã§ã‚‚æ­£ã—ãå‹•ä½œã—ã¾ã™ã€‚
                            </p>
                        </div>

                        <div class="step">
                            <h3>åŠ¹ç‡çš„ãªå¢ƒç•Œç®¡ç†</h3>
                            <p>
                                4ã¤ã®å¢ƒç•Œå¤‰æ•°ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€è¤‡é›‘ãªåº§æ¨™è¨ˆç®—ã‚’é¿ã‘ã€ã‚·ãƒ³ãƒ—ãƒ«ã§ç†è§£ã—ã‚„ã™ã„ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚
                            </p>
                        </div>

                        <div class="step">
                            <h3>TypeScript ã®å‹å®‰å…¨æ€§</h3>
                            <p>
                                æ˜ç¤ºçš„ãªå‹æ³¨é‡ˆã«ã‚ˆã‚Šã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã®å‹ãƒã‚§ãƒƒã‚¯ãŒå¯èƒ½ã§ã€å®Ÿè¡Œæ™‚ã‚¨ãƒ©ãƒ¼ã‚’é˜²ãã¾ã™ã€‚
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            let animationSpeed = 800;
            let currentAnimation = null;

            function resetAnimation() {
                if (currentAnimation) {
                    clearTimeout(currentAnimation);
                }

                document.querySelectorAll('.cell').forEach((cell) => {
                    cell.style.background = 'white';
                    cell.style.transform = 'scale(1)';
                    cell.style.border = '2px solid #cbd5e0';
                });
            }

            function animateSpiral(example) {
                resetAnimation();

                const sequences = {
                    1: [
                        [0, 1, 2], // å³
                        [5, 8], // ä¸‹
                        [7, 6], // å·¦
                        [3], // ä¸Š
                        [4], // ä¸­å¤®
                    ],
                    2: [
                        [0, 1, 2, 3], // å³
                        [7, 11], // ä¸‹
                        [10, 9, 8], // å·¦
                        [4], // ä¸Š
                        [5, 6], // ä¸­å¤®
                    ],
                };

                const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57'];
                const matrixId = `matrix${example}`;
                const cells = document.querySelectorAll(`#${matrixId} .cell`);

                let stepIndex = 0;
                let delay = 0;

                function animateStep() {
                    if (stepIndex < sequences[example].length) {
                        const sequence = sequences[example][stepIndex];
                        const color = colors[stepIndex % colors.length];

                        sequence.forEach((cellIndex, seqIndex) => {
                            currentAnimation = setTimeout(
                                () => {
                                    const cell = cells[cellIndex];
                                    cell.style.background = color;
                                    cell.style.transform = 'scale(1.2)';
                                    cell.style.border = `3px solid ${color}`;
                                    cell.style.boxShadow = `0 5px 15px ${color}40`;

                                    setTimeout(() => {
                                        cell.style.transform = 'scale(1)';
                                    }, 200);
                                },
                                delay + seqIndex * 200,
                            );
                        });

                        delay += sequence.length * 200 + 300;
                        stepIndex++;

                        currentAnimation = setTimeout(animateStep, sequence.length * 200 + 300);
                    }
                }

                animateStep();
            }

            // ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªãƒ›ãƒãƒ¼åŠ¹æœ
            document.querySelectorAll('.cell').forEach((cell) => {
                cell.addEventListener('mouseenter', function () {
                    if (!currentAnimation) {
                        this.style.background = '#667eea';
                        this.style.color = 'white';
                        this.style.transform = 'scale(1.1)';
                    }
                });

                cell.addEventListener('mouseleave', function () {
                    if (!currentAnimation) {
                        this.style.background = 'white';
                        this.style.color = '#333';
                        this.style.transform = 'scale(1)';
                    }
                });
            });

            // ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã®ãƒ›ãƒãƒ¼åŠ¹æœ
            document.querySelectorAll('.code-container').forEach((container) => {
                container.addEventListener('mouseenter', function () {
                    this.style.transform = 'translateY(-2px)';
                });

                container.addEventListener('mouseleave', function () {
                    this.style.transform = 'translateY(0)';
                });
            });
        </script>
    </body>
</html>
