<!-- ä»¥ä¸‹ã¯ã€**PHP 8.2.8** ã‚’ä½¿ç”¨ã—ãŸ `N ä»¥ä¸‹ã®ç´ æ•°ã‚’åˆ—æŒ™ã™ã‚‹` å•é¡Œã®è§£æ³•ã§ã™ã€‚
ã‚¨ãƒ©ãƒˆã‚¹ãƒ†ãƒã‚¹ã®ç¯©ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’ä½¿ã„ã€**é«˜é€ŸåŒ–ã®ãŸã‚ã«æ¨™æº–å‡ºåŠ›ã‚’ã¾ã¨ã‚ã¦å‡ºåŠ›**ã™ã‚‹å½¢å¼ã¨ã—ã€**é–¢æ•°åŒ–ï¼‹å‹æŒ‡å®š**ï¼‹**å‡¦ç†æ™‚é–“ãƒ»ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®è¨ˆæ¸¬**ã‚’å«ã‚ã¦ã„ã¾ã™ã€‚

---

## âœ… PHPã‚³ãƒ¼ãƒ‰ï¼ˆ`Main.php`ï¼‰

<?php
declare(strict_types=1);

/**
 * ã‚¨ãƒ©ãƒˆã‚¹ãƒ†ãƒã‚¹ã®ç¯©ã§ N ä»¥ä¸‹ã®ç´ æ•°ã‚’åˆ—æŒ™ã™ã‚‹é–¢æ•°
 *
 * @param int $n ç´ æ•°ã®ä¸Šé™ï¼ˆ2 <= $n <= 10^6ï¼‰
 * @return array<int> æ˜‡é †ã®ç´ æ•°ãƒªã‚¹ãƒˆ
 */
function sieve_of_eratosthenes(int $n): array {
    if ($n < 2) return [];

    $isPrime = array_fill(0, $n + 1, true);
    $isPrime[0] = $isPrime[1] = false;

    for ($i = 2; $i * $i <= $n; $i++) {
        if ($isPrime[$i]) {
            for ($j = $i * $i; $j <= $n; $j += $i) {
                $isPrime[$j] = false;
            }
        }
    }

    $primes = [];
    for ($i = 2; $i <= $n; $i++) {
        if ($isPrime[$i]) {
            $primes[] = $i;
        }
    }

    return $primes;
}

// å…¥åŠ›ã®èª­ã¿è¾¼ã¿
fscanf(STDIN, "%d", $N);

// è¨ˆæ¸¬é–‹å§‹
$start = hrtime(true);

// ç´ æ•°ã®åˆ—æŒ™
$primes = sieve_of_eratosthenes($N);

// å‡ºåŠ›ã‚’é«˜é€ŸåŒ–ï¼ˆimplodeã§ã¾ã¨ã‚ã¦è¡¨ç¤ºï¼‰
echo implode("\n", $primes) . "\n";

// è¨ˆæ¸¬çµ‚äº†ã¨æ™‚é–“ãƒ»ãƒ¡ãƒ¢ãƒªè¡¨ç¤ºï¼ˆstderrã¸ï¼‰
$end = hrtime(true);
$time = ($end - $start) / 1e6; // ãƒŸãƒªç§’

fwrite(STDERR, sprintf("Execution Time: %.3f ms\n", $time));
fwrite(STDERR, sprintf("Memory Usage: %.2f MB\n", memory_get_peak_usage(true) / 1024 / 1024));

// ## âœ… å®Ÿè¡Œæ–¹æ³•

// ```bash
// php Main.php < input.txt
// ```

// ---

// ## ğŸ§ª å…¥åŠ›ä¾‹

// ```txt
// 20
// ```

// ### âœ… å‡ºåŠ›

// ```txt
// 2
// 3
// 5
// 7
// 11
// 13
// 17
// 19
// ```

// ### âœ… stderrï¼ˆå‚è€ƒï¼‰

// ```
// Execution Time: 1.230 ms
// Memory Usage: 1.00 MB
// ```

// ---

// ## ğŸ§  è§£èª¬ãƒã‚¤ãƒ³ãƒˆ

// | é …ç›®     | å†…å®¹                                       |
// | ------ | ---------------------------------------- |
// | ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ  | ã‚¨ãƒ©ãƒˆã‚¹ãƒ†ãƒã‚¹ã®ç¯©ï¼šO(N log log N)                 |
// | ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ | `O(N)`ï¼ˆ`$isPrime` é…åˆ—ï¼‰                    |
// | é«˜é€ŸåŒ–ç­–   | å‡ºåŠ›ã‚’ `implode("\n", $primes)` ã§ä¸€æ‹¬å‡ºåŠ›       |
// | æ™‚é–“è¨ˆæ¸¬   | `hrtime(true)` ã§é«˜ç²¾åº¦ã«å‡¦ç†æ™‚é–“ã‚’ãƒŸãƒªç§’å˜ä½ã§è¨ˆæ¸¬        |
// | ãƒ¡ãƒ¢ãƒªè¨ˆæ¸¬  | `memory_get_peak_usage(true)` ã‚’ä½¿ç”¨ï¼ˆãƒã‚¤ãƒˆå˜ä½ï¼‰ |

// ---

// ## ğŸ’¬ è£œè¶³

// * `declare(strict_types=1)` ã«ã‚ˆã‚Šã€å‹ã®å³æ ¼ã•ã‚’ä¿ã£ã¦ã„ã¾ã™ã€‚
// * å‡ºåŠ›ã¯ `echo` ã§ã¾ã¨ã‚ã¦è¡¨ç¤º â†’ `print` ã‚ˆã‚Šé«˜é€Ÿã€‚
// * ãƒ¡ãƒ¢ãƒªå‰Šæ¸›ã®ä½™åœ°ã¯å°ã•ã„ã§ã™ãŒã€å¿…è¦ãªã‚‰ `bitset` çš„è¡¨ç¾ã‚‚å¯èƒ½ã§ã™ã€‚

