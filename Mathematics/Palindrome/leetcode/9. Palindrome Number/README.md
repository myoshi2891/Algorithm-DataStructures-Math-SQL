# TypeScript での「整数が回文かどうか判定する処理」

---

## 🔢 処理の流れ

### Step 1: 入力の前処理（負数や 10 の倍数チェック）

```ts
if (x < 0 || (x % 10 === 0 && x !== 0)) return false;
```

#### 📘 理由

- **負数**（例: `-121`）は、符号があるため回文にはならない。
- **末尾 0 の数**（例: `10`）は、反転すると `01` になり、回文でない。

#### 📊 イメージ

```text
x = -121 → NG（"-" がつく）

x = 10
-> 10 を反転 → 01（≠10） → NG
```

---

### Step 2: 反転した下半分の数 `reverted` を構築

```ts
let reverted = 0;
while (x > reverted) {
  reverted = reverted * 10 + (x % 10);
  x = Math.floor(x / 10);
}
```

#### 🔁 数字を半分反転（下位から 1 桁ずつ）

**例:x = 1221**

| ループ   | x    | reverted | 処理内容                        |
| -------- | ---- | -------- | ------------------------------- |
| 初期     | 1221 | 0        |                                 |
| ①        | 122  | 1        | reverted = 0×10 + 1             |
| ②        | 12   | 12       | reverted = 1×10 + 2             |
| （終了） |      |          | x (=12) ≯ reverted (=12) → stop |

#### 🖼️ 図解

```text
1221 の右半分 "21" を左側に反転して構築

x = 12        ← 元の左半分
reverted = 12 ← 右側の反転結果

x === reverted → 回文！
```

---

### Step 3: 偶数・奇数桁の調整と比較

```ts
return x === reverted || x === Math.floor(reverted / 10);
```

#### ✅ 比較内容

- 偶数桁 `x == reverted`
- 奇数桁 `x == Math.floor(reverted / 10)`

#### 例 ①x = 1221（偶数桁）

```text
→ x = 12, reverted = 12
→ 12 === 12 → ✅ 回文
```

#### 例 ②x = 12321（奇数桁）

| 最後                            | x = 123 | reverted = 123 |
| ------------------------------- | ------- | -------------- |
| 最後の桁が中央の 3 → 1 桁落とす |         |                |

```text
→ x = 12, Math.floor(123 / 10) = 12
→ 12 === 12 → ✅ 回文
```

---

## 🧠 なぜ半分だけ反転するのか？

文字列にせず、**後ろ半分の数字だけ反転して前半と比較**することで

- **オーバーフロー回避**
- **時間・メモリの効率化**

---

## 💡 全体フローチャート

```plaintext
                ↓
      入力整数 x を受け取る
                ↓
 x が負数 または 末尾0（かつ0でない）なら false
                ↓
 reverted = 0
 while x > reverted:
     reverted = reverted * 10 + x % 10
     x = Math.floor(x / 10)
                ↓
 x == reverted または x == Math.floor(reverted / 10)
                ↓
     Yes → true     No → false
```

---

## 📦 補足メモリ＆処理量の工夫点

- メモリ使用 O(1)（整数 3 つのみ使用）
- 時間計算量 O(log₁₀(x))（最大で 10 回のループ）

---
