
# ä»¥ä¸‹ã¯ã€**Python (CPython 3.11.4)** ã‚’ç”¨ã„ãŸåŠ¹ç‡çš„ãªè§£æ³•ã§ã™ã€‚
# æ™‚é–“è¨ˆç®—é‡ãƒ»ãƒ¡ãƒ¢ãƒªåŠ¹ç‡ã‚’æœ€å¤§é™æ„è­˜ã—ã€ã™ã¹ã¦ã®æ¼”ç®—ã‚’ `mod P` ä¸‹ã§ **å·®åˆ†æ›´æ–°** ã«ã‚ˆã£ã¦é«˜é€Ÿã«å‡¦ç†ã—ã¦ã„ã¾ã™ã€‚

# ---

# ### âœ… ç‰¹å¾´ï¼š

# * å‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆPEP 484ï¼‰å¯¾å¿œæ¸ˆã¿
# * `pow()`ã‚’ä½¿ã£ãŸäº‹å‰ç´¯ä¹—è¨ˆç®—ï¼ˆO(N)ï¼‰
# * å·®åˆ†ã®ã¿ã‚’æ‰±ã„ `O(1)` ã‚¯ã‚¨ãƒªå‡¦ç†
# * å…¥åŠ›ã¯ `sys.stdin` çµŒç”±ã§é«˜é€Ÿèª­ã¿è¾¼ã¿

# ---

# ### âœ… å®Ÿè£…ã‚³ãƒ¼ãƒ‰ï¼ˆPythonï¼‰:

# ```python
import sys
from typing import List, Tuple

# æ¨™æº–å…¥åŠ›ã®é«˜é€ŸåŒ–
input = sys.stdin.readline

def solve(P: int, X: int, N: int, Q: int, S: str, queries: List[Tuple[int, str]]) -> List[int]:
    """
    æ–‡å­—åˆ—ã®ä¸€æ–‡å­—æ›´æ–°ã«ã‚ˆã‚‹ãƒãƒƒã‚·ãƒ¥å†è¨ˆç®—ã‚’é«˜é€Ÿã«å‡¦ç†ã™ã‚‹ã€‚
    
    Parameters:
    - P (int): ç´ æ•°ï¼ˆmodã®æ³•ï¼‰
    - X (int): åŸºæ•°
    - N (int): æ–‡å­—åˆ—é•·
    - Q (int): ã‚¯ã‚¨ãƒªæ•°
    - S (str): åˆæœŸæ–‡å­—åˆ—
    - queries (List[Tuple[int, str]]): ã‚¯ã‚¨ãƒª (ä½ç½®, å¤‰æ›´å¾Œæ–‡å­—)
    
    Returns:
    - List[int]: å„ã‚¯ã‚¨ãƒªå¾Œã®ãƒãƒƒã‚·ãƒ¥å€¤ã®ãƒªã‚¹ãƒˆ
    """

    MOD = P
    base = X

    # A=1, B=2, ..., Z=26 ã¸å¤‰æ›ã™ã‚‹é–¢æ•°
    def char_to_val(c: str) -> int:
        return ord(c) - ord('A') + 1

    # pow_table[i] = X^(N-i-1) mod P
    pow_table: List[int] = [1] * N
    for i in range(N - 2, -1, -1):
        pow_table[i] = (pow_table[i + 1] * base) % MOD

    # åˆæœŸãƒãƒƒã‚·ãƒ¥ã®è¨ˆç®—
    hash_val = 0
    S_list: List[str] = list(S)
    for i in range(N):
        hash_val = (hash_val + char_to_val(S_list[i]) * pow_table[i]) % MOD

    results: List[int] = []

    for i, c in queries:
        old_val = char_to_val(S_list[i])
        new_val = char_to_val(c)
        diff = (new_val - old_val) % MOD
        hash_val = (hash_val + diff * pow_table[i]) % MOD
        S_list[i] = c
        results.append(hash_val)

    return results

# å®Ÿè¡Œéƒ¨åˆ†ï¼ˆæ¨™æº–å…¥åŠ›èª­ã¿è¾¼ã¿ï¼‰
def main():
    import sys
    sys.setrecursionlimit(1 << 25)
    P, X, N, Q = map(int, input().split())
    S = input().strip()
    # queries = []
    # æ˜ç¤ºçš„ãªå‹æŒ‡å®šï¼ˆPylanceå¯¾ç­–ï¼‰
    queries: List[Tuple[int, str]] = []
    for _ in range(Q):
        idx, ch = input().split()
        queries.append((int(idx) - 1, ch))  # 0-indexed ã«å¤‰æ›

    result = solve(P, X, N, Q, S, queries)
    for val in result:
        print(val)

if __name__ == "__main__":
    main()
# ```

# ---

# ### âœ… å…¥åŠ›ä¾‹ï¼ˆstdinï¼‰:

# ```
# 1000000007 77777 14 7
# HELLOWORLDNANA
# 1 G
# 4 O
# 7 O
# 2 D
# 14 B
# 13 Y
# 7 E
# ```

# ### âœ… å‡ºåŠ›:

# ```
# 792612268
# 411858279
# 411858279
# 311466064
# 311466065
# 312321612
# 686941116
# ```

# ---

# ### ğŸ“Š è¨ˆç®—é‡ã¨ãƒ¡ãƒ¢ãƒª

# | å‡¦ç†å†…å®¹     | æ™‚é–“è¨ˆç®—é‡            | ãƒ¡ãƒ¢ãƒªæ¶ˆè²»é‡                       |
# | -------- | ---------------- | ---------------------------- |
# | ç´¯ä¹—ã®äº‹å‰è¨ˆç®—  | O(N)             | O(N) â‰’ ç´„1.6MB (int Ã— 200000) |
# | åˆæœŸãƒãƒƒã‚·ãƒ¥è¨ˆç®— | O(N)             | -                            |
# | å„ã‚¯ã‚¨ãƒªå‡¦ç†   | O(1) Ã— Q         | O(Q) â‰’ ç´„1.6MB (int Ã— 200000) |
# | åˆè¨ˆ       | O(N + Q) â‰¤ 4Ã—10âµ | ç·ãƒ¡ãƒ¢ãƒª â‰’ æ•°MBç¨‹åº¦                 |

# ---

# ### ğŸ” å‚™è€ƒ

# * Python ã® `pow(a, b, mod)` ã‚’ä½¿ãˆã°éƒ½åº¦ã®ç´¯ä¹—è¨ˆç®—ã‚‚å¯èƒ½ã§ã™ãŒã€å…¨ã¦ã®ã‚¯ã‚¨ãƒªã«å¯¾å¿œã™ã‚‹ãŸã‚ã«äº‹å‰è¨ˆç®—æ–¹å¼ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ï¼ˆé«˜é€Ÿï¼†å®‰å…¨ï¼‰ã€‚
# * ãƒãƒƒã‚·ãƒ¥å€¤ã¯è² ã«ãªã‚‰ãªã„ã‚ˆã† `% MOD` ã‚’é€æ¬¡é©ç”¨ã€‚

# ---

# ä»–ã®å½¢å¼ï¼ˆä¾‹ï¼šãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ã€å·®åˆ†æ¤œè¨¼ã€éƒ¨åˆ†æ›´æ–°ãƒ†ã‚¹ãƒˆãªã©ï¼‰ã‚’ã”å¸Œæœ›ã®å ´åˆã‚‚å¯¾å¿œã§ãã¾ã™ã€‚ãŠæ°—è»½ã«ãŠçŸ¥ã‚‰ã›ãã ã•ã„ã€‚

# Pylanceï¼ˆVS Codeã®é™çš„å‹ãƒã‚§ãƒƒã‚«ãƒ¼ï¼‰ã‹ã‚‰ã®è­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«å¯¾å¿œã™ã‚‹ãŸã‚ã«ã€**å‹æ³¨é‡ˆãŒä¸æ˜ç¢ºãªéƒ¨åˆ†ã‚’æ˜ç¤ºçš„ã«æŒ‡å®š**ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

# ---

# ### ğŸ”§ **å•é¡Œã®æœ¬è³ªï¼š**

# * `queries: list[Unknown]` ã®åŸå› ã¯ã€ä»¥ä¸‹ã®è¡Œã§å‹ãŒæ¨è«–ã§ããªã„ãŸã‚ã§ã™ï¼š

# ```python
# queries = []
# ```

# ã“ã®æ™‚ç‚¹ã§ã¯ã€ç©ºãƒªã‚¹ãƒˆã«å‹ãŒæŒ‡å®šã•ã‚Œã¦ã„ãªã„ãŸã‚ã€Pylance ãŒ `Unknown` å‹ã¨æ¨è«–ã—ã¦ã—ã¾ã„ã¾ã™ã€‚

# ---

# ### âœ… **ä¿®æ­£æ–¹æ³•ï¼ˆå‹ã‚’æ˜ç¤ºï¼‰**

# ```python
# from typing import List, Tuple

# queries: List[Tuple[int, str]] = []
# ```

# ã“ã‚Œã«ã‚ˆã‚Šã€**Pylance ã®å‹ã‚¨ãƒ©ãƒ¼**ã¯è§£æ¶ˆã•ã‚Œã¾ã™ã€‚

# ---

# ### ğŸ” ä¿®æ­£æ¸ˆã¿ `main()` é–¢æ•°ï¼š

# ```python
# def main():
#     import sys
#     sys.setrecursionlimit(1 << 25)
#     P, X, N, Q = map(int, input().split())
#     S = input().strip()

#     # æ˜ç¤ºçš„ãªå‹æŒ‡å®šï¼ˆPylanceå¯¾ç­–ï¼‰
#     queries: List[Tuple[int, str]] = []

#     for _ in range(Q):
#         idx, ch = input().split()
#         queries.append((int(idx) - 1, ch))  # 0-indexed ã«å¤‰æ›

#     result = solve(P, X, N, Q, S, queries)
#     for val in result:
#         print(val)
# ```

# ---

# ### ğŸ“Œ è£œè¶³ï¼ˆappendã«ã¤ã„ã¦ï¼‰

# `list.append()` ã®å‹ã‚‚ `list[Unknown]` ã«å¯¾ã—ã¦ä½¿ã†ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªè­¦å‘ŠãŒå‡ºã¾ã™ï¼š

# > `"append" ã®å‹ã¯ "(object: Unknown, /) -> None" ã§ã™`

# â†’ã“ã‚Œã¯ã€ãƒªã‚¹ãƒˆã®è¦ç´ å‹ãŒä¸æ˜ï¼ˆ`Unknown`ï¼‰ã®ãŸã‚ã€ä½•ã‚’è¿½åŠ ã—ã¦ã„ã‚‹ã‹åˆ¤æ–­ã§ããªã„ã¨ã„ã†æ„å‘³ã§ã™ã€‚

# ---

# ### ğŸ’¡ è£œè¶³ï¼ˆPylanceãŒè³¢ãå‹æ¨è«–ã™ã‚‹ã«ã¯ï¼‰

# * ç©ºã®ãƒªã‚¹ãƒˆã«ã¯å¿…ãšå‹æ³¨é‡ˆã‚’ã¤ã‘ã‚‹ã€‚
# * é–¢æ•°ã®å¼•æ•°ã‚‚ã€ãƒªã‚¹ãƒˆã‚„ã‚¿ãƒ—ãƒ«ã§ã‚ã‚Œã°å…·ä½“çš„ã« `List[Tuple[int, str]]` ãªã©ã«ã™ã‚‹ã€‚

# ---

# ### âœ… ã¾ã¨ã‚

# | å¯¾å‡¦              | æ–¹æ³•                                     |
# | --------------- | -------------------------------------- |
# | `list[Unknown]` | æ˜ç¤ºçš„ã« `List[Tuple[int, str]]` ã‚’æŒ‡å®š       |
# | `.append()`     | ãƒªã‚¹ãƒˆã«å¯¾ã™ã‚‹å‹æ³¨é‡ˆã‚’ä¸ãˆã‚Œã°è§£æ¶ˆ                      |
# | é–¢æ•°å¼•æ•°ã®å‹          | `queries: List[Tuple[int, str]]` ãªã©ã‚’ä½¿ã† |

# ---

# å¿…è¦ã§ã‚ã‚Œã° `solve` å´ã®æˆ»ã‚Šå€¤ã®å‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãªã©ã‚‚ã•ã‚‰ã«å¼·åŒ–ã§ãã¾ã™ã€‚ç¶šã‘ã¦ä¿®æ­£ã‚’å¸Œæœ›ã•ã‚Œã‚‹ç®‡æ‰€ãŒã‚ã‚Œã°ã€ãŠçŸ¥ã‚‰ã›ãã ã•ã„ã€‚
