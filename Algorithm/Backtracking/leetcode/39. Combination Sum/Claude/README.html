<!DOCTYPE html>
<html lang="ja">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Combination Sum ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ è§£æ</title>
        <style>
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                margin: 0;
                padding: 20px;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: #333;
                min-height: 100vh;
            }

            .container {
                max-width: 1200px;
                margin: 0 auto;
                background: rgba(255, 255, 255, 0.95);
                padding: 30px;
                border-radius: 20px;
                box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            }

            h1 {
                text-align: center;
                color: #2c3e50;
                margin-bottom: 40px;
                font-size: 2.5em;
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            }

            h2 {
                color: #34495e;
                border-left: 5px solid #3498db;
                padding-left: 15px;
                margin-top: 40px;
                background: linear-gradient(90deg, #ecf0f1 0%, transparent 100%);
                padding: 10px 15px;
                border-radius: 5px;
            }

            .section {
                margin-bottom: 40px;
                background: #f8f9fa;
                padding: 20px;
                border-radius: 10px;
                border: 1px solid #dee2e6;
            }

            .tree-container {
                background: white;
                padding: 20px;
                border-radius: 10px;
                margin: 20px 0;
                overflow-x: auto;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            }

            .tree-node {
                display: inline-block;
                background: linear-gradient(145deg, #3498db, #2980b9);
                color: white;
                padding: 8px 15px;
                border-radius: 8px;
                margin: 5px;
                font-weight: bold;
                box-shadow: 0 4px 8px rgba(52, 152, 219, 0.3);
                transition: all 0.3s ease;
            }

            .tree-node:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 12px rgba(52, 152, 219, 0.4);
            }

            .success-node {
                background: linear-gradient(145deg, #27ae60, #229954);
                box-shadow: 0 4px 8px rgba(39, 174, 96, 0.3);
            }

            .fail-node {
                background: linear-gradient(145deg, #e74c3c, #c0392b);
                box-shadow: 0 4px 8px rgba(231, 76, 60, 0.3);
            }

            .step-container {
                display: flex;
                flex-wrap: wrap;
                gap: 15px;
                margin: 20px 0;
            }

            .step-box {
                background: linear-gradient(145deg, #ffffff, #f8f9fa);
                border: 2px solid #dee2e6;
                border-radius: 10px;
                padding: 15px;
                flex: 1;
                min-width: 250px;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                transition: all 0.3s ease;
            }

            .step-box:hover {
                transform: translateY(-5px);
                box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
                border-color: #3498db;
            }

            .step-title {
                font-weight: bold;
                color: #2c3e50;
                margin-bottom: 10px;
                font-size: 1.1em;
            }

            .code-block {
                background: #2c3e50;
                color: #ecf0f1;
                padding: 15px;
                border-radius: 8px;
                font-family: 'Courier New', monospace;
                overflow-x: auto;
                margin: 15px 0;
                box-shadow: inset 0 4px 8px rgba(0, 0, 0, 0.2);
            }

            .highlight {
                background: rgba(241, 196, 15, 0.3);
                padding: 2px 4px;
                border-radius: 3px;
                font-weight: bold;
            }

            .complexity-table {
                width: 100%;
                border-collapse: collapse;
                margin: 20px 0;
                background: white;
                border-radius: 8px;
                overflow: hidden;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            }

            .complexity-table th {
                background: linear-gradient(145deg, #34495e, #2c3e50);
                color: white;
                padding: 12px;
                text-align: left;
            }

            .complexity-table td {
                padding: 12px;
                border-bottom: 1px solid #dee2e6;
            }

            .complexity-table tr:nth-child(even) {
                background: #f8f9fa;
            }

            .complexity-table tr:hover {
                background: rgba(52, 152, 219, 0.1);
            }

            .algorithm-flow {
                background: white;
                padding: 20px;
                border-radius: 10px;
                margin: 20px 0;
                text-align: center;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            }

            .flow-step {
                display: inline-block;
                background: linear-gradient(145deg, #e8f4fd, #d4edda);
                border: 2px solid #3498db;
                border-radius: 50px;
                padding: 10px 20px;
                margin: 10px;
                font-weight: bold;
                color: #2c3e50;
                box-shadow: 0 4px 8px rgba(52, 152, 219, 0.2);
                transition: all 0.3s ease;
            }

            .flow-step:hover {
                transform: scale(1.05);
                background: linear-gradient(145deg, #3498db, #2980b9);
                color: white;
            }

            .arrow {
                font-size: 2em;
                color: #3498db;
                margin: 0 10px;
            }

            @media (max-width: 768px) {
                .container {
                    padding: 15px;
                }

                .step-container {
                    flex-direction: column;
                }

                .step-box {
                    min-width: auto;
                }
            }
        </style>
    </head>

    <body>
        <div class="container">
            <h1>ğŸ” Combination Sum ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ è©³ç´°è§£æ</h1>

            <div class="section">
                <h2>ğŸ“Š ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®å…¨ä½“ãƒ•ãƒ­ãƒ¼</h2>
                <div class="algorithm-flow">
                    <div class="flow-step">å…¥åŠ›æ¤œè¨¼</div>
                    <span class="arrow">â†’</span>
                    <div class="flow-step">é…åˆ—ã‚½ãƒ¼ãƒˆ</div>
                    <span class="arrow">â†’</span>
                    <div class="flow-step">ãƒãƒƒã‚¯ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°é–‹å§‹</div>
                    <span class="arrow">â†’</span>
                    <div class="flow-step">è§£ã®æ¢ç´¢</div>
                    <span class="arrow">â†’</span>
                    <div class="flow-step">çµæœè¿”å´</div>
                </div>
            </div>

            <div class="section">
                <h2>ğŸŒ³ å…·ä½“ä¾‹ã§ã®æ¢ç´¢æœ¨æ§‹é€  (candidates=[2,3,6,7], target=7)</h2>
                <div class="tree-container">
                    <div style="font-family: monospace; font-size: 14px; line-height: 2;">
                        <div style="text-align: center; margin-bottom: 20px;">
                            <div class="tree-node">Start: [] (target=7)</div>
                        </div>
                        <div style="text-align: center; margin-bottom: 15px;">
                            <div class="tree-node">Choose 2: [2] (target=5)</div>
                            <div class="tree-node" style="margin-left: 50px;">Choose 3: [3] (target=4)</div>
                            <div class="tree-node" style="margin-left: 50px;">Choose 6: [6] (target=1)</div>
                            <div class="tree-node success-node" style="margin-left: 50px;">Choose 7: [7] (target=0) âœ…</div>
                        </div>
                        <div style="text-align: center; margin-bottom: 15px;">
                            <div class="tree-node">â”œâ”€ Choose 2: [2,2] (target=3)</div>
                            <div class="tree-node" style="margin-left: 100px;">â”œâ”€ Choose 3: [3,3] (target=1)</div>
                            <div class="tree-node fail-node" style="margin-left: 100px;">â”œâ”€ Choose 6: [6,6] (target=-5) âŒ</div>
                            <div class="tree-node fail-node" style="margin-left: 100px;">â””â”€ Choose 7: [6,7] (target=-6) âŒ</div>
                        </div>
                        <div style="text-align: center; margin-bottom: 15px;">
                            <div class="tree-node">â”‚ â”œâ”€ Choose 2: [2,2,2] (target=1)</div>
                            <div class="tree-node success-node" style="margin-left: 150px;">â”‚ â”‚ â””â”€ Choose 3: [2,2,3] (target=0) âœ…</div>
                        </div>
                        <div style="text-align: center;">
                            <div class="tree-node">â”‚ â””â”€ Choose 3: [2,3] (target=2)</div>
                            <div class="tree-node fail-node" style="margin-left: 150px;">â”‚ â””â”€ Choose 2: [2,3,2] (target=0) - Skip (é †åº)</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>âš™ï¸ ä¸»è¦å‡¦ç†ã®è©³ç´°è§£æ</h2>
                <div class="step-container">
                    <div class="step-box">
                        <div class="step-title">1. å‰å‡¦ç†ï¼šã‚½ãƒ¼ãƒˆ</div>
                        <div class="code-block">candidates.sort((a, b) => a - b)</div>
                        <p><span class="highlight">ç›®çš„</span>: æ—©æœŸçµ‚äº†ã‚’å¯èƒ½ã«ã™ã‚‹</p>
                        <p><span class="highlight">åŠ¹æœ</span>: candidate > remainingTargetã§æåˆˆã‚Š</p>
                        <p><span class="highlight">æ™‚é–“è¨ˆç®—é‡</span>: O(N log N)</p>
                    </div>

                    <div class="step-box">
                        <div class="step-title">2. ãƒãƒƒã‚¯ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°é–‹å§‹</div>
                        <div class="code-block">backtrack(0, [], target)</div>
                        <p><span class="highlight">ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿</span>:</p>
                        <ul>
                            <li>startIndex: 0 (æœ€åˆã®è¦ç´ ã‹ã‚‰)</li>
                            <li>currentCombination: [] (ç©ºé…åˆ—)</li>
                            <li>remainingTarget: 7 (ç›®æ¨™å€¤)</li>
                        </ul>
                    </div>

                    <div class="step-box">
                        <div class="step-title">3. çµ‚äº†æ¡ä»¶ãƒã‚§ãƒƒã‚¯</div>
                        <div class="code-block">if (remainingTarget === 0) {
                            result.push([...currentCombination]);
                            return;
                            }</div>
                        <p><span class="highlight">æ¡ä»¶</span>: æ®‹ã‚Šç›®æ¨™å€¤ãŒ0ã«ãªã£ãŸæ™‚</p>
                        <p><span class="highlight">å‡¦ç†</span>: ç¾åœ¨ã®çµ„ã¿åˆã‚ã›ã‚’çµæœã«è¿½åŠ </p>
                    </div>

                    <div class="step-box">
                        <div class="step-title">4. æåˆˆã‚Šæœ€é©åŒ–</div>
                        <div class="code-block">if (candidate > remainingTarget) {
                            break;
                            }</div>
                        <p><span class="highlight">æ¡ä»¶</span>: å€™è£œå€¤ãŒæ®‹ã‚Šç›®æ¨™å€¤ã‚’è¶…é</p>
                        <p><span class="highlight">åŠ¹æœ</span>: ä»¥é™ã®æ¢ç´¢ã‚’ã‚¹ã‚­ãƒƒãƒ—ï¼ˆã‚½ãƒ¼ãƒˆæ¸ˆã¿ã®ãŸã‚ï¼‰</p>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>ğŸ”„ å†å¸°å‘¼ã³å‡ºã—ã®ã‚¹ã‚¿ãƒƒã‚¯æ§‹é€ </h2>
                <div class="tree-container">
                    <div style="font-family: monospace;">
                        <h4>ä¾‹: [2,2,3]ã®çµ„ã¿åˆã‚ã›ç™ºè¦‹ã¾ã§</h4>
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 5px;">
                            <div>ğŸ“± <strong>Call 1</strong>: backtrack(0, [], 7)</div>
                            <div style="margin-left: 20px;">â”œâ”€ Choose candidate[0] = 2</div>
                            <div style="margin-left: 20px;">â”œâ”€ Push 2 to combination: [2]</div>
                            <div style="margin-left: 20px;">â””â”€ ğŸ“± <strong>Call 2</strong>: backtrack(0, [2], 5)</div>

                            <div style="margin-left: 40px;">â”œâ”€ Choose candidate[0] = 2 again</div>
                            <div style="margin-left: 40px;">â”œâ”€ Push 2 to combination: [2,2]</div>
                            <div style="margin-left: 40px;">â””â”€ ğŸ“± <strong>Call 3</strong>: backtrack(0, [2,2], 3)</div>

                            <div style="margin-left: 60px;">â”œâ”€ Choose candidate[1] = 3</div>
                            <div style="margin-left: 60px;">â”œâ”€ Push 3 to combination: [2,2,3]</div>
                            <div style="margin-left: 60px;">â””â”€ ğŸ“± <strong>Call 4</strong>: backtrack(1, [2,2,3], 0)</div>

                            <div style="margin-left: 80px; color: #27ae60; font-weight: bold;">âœ… remainingTarget === 0 â†’ Add [2,2,3] to result</div>
                            <div style="margin-left: 80px;">ğŸ”™ Return from Call 4</div>

                            <div style="margin-left: 60px;">ğŸ”™ Pop 3 from combination: [2,2]</div>
                            <div style="margin-left: 60px;">ğŸ”™ Return from Call 3</div>

                            <div style="margin-left: 40px;">ğŸ”™ Pop 2 from combination: [2]</div>
                            <div style="margin-left: 40px;">ğŸ”™ Return from Call 2</div>

                            <div style="margin-left: 20px;">ğŸ”™ Pop 2 from combination: []</div>
                            <div style="margin-left: 20px;">Continue with next candidate...</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>ğŸ“ˆ è¨ˆç®—é‡åˆ†æ</h2>
                <table class="complexity-table">
                    <thead>
                        <tr>
                            <th>é …ç›®</th>
                            <th>è¨ˆç®—é‡</th>
                            <th>èª¬æ˜</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>æ™‚é–“è¨ˆç®—é‡</strong></td>
                            <td>O(N^(T/M))</td>
                            <td>N=é…åˆ—é•·, T=targetå€¤, M=æœ€å°å€™è£œå€¤</td>
                        </tr>
                        <tr>
                            <td><strong>ç©ºé–“è¨ˆç®—é‡</strong></td>
                            <td>O(T/M)</td>
                            <td>å†å¸°ã‚¹ã‚¿ãƒƒã‚¯ã®æœ€å¤§æ·±åº¦</td>
                        </tr>
                        <tr>
                            <td><strong>ã‚½ãƒ¼ãƒˆå‡¦ç†</strong></td>
                            <td>O(N log N)</td>
                            <td>ä¸€å›ã ã‘ã®å‰å‡¦ç†</td>
                        </tr>
                        <tr>
                            <td><strong>æœ€æ‚ªã‚±ãƒ¼ã‚¹æ¢ç´¢æ•°</strong></td>
                            <td>O(2^T)</td>
                            <td>candidates=[1], target=Tã®å ´åˆ</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="section">
                <h2>âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ãƒã‚¤ãƒ³ãƒˆ</h2>
                <div class="step-container">
                    <div class="step-box">
                        <div class="step-title">1. æ—©æœŸçµ‚äº†</div>
                        <p>ã‚½ãƒ¼ãƒˆæ¸ˆã¿é…åˆ—ã«ã‚ˆã‚Šã€å€™è£œå€¤ãŒç›®æ¨™å€¤ã‚’è¶…ãˆãŸæ™‚ç‚¹ã§ä»¥é™ã®æ¢ç´¢ã‚’åœæ­¢</p>
                        <div class="code-block">if (candidate > remainingTarget) break;</div>
                    </div>

                    <div class="step-box">
                        <div class="step-title">2. ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ç®¡ç†</div>
                        <p>åŒä¸€è¦ç´ ã®é‡è¤‡ä½¿ç”¨ã‚’è¨±å¯ã—ã¤ã¤ã€é †åºã‚’ä¿ã£ã¦é‡è¤‡çµ„ã¿åˆã‚ã›ã‚’é˜²æ­¢</p>
                        <div class="code-block">backtrack(i, ...); // iç•ªç›®ä»¥é™ã‹ã‚‰é¸æŠ</div>
                    </div>

                    <div class="step-box">
                        <div class="step-title">3. ãƒ¡ãƒ¢ãƒªåŠ¹ç‡</div>
                        <p>é…åˆ—ã®å‹•çš„æ§‹ç¯‰ãƒ»å‰Šé™¤ã«ã‚ˆã‚Šãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã‚’æœ€å°åŒ–</p>
                        <div class="code-block">currentCombination.push(candidate);
                            // å‡¦ç†å¾Œ
                            currentCombination.pop();</div>
                    </div>

                    <div class="step-box">
                        <div class="step-title">4. å‹å®‰å…¨æ€§</div>
                        <p>TypeScriptã®å‹ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã‚Šãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚¨ãƒ©ãƒ¼ã‚’é˜²æ­¢ã—ã€æœ€é©åŒ–ã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆ</p>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>ğŸ¯ å®Ÿè¡Œä¾‹ã§ã®è©³ç´°è¿½è·¡</h2>
                <div class="tree-container">
                    <h4>candidates = [2,3,6,7], target = 7</h4>
                    <div style="background: #f1f2f6; padding: 20px; border-radius: 10px;">
                        <div style="margin-bottom: 15px;">
                            <strong>çµæœ: [[2,2,3], [7]]</strong>
                        </div>

                        <div style="margin-bottom: 10px;">
                            <span class="highlight">Step 1</span>: ã‚½ãƒ¼ãƒˆ â†’ [2,3,6,7] (æ—¢ã«ã‚½ãƒ¼ãƒˆæ¸ˆã¿)
                        </div>

                        <div style="margin-bottom: 10px;">
                            <span class="highlight">Step 2</span>: backtrack(0, [], 7) é–‹å§‹
                        </div>

                        <div style="margin-bottom: 10px;">
                            <span class="highlight">Step 3</span>: i=0, candidate=2, 2 â‰¤ 7 â†’ [2]ã§å†å¸°
                        </div>

                        <div style="margin-bottom: 10px;">
                            <span class="highlight">Step 4</span>: i=0, candidate=2, 2 â‰¤ 5 â†’ [2,2]ã§å†å¸°
                        </div>

                        <div style="margin-bottom: 10px;">
                            <span class="highlight">Step 5</span>: i=1, candidate=3, 3 â‰¤ 3 â†’ [2,2,3]ã§å†å¸°
                        </div>

                        <div style="margin-bottom: 10px;">
                            <span class="highlight">Step 6</span>: remainingTarget=0 â†’ <strong>[2,2,3]ã‚’çµæœã«è¿½åŠ  âœ…</strong>
                        </div>

                        <div style="margin-bottom: 10px;">
                            <span class="highlight">Step 7</span>: ãƒãƒƒã‚¯ãƒˆãƒ©ãƒƒã‚¯ã€ä»–ã®å€™è£œã‚’æ¢ç´¢...
                        </div>

                        <div style="margin-bottom: 10px;">
                            <span class="highlight">Step 8</span>: i=3, candidate=7, 7 â‰¤ 7 â†’ [7]ã§å†å¸°
                        </div>

                        <div>
                            <span class="highlight">Step 9</span>: remainingTarget=0 â†’ <strong>[7]ã‚’çµæœã«è¿½åŠ  âœ…</strong>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>

</html>