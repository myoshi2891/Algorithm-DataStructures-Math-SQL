// ## ğŸ† ãƒãƒ©ãƒ³ã‚¹åˆ¤æ–­

// * **LeetCode æå‡ºæ™‚**
//   â†’ *åˆ¶ç´„ã¯å¿…ãšå®ˆã‚‰ã‚Œã‚‹* å‰æãªã®ã§ã€å…¥åŠ›æ¤œè¨¼ã‚„å†—é•·ãªå‹ãƒã‚§ãƒƒã‚¯ã¯ä¸è¦ã€‚
//   â†’ **æœ€é©åŒ–ç‰ˆ**ï¼ˆé€Ÿã•å„ªå…ˆï¼‰ã‚’æ¡ç”¨ã€‚

// * **æ¥­å‹™é–‹ç™ºã‚„OSSåˆ©ç”¨æ™‚**
//   â†’ ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã‚„å¤–éƒ¨APIã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ãŒæƒ³å®šå¤–ã®ã‚±ãƒ¼ã‚¹ã‚’å«ã‚€ãŸã‚ã€å …ç‰¢æ€§ãŒé‡è¦ã€‚
//   â†’ **å …ç‰¢ç‰ˆ**ï¼ˆå‹ã‚¬ãƒ¼ãƒ‰ã‚„ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’æ®‹ã™ï¼‰ã‚’æ¡ç”¨ã€‚

// ğŸ‘‰ ã¤ã¾ã‚Š **æå‡ºç”¨ã¯æœ€é©åŒ–ç‰ˆã€å®Ÿå‹™ã§ã¯å …ç‰¢ç‰ˆ** ãŒãƒ™ã‚¹ãƒˆã€‚
// ä¸¡æ–¹ã®ã‚³ãƒ¼ãƒ‰ã‚’æŒã£ã¦ãŠãã®ãŒä¸€ç•ªå®Ÿç”¨çš„ã§ã™ã€‚

// ---

// # TypeScript å®Ÿè£…å›ç­”

// ## 1. å•é¡Œã®åˆ†æ

// * **ç«¶æŠ€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¦–ç‚¹**

//   * äºŒåˆ†æ¢ç´¢ã‚’ç”¨ã„ã¦å¹³å‡ O(log n)ã€é‡è¤‡ã«ã‚ˆã‚Šæœ€æ‚ª O(n)ã€‚
//   * é…åˆ—é•·ä¸Šé™ãŒ 5000 ã®ãŸã‚æœ€æ‚ªã‚±ãƒ¼ã‚¹ã§ã‚‚ååˆ†é«˜é€Ÿã€‚
//   * è¿½åŠ ãƒ¡ãƒ¢ãƒªã¯ O(1)ã€‚

// * **æ¥­å‹™é–‹ç™ºè¦–ç‚¹**

//   * å‹å®‰å…¨æ€§ã‚’é‡è¦–ã—ã€å…¥åŠ›é…åˆ—ãƒ»ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã®å‹ã‚’å³å¯†åŒ–ã€‚
//   * é–¢æ•°ã¯ pure ã«å®Ÿè£…ï¼ˆå‰¯ä½œç”¨ãªã—ï¼‰ã€‚
//   * ç„¡åŠ¹ãªå…¥åŠ›ã¯ä¾‹å¤–ã§æ—©æœŸã«æ¤œå‡ºã€‚

// * **TypeScriptç‰¹æœ‰ã®è€ƒæ…®ç‚¹**

//   * `readonly number[]` ã‚’ä½¿ã£ã¦ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«æ€§ã‚’æ‹…ä¿ã€‚
//   * å‹æ¨è«–ã¨ strict mode ã«ã‚ˆã‚Šå®‰å…¨æ€§ã‚’é«˜ã‚ã‚‹ã€‚
//   * null/undefined æ’é™¤æ¸ˆã¿ã®å¼•æ•°ã‚·ã‚°ãƒãƒãƒ£ã€‚

// ---

// ## 2. ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚¢ãƒ—ãƒ­ãƒ¼ãƒæ¯”è¼ƒ

// | ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ           | æ™‚é–“è¨ˆç®—é‡                | ç©ºé–“è¨ˆç®—é‡ | TSå®Ÿè£…ã‚³ã‚¹ãƒˆ | å‹å®‰å…¨æ€§ | å¯èª­æ€§ | å‚™è€ƒ              |
// | --------------- | -------------------- | ----- | ------- | ---- | --- | --------------- |
// | æ–¹æ³•A: ç·šå½¢æ¢ç´¢       | O(n)                 | O(1)  | ä½       | é«˜    | é«˜   | æœ€æ‚ªã§ã‚‚5000è¦ç´ ã§ååˆ†é«˜é€Ÿ |
// | æ–¹æ³•B: äºŒåˆ†æ¢ç´¢ï¼ˆé‡è¤‡å¯¾å¿œï¼‰ | O(log n) å¹³å‡, O(n) æœ€æ‚ª | O(1)  | ä¸­       | é«˜    | ä¸­   | å®Ÿè³ªçš„ã«æœ€é©è§£         |
// | æ–¹æ³•C: ã‚½ãƒ¼ãƒˆã—ã¦äºŒåˆ†æ¢ç´¢  | O(n log n)           | O(n)  | ä¸­       | ä¸­    | é«˜   | ç„¡é§„ãŒå¤šã„           |

// ---

// ## 3. å®Ÿè£…æ–¹é‡

// * **é¸æŠã—ãŸã‚¢ãƒ—ãƒ­ãƒ¼ãƒ**: æ–¹æ³•Bï¼ˆäºŒåˆ†æ¢ç´¢ with duplicates å¯¾å¿œï¼‰
// * **ç†ç”±**:

//   * å¹³å‡ O(log n) ã‚’æœŸå¾…ã§ãã€æœ€æ‚ª O(n) ã§ã‚‚è¨±å®¹ç¯„å›²ã€‚
//   * TypeScript ã«ã‚ˆã‚‹å‹å®‰å…¨æ€§ã¨å¯èª­æ€§ã‚’ä¸¡ç«‹ã—ã‚„ã™ã„ã€‚
// * **TypeScriptæœ€é©åŒ–ãƒã‚¤ãƒ³ãƒˆ**:

//   * `readonly number[]` ã§å‰¯ä½œç”¨ã‚’ç¦æ­¢ã€‚
//   * æ˜ç¤ºçš„ãªæˆ»ã‚Šå€¤å‹ã‚’ `boolean` ã«å›ºå®šã€‚
//   * ãƒ«ãƒ¼ãƒ—å¤‰æ•°ã¯ `let` ã‚’åˆ©ç”¨ã— JIT æœ€é©åŒ–ã‚’é˜»å®³ã—ãªã„ã€‚

// ---

// ## 4. å®Ÿè£…ã‚³ãƒ¼ãƒ‰ï¼ˆsolution.ts, ESMå½¢å¼ï¼‰

// ```typescript
/**
 * Search in Rotated Sorted Array II
 * @param nums - Rotated sorted array (may contain duplicates)
 * @param target - Search target value
 * @returns True if target exists in nums, otherwise false
 * @throws {TypeError} If input types are invalid
 * @complexity Time: O(log n) average, O(n) worst due to duplicates; Space: O(1)
 */
export function search(nums: readonly number[], target: number): boolean {
  // ---- å…¥åŠ›æ¤œè¨¼ ----
  if (!Array.isArray(nums)) {
    throw new TypeError("nums must be an array");
  }
  if (typeof target !== "number" || !Number.isFinite(target)) {
    throw new TypeError("target must be a finite number");
  }

  let left = 0;
  let right = nums.length - 1;

  while (left <= right) {
    const mid = (left + right) >> 1;
    if (nums[mid] === target) return true;

    // duplicates skip
    if (nums[left] === nums[mid] && nums[mid] === nums[right]) {
      left++;
      right--;
    }
    // å·¦åŠåˆ†ãŒã‚½ãƒ¼ãƒˆæ¸ˆã¿
    else if (nums[left] <= nums[mid]) {
      if (nums[left] <= target && target < nums[mid]) {
        right = mid - 1;
      } else {
        left = mid + 1;
      }
    }
    // å³åŠåˆ†ãŒã‚½ãƒ¼ãƒˆæ¸ˆã¿
    else {
      if (nums[mid] < target && target <= nums[right]) {
        left = mid + 1;
      } else {
        right = mid - 1;
      }
    }
  }

  return false;
}
// ```

// ---

// ## 5. TypeScriptå›ºæœ‰ã®æœ€é©åŒ–è¦³ç‚¹

// * **å‹å®‰å…¨æ€§**

//   * `readonly number[]` ã«ã‚ˆã‚Šé–¢æ•°å†…éƒ¨ã§ã®ç ´å£Šçš„å¤‰æ›´ã‚’é˜²æ­¢ã€‚
//   * `target: number` ã‚’æ˜ç¤ºã—ã¦ null/undefined æ’é™¤ã€‚

// * **ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚æœ€é©åŒ–**

//   * å‹æ¨è«–ã«ã‚ˆã‚Šå†—é•·ãªå‹æ³¨é‡ˆã‚’å‰Šæ¸›ã€‚
//   * `const` / `let` ã®é©åˆ‡ãªä½¿ã„åˆ†ã‘ã§ JIT æœ€é©åŒ–ã‚’èª˜å°ã€‚

// * **é–‹ç™ºåŠ¹ç‡ã¨ä¿å®ˆæ€§**

//   * å‹å®šç¾©ãŒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®å½¹å‰²ã‚’å…¼ã­ã‚‹ã€‚
//   * IntelliSense ãŒè£œå®Œã‚’æ”¯æ´ã€‚
//   * pure function åŒ–ã«ã‚ˆã‚Šãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆãŒå®¹æ˜“ã€‚

// ---

// âœ… ã“ã‚Œã§ **LeetCode æå‡ºã«ååˆ†ãªæœ€é©åŒ–ç‰ˆ** ã‹ã¤ **æ¥­å‹™åˆ©ç”¨ã§ã‚‚è€ãˆã‚‰ã‚Œã‚‹å …ç‰¢ç‰ˆ** ã® TypeScript å®Ÿè£…ã«ãªã£ã¦ã„ã¾ã™ã€‚
