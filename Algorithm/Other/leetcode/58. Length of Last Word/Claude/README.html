<!doctype html>
<html lang="ja">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Length of Last Word - コード解析</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <link
            href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;600&family=Inter:wght@300;400;500;600;700&display=swap"
            rel="stylesheet"
        />
        <style>
            .code-font {
                font-family: 'Fira Code', 'Monaco', 'Consolas', monospace;
            }

            .step-highlight {
                animation: pulse 2s infinite;
            }

            .code-line:hover {
                background-color: rgba(59, 130, 246, 0.1);
            }

            .active-step {
                background: linear-gradient(90deg, rgba(34, 197, 94, 0.2), rgba(34, 197, 94, 0.05));
            }
        </style>
    </head>

    <body class="bg-gray-50 min-h-screen">
        <div class="container mx-auto px-4 py-8">
            <!-- ヘッダー -->
            <div class="text-center mb-12">
                <h1 class="text-4xl font-bold text-gray-800 mb-4">Length of Last Word</h1>
                <p class="text-lg text-gray-600">
                    文字列の最後の単語の長さを求めるアルゴリズムの詳細解析
                </p>
            </div>

            <!-- コードセクション -->
            <div class="bg-white rounded-xl shadow-lg p-8 mb-10">
                <h2 class="text-2xl font-semibold text-gray-800 mb-6">TypeScript実装</h2>
                <div class="bg-gray-900 rounded-lg overflow-hidden">
                    <div class="flex items-center justify-between bg-gray-800 px-4 py-2">
                        <span class="text-gray-300 text-sm code-font">lengthOfLastWord.ts</span>
                        <div class="flex space-x-2">
                            <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                            <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                            <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                        </div>
                    </div>
                    <div class="p-4 text-white">
                        <pre
                            class="code-font text-sm"
                        ><code id="code-block"><span class="text-gray-400 select-none">1</span>  <span class="text-gray-500">/**</span>
<span class="text-gray-400 select-none">2</span>  <span class="text-gray-500"> * 文字列の最後の単語の長さを返す関数</span>
<span class="text-gray-400 select-none">3</span>  <span class="text-gray-500"> * @param s - 英字とスペースで構成された文字列</span>
<span class="text-gray-400 select-none">4</span>  <span class="text-gray-500"> * @returns 最後の単語の長さ</span>
<span class="text-gray-400 select-none">5</span>  <span class="text-gray-500"> */</span>
<span class="text-gray-400 select-none">6</span>  <span class="text-blue-400">function</span> <span class="text-yellow-300">lengthOfLastWord</span>(<span class="text-orange-300">s</span>: <span class="text-green-400">string</span>): <span class="text-green-400">number</span> {
<span class="text-gray-400 select-none">7</span>      <span class="text-gray-500">// 文字列の末尾から開始して、スペースをスキップ</span>
<span class="text-gray-400 select-none">8</span>      <span class="text-blue-400">let</span> <span class="text-cyan-300">i</span> <span class="text-red-400">=</span> <span class="text-orange-300">s</span><span class="text-red-400">.</span><span class="text-yellow-300">length</span> <span class="text-red-400">-</span> <span class="text-purple-400">1</span>;
<span class="text-gray-400 select-none">9</span>  
<span class="text-gray-400 select-none">10</span>     <span class="text-gray-500">// 末尾のスペースをスキップ</span>
<span class="text-gray-400 select-none">11</span>     <span class="text-blue-400">while</span> (<span class="text-cyan-300">i</span> <span class="text-red-400">&gt;=</span> <span class="text-purple-400">0</span> <span class="text-red-400">&amp;&amp;</span> <span class="text-orange-300">s</span><span class="text-red-400">[</span><span class="text-cyan-300">i</span><span class="text-red-400">]</span> <span class="text-red-400">===</span> <span class="text-green-300">' '</span>) {
<span class="text-gray-400 select-none">12</span>         <span class="text-cyan-300">i</span><span class="text-red-400">--</span>;
<span class="text-gray-400 select-none">13</span>     }
<span class="text-gray-400 select-none">14</span> 
<span class="text-gray-400 select-none">15</span>     <span class="text-gray-500">// 最後の単語の長さをカウント</span>
<span class="text-gray-400 select-none">16</span>     <span class="text-blue-400">let</span> <span class="text-cyan-300">length</span> <span class="text-red-400">=</span> <span class="text-purple-400">0</span>;
<span class="text-gray-400 select-none">17</span>     <span class="text-blue-400">while</span> (<span class="text-cyan-300">i</span> <span class="text-red-400">&gt;=</span> <span class="text-purple-400">0</span> <span class="text-red-400">&amp;&amp;</span> <span class="text-orange-300">s</span><span class="text-red-400">[</span><span class="text-cyan-300">i</span><span class="text-red-400">]</span> <span class="text-red-400">!==</span> <span class="text-green-300">' '</span>) {
<span class="text-gray-400 select-none">18</span>         <span class="text-cyan-300">length</span><span class="text-red-400">++</span>;
<span class="text-gray-400 select-none">19</span>         <span class="text-cyan-300">i</span><span class="text-red-400">--</span>;
<span class="text-gray-400 select-none">20</span>     }
<span class="text-gray-400 select-none">21</span> 
<span class="text-gray-400 select-none">22</span>     <span class="text-blue-400">return</span> <span class="text-cyan-300">length</span>;
<span class="text-gray-400 select-none">23</span> }</code></pre>
                    </div>
                </div>
            </div>

            <!-- アルゴリズム解析 -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-10">
                <!-- ステップバイステップ解析 -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">
                        ステップバイステップ解析
                    </h3>
                    <div class="space-y-4">
                        <div
                            id="step-1"
                            class="p-4 rounded-lg border border-gray-200 cursor-pointer hover:bg-blue-50 transition-all duration-200"
                        >
                            <div class="font-medium text-blue-700 mb-2">ステップ 1: 初期化</div>
                            <div class="text-sm text-gray-600">
                                文字列の末尾インデックス (s.length - 1) を設定
                            </div>
                            <div class="code-font text-xs text-gray-500 mt-2">i = s.length - 1</div>
                        </div>
                        <div
                            id="step-2"
                            class="p-4 rounded-lg border border-gray-200 cursor-pointer hover:bg-green-50 transition-all duration-200"
                        >
                            <div class="font-medium text-green-700 mb-2">
                                ステップ 2: 末尾スペーススキップ
                            </div>
                            <div class="text-sm text-gray-600">
                                文字列末尾から連続するスペースをスキップ
                            </div>
                            <div class="code-font text-xs text-gray-500 mt-2">
                                while (i >= 0 && s[i] === ' ') { i--; }
                            </div>
                        </div>
                        <div
                            id="step-3"
                            class="p-4 rounded-lg border border-gray-200 cursor-pointer hover:bg-purple-50 transition-all duration-200"
                        >
                            <div class="font-medium text-purple-700 mb-2">
                                ステップ 3: 単語長カウント
                            </div>
                            <div class="text-sm text-gray-600">
                                最後の単語の文字数を逆向きにカウント
                            </div>
                            <div class="code-font text-xs text-gray-500 mt-2">
                                while (i >= 0 && s[i] !== ' ') { length++; i--; }
                            </div>
                        </div>
                        <div
                            id="step-4"
                            class="p-4 rounded-lg border border-gray-200 cursor-pointer hover:bg-orange-50 transition-all duration-200"
                        >
                            <div class="font-medium text-orange-700 mb-2">ステップ 4: 結果返却</div>
                            <div class="text-sm text-gray-600">カウントした長さを返却</div>
                            <div class="code-font text-xs text-gray-500 mt-2">return length</div>
                        </div>
                    </div>
                </div>

                <!-- 計算量解析 -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">計算量解析</h3>
                    <div class="space-y-6">
                        <div class="p-4 bg-blue-50 rounded-lg">
                            <div class="font-medium text-blue-800 mb-2">⏱ 時間計算量</div>
                            <div class="text-lg font-bold text-blue-700 mb-2">O(n)</div>
                            <div class="text-sm text-gray-600">
                                最悪の場合、文字列全体を走査する必要がある
                            </div>
                        </div>
                        <div class="p-4 bg-green-50 rounded-lg">
                            <div class="font-medium text-green-800 mb-2">💾 空間計算量</div>
                            <div class="text-lg font-bold text-green-700 mb-2">O(1)</div>
                            <div class="text-sm text-gray-600">定数の追加メモリのみ使用</div>
                        </div>
                        <div class="p-4 bg-purple-50 rounded-lg">
                            <div class="font-medium text-purple-800 mb-2">🎯 最適化ポイント</div>
                            <ul class="text-sm text-gray-600 space-y-1">
                                <li>• 配列操作を回避</li>
                                <li>• 逆向き走査で効率化</li>
                                <li>• メモリ使用量最小化</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 実行例の可視化 -->
            <div class="bg-white rounded-xl shadow-lg p-8 mb-10">
                <h3 class="text-xl font-semibold text-gray-800 mb-6">実行例の可視化</h3>
                <div class="space-y-8">
                    <!-- 例1 -->
                    <div class="example-section">
                        <h4 class="font-medium text-gray-700 mb-3">例1: "Hello World"</h4>
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <div class="flex items-center space-x-2 mb-4 code-font">
                                <span class="text-gray-500">文字列:</span>
                                <div id="example1" class="flex">
                                    <span class="char-box px-2 py-1 border border-gray-300">H</span>
                                    <span class="char-box px-2 py-1 border border-gray-300">e</span>
                                    <span class="char-box px-2 py-1 border border-gray-300">l</span>
                                    <span class="char-box px-2 py-1 border border-gray-300">l</span>
                                    <span class="char-box px-2 py-1 border border-gray-300">o</span>
                                    <span
                                        class="char-box px-2 py-1 border border-gray-300 bg-red-100"
                                    >
                                    </span>
                                    <span
                                        class="char-box px-2 py-1 border border-gray-300 bg-green-100"
                                        >W</span
                                    >
                                    <span
                                        class="char-box px-2 py-1 border border-gray-300 bg-green-100"
                                        >o</span
                                    >
                                    <span
                                        class="char-box px-2 py-1 border border-gray-300 bg-green-100"
                                        >r</span
                                    >
                                    <span
                                        class="char-box px-2 py-1 border border-gray-300 bg-green-100"
                                        >l</span
                                    >
                                    <span
                                        class="char-box px-2 py-1 border border-gray-300 bg-green-100"
                                        >d</span
                                    >
                                </div>
                            </div>
                            <div class="text-sm text-gray-600 mb-2">
                                <span
                                    class="inline-block w-4 h-4 bg-green-100 border border-gray-300 mr-2"
                                ></span
                                >最後の単語 "World" (長さ: 5)
                            </div>
                            <button
                                onclick="animateExample(1)"
                                class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors"
                            >
                                アニメーション実行
                            </button>
                        </div>
                    </div>

                    <!-- 例2 -->
                    <div class="example-section">
                        <h4 class="font-medium text-gray-700 mb-3">例2: " fly me to the moon "</h4>
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <div class="flex items-center space-x-2 mb-4 code-font">
                                <span class="text-gray-500">文字列:</span>
                                <div id="example2" class="flex flex-wrap">
                                    <span
                                        class="char-box px-2 py-1 border border-gray-300 bg-yellow-100"
                                    >
                                    </span>
                                    <span class="char-box px-2 py-1 border border-gray-300">f</span>
                                    <span class="char-box px-2 py-1 border border-gray-300">l</span>
                                    <span class="char-box px-2 py-1 border border-gray-300">y</span>
                                    <span class="char-box px-2 py-1 border border-gray-300"> </span>
                                    <span class="char-box px-2 py-1 border border-gray-300">m</span>
                                    <span class="char-box px-2 py-1 border border-gray-300">e</span>
                                    <span class="char-box px-2 py-1 border border-gray-300"> </span>
                                    <span class="char-box px-2 py-1 border border-gray-300">t</span>
                                    <span class="char-box px-2 py-1 border border-gray-300">o</span>
                                    <span class="char-box px-2 py-1 border border-gray-300"> </span>
                                    <span class="char-box px-2 py-1 border border-gray-300">t</span>
                                    <span class="char-box px-2 py-1 border border-gray-300">h</span>
                                    <span class="char-box px-2 py-1 border border-gray-300">e</span>
                                    <span class="char-box px-2 py-1 border border-gray-300"> </span>
                                    <span
                                        class="char-box px-2 py-1 border border-gray-300 bg-green-100"
                                        >m</span
                                    >
                                    <span
                                        class="char-box px-2 py-1 border border-gray-300 bg-green-100"
                                        >o</span
                                    >
                                    <span
                                        class="char-box px-2 py-1 border border-gray-300 bg-green-100"
                                        >o</span
                                    >
                                    <span
                                        class="char-box px-2 py-1 border border-gray-300 bg-green-100"
                                        >n</span
                                    >
                                    <span
                                        class="char-box px-2 py-1 border border-gray-300 bg-red-100"
                                    >
                                    </span>
                                </div>
                            </div>
                            <div class="text-sm text-gray-600 mb-2">
                                <span
                                    class="inline-block w-4 h-4 bg-green-100 border border-gray-300 mr-2"
                                ></span
                                >最後の単語 "moon" (長さ: 4)
                                <span
                                    class="inline-block w-4 h-4 bg-red-100 border border-gray-300 mr-2 ml-4"
                                ></span
                                >スキップされるスペース
                            </div>
                            <button
                                onclick="animateExample(2)"
                                class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors"
                            >
                                アニメーション実行
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- パフォーマンス比較 -->
            <div class="bg-white rounded-xl shadow-lg p-8">
                <h3 class="text-xl font-semibold text-gray-800 mb-6">他のアプローチとの比較</h3>
                <div class="overflow-x-auto">
                    <table class="w-full table-auto">
                        <thead>
                            <tr class="bg-gray-50">
                                <th class="px-4 py-3 text-left font-medium text-gray-700">
                                    アプローチ
                                </th>
                                <th class="px-4 py-3 text-center font-medium text-gray-700">
                                    時間計算量
                                </th>
                                <th class="px-4 py-3 text-center font-medium text-gray-700">
                                    空間計算量
                                </th>
                                <th class="px-4 py-3 text-left font-medium text-gray-700">
                                    メモリ効率
                                </th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200">
                            <tr class="hover:bg-green-50 transition-colors">
                                <td class="px-4 py-4 font-medium text-green-700">
                                    逆向き走査（採用）
                                </td>
                                <td class="px-4 py-4 text-center text-green-600">O(n)</td>
                                <td class="px-4 py-4 text-center text-green-600">O(1)</td>
                                <td class="px-4 py-4 text-green-600">最も効率的</td>
                            </tr>
                            <tr class="hover:bg-yellow-50 transition-colors">
                                <td class="px-4 py-4">split() + pop()</td>
                                <td class="px-4 py-4 text-center text-yellow-600">O(n)</td>
                                <td class="px-4 py-4 text-center text-red-600">O(n)</td>
                                <td class="px-4 py-4 text-yellow-600">配列作成でメモリ消費</td>
                            </tr>
                            <tr class="hover:bg-orange-50 transition-colors">
                                <td class="px-4 py-4">trim() + lastIndexOf()</td>
                                <td class="px-4 py-4 text-center text-yellow-600">O(n)</td>
                                <td class="px-4 py-4 text-center text-yellow-600">O(n)</td>
                                <td class="px-4 py-4 text-orange-600">
                                    文字列操作でオーバーヘッド
                                </td>
                            </tr>
                            <tr class="hover:bg-red-50 transition-colors">
                                <td class="px-4 py-4">正規表現</td>
                                <td class="px-4 py-4 text-center text-red-600">O(n)</td>
                                <td class="px-4 py-4 text-center text-yellow-600">O(m)</td>
                                <td class="px-4 py-4 text-red-600">パターンマッチング負荷</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <script>
            // ステップのハイライト機能
            document.querySelectorAll('[id^="step-"]').forEach((step) => {
                step.addEventListener('click', function () {
                    // すべてのステップのハイライトを削除
                    document
                        .querySelectorAll('[id^="step-"]')
                        .forEach((s) => s.classList.remove('active-step'));
                    // クリックされたステップをハイライト
                    this.classList.add('active-step');
                });
            });

            // アニメーション関数
            function animateExample(exampleNum) {
                const example = document.getElementById(`example${exampleNum}`);
                const chars = example.querySelectorAll('.char-box');

                // リセット
                chars.forEach((char) => {
                    char.classList.remove('bg-blue-200', 'bg-purple-200', 'transform', 'scale-110');
                });

                let i = chars.length - 1;
                let step = 0;

                function animate() {
                    if (step === 0) {
                        // ステップ1: 末尾スペーススキップ
                        if (i >= 0 && chars[i].textContent === ' ') {
                            chars[i].classList.add('bg-blue-200', 'transform', 'scale-110');
                            setTimeout(() => {
                                chars[i].classList.remove('bg-blue-200', 'transform', 'scale-110');
                                i--;
                                setTimeout(animate, 300);
                            }, 500);
                        } else {
                            step = 1;
                            animate();
                        }
                    } else if (step === 1) {
                        // ステップ2: 単語カウント
                        if (i >= 0 && chars[i].textContent !== ' ') {
                            chars[i].classList.add('bg-purple-200', 'transform', 'scale-110');
                            i--;
                            setTimeout(animate, 400);
                        } else {
                            // アニメーション完了
                            setTimeout(() => {
                                chars.forEach((char) => {
                                    char.classList.remove(
                                        'bg-purple-200',
                                        'transform',
                                        'scale-110',
                                    );
                                });
                            }, 1000);
                        }
                    }
                }

                animate();
            }

            // コード行のホバー効果
            document.querySelectorAll('.code-line').forEach((line) => {
                line.addEventListener('mouseenter', function () {
                    this.classList.add('bg-blue-50');
                });
                line.addEventListener('mouseleave', function () {
                    this.classList.remove('bg-blue-50');
                });
            });

            // スムーズスクロール
            document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    document.querySelector(this.getAttribute('href')).scrollIntoView({
                        behavior: 'smooth',
                    });
                });
            });
        </script>
    </body>
</html>
