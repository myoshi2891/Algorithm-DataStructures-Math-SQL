<!DOCTYPE html>
<html lang="ja">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>å›è»¢ã•ã‚ŒãŸã‚½ãƒ¼ãƒˆæ¸ˆã¿é…åˆ—ã®æ¢ç´¢è§£æ</title>
        <style>
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                margin: 0;
                padding: 20px;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                min-height: 100vh;
            }

            .container {
                max-width: 1200px;
                margin: 0 auto;
                background: white;
                border-radius: 15px;
                padding: 30px;
                box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            }

            h1 {
                color: #2c3e50;
                text-align: center;
                margin-bottom: 30px;
                font-size: 2.5em;
                background: linear-gradient(45deg, #3498db, #e74c3c);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }

            h2 {
                color: #34495e;
                border-bottom: 3px solid #3498db;
                padding-bottom: 10px;
                margin-top: 40px;
            }

            .array-visual {
                display: flex;
                justify-content: center;
                margin: 20px 0;
                flex-wrap: wrap;
                gap: 5px;
            }

            .array-item {
                width: 50px;
                height: 50px;
                display: flex;
                align-items: center;
                justify-content: center;
                border: 2px solid #3498db;
                border-radius: 8px;
                font-weight: bold;
                font-size: 16px;
                transition: all 0.3s ease;
            }

            .array-item.normal {
                background: #ecf0f1;
                color: #2c3e50;
            }

            .array-item.left {
                background: #e8f5e8;
                border-color: #27ae60;
                color: #27ae60;
            }

            .array-item.right {
                background: #fdeaea;
                border-color: #e74c3c;
                color: #e74c3c;
            }

            .array-item.mid {
                background: #fff3cd;
                border-color: #f39c12;
                color: #f39c12;
                transform: scale(1.1);
            }

            .array-item.target {
                background: #d4edda;
                border-color: #28a745;
                color: #28a745;
                animation: pulse 1s infinite;
            }

            .array-item.found {
                background: #28a745;
                border-color: #28a745;
                color: white;
                animation: found 0.5s ease-in-out;
            }

            @keyframes pulse {
                0% {
                    transform: scale(1);
                }

                50% {
                    transform: scale(1.1);
                }

                100% {
                    transform: scale(1);
                }
            }

            @keyframes found {
                0% {
                    transform: scale(1);
                }

                50% {
                    transform: scale(1.3);
                }

                100% {
                    transform: scale(1.1);
                }
            }

            .index-row {
                display: flex;
                justify-content: center;
                margin-top: 5px;
                flex-wrap: wrap;
                gap: 5px;
            }

            .index-item {
                width: 50px;
                height: 20px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 12px;
                color: #7f8c8d;
            }

            .step {
                background: #f8f9fa;
                border-left: 4px solid #3498db;
                padding: 20px;
                margin: 20px 0;
                border-radius: 0 10px 10px 0;
            }

            .step h3 {
                color: #2980b9;
                margin: 0 0 10px 0;
            }

            .code-block {
                background: #2c3e50;
                color: #ecf0f1;
                padding: 15px;
                border-radius: 8px;
                font-family: 'Courier New', monospace;
                margin: 10px 0;
                overflow-x: auto;
            }

            .highlight {
                background: #f39c12;
                color: white;
                padding: 2px 4px;
                border-radius: 3px;
            }

            .controls {
                text-align: center;
                margin: 20px 0;
            }

            button {
                background: linear-gradient(45deg, #3498db, #2980b9);
                color: white;
                border: none;
                padding: 12px 24px;
                border-radius: 25px;
                cursor: pointer;
                margin: 5px;
                font-size: 16px;
                transition: all 0.3s ease;
            }

            button:hover {
                transform: translateY(-2px);
                box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
            }

            button:disabled {
                background: #bdc3c7;
                cursor: not-allowed;
                transform: none;
                box-shadow: none;
            }

            .info-panel {
                background: linear-gradient(135deg, #74b9ff, #0984e3);
                color: white;
                padding: 20px;
                border-radius: 10px;
                margin: 20px 0;
            }

            .complexity-analysis {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 20px;
                margin: 20px 0;
            }

            .complexity-card {
                background: #f8f9fa;
                padding: 20px;
                border-radius: 10px;
                border: 1px solid #dee2e6;
            }

            .complexity-card h4 {
                color: #495057;
                margin: 0 0 10px 0;
            }

            .big-o {
                font-size: 24px;
                font-weight: bold;
                color: #e74c3c;
            }
        </style>
    </head>

    <body>
        <div class="container">
            <h1>ğŸ” å›è»¢ã•ã‚ŒãŸã‚½ãƒ¼ãƒˆæ¸ˆã¿é…åˆ—ã®æ¢ç´¢è§£æ</h1>

            <h2>ğŸ“Š ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ æ¦‚è¦</h2>
            <div class="info-panel">
                <strong>å•é¡Œï¼š</strong>å›è»¢ã•ã‚ŒãŸã‚½ãƒ¼ãƒˆæ¸ˆã¿é…åˆ—ã‹ã‚‰æŒ‡å®šã•ã‚ŒãŸå€¤ã‚’ O(log n) ã§æ¢ç´¢<br>
                <strong>æ‰‹æ³•ï¼š</strong>ä¿®æ­£ã•ã‚ŒãŸäºŒåˆ†æ¢ç´¢ï¼ˆBinary Searchï¼‰<br>
                <strong>ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒˆï¼š</strong>é…åˆ—ã‚’åŠåˆ†ã«åˆ†ã‘ã‚‹ã¨ã€å¿…ãšã©ã¡ã‚‰ã‹ä¸€æ–¹ã¯å®Œå…¨ã«ã‚½ãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹
            </div>

            <h2>ğŸ¯ Example 1: nums = [4,5,6,7,0,1,2], target = 0</h2>

            <div class="controls">
                <button id="startBtn">å®Ÿè¡Œé–‹å§‹</button>
                <button id="nextBtn" disabled>æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—</button>
                <button id="resetBtn">ãƒªã‚»ãƒƒãƒˆ</button>
            </div>

            <div id="visualization">
                <div class="array-visual" id="arrayDisplay"></div>
                <div class="index-row" id="indexDisplay"></div>
            </div>

            <div id="stepInfo"></div>

            <h2>ğŸ“ˆ è¨ˆç®—é‡è§£æ</h2>
            <div class="complexity-analysis">
                <div class="complexity-card">
                    <h4>â±ï¸ æ™‚é–“è¨ˆç®—é‡</h4>
                    <div class="big-o">O(log n)</div>
                    <p>äºŒåˆ†æ¢ç´¢ã«ã‚ˆã‚Šã€æ¯å›æ¢ç´¢ç¯„å›²ã‚’åŠåˆ†ã«å‰Šæ¸›ã™ã‚‹ãŸã‚</p>
                </div>
                <div class="complexity-card">
                    <h4>ğŸ’¾ ç©ºé–“è¨ˆç®—é‡</h4>
                    <div class="big-o">O(1)</div>
                    <p>è¿½åŠ ã®é…åˆ—ã‚„ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’ä½¿ç”¨ã›ãšã€å®šæ•°å€‹ã®å¤‰æ•°ã®ã¿</p>
                </div>
            </div>

            <h2>ğŸ” ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®è©³ç´°åˆ†æ</h2>

            <div class="step">
                <h3>Step 1: åˆæœŸåŒ–</h3>
                <div class="code-block">
                    let left = 0, right = nums.length - 1;
                    // left = 0, right = 6</div>
                <p>æ¢ç´¢ç¯„å›²ã®ä¸¡ç«¯ã‚’è¨­å®šã—ã¾ã™ã€‚</p>
            </div>

            <div class="step">
                <h3>Step 2: ä¸­å¤®å€¤ã®è¨ˆç®—</h3>
                <div class="code-block">
                    const mid = Math.floor((left + right) / 2);
                    // mid = Math.floor((0 + 6) / 2) = 3</div>
                <p>ç¾åœ¨ã®æ¢ç´¢ç¯„å›²ã®ä¸­å¤®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’è¨ˆç®—ã—ã¾ã™ã€‚</p>
            </div>

            <div class="step">
                <h3>Step 3: ã‚½ãƒ¼ãƒˆæ¸ˆã¿éƒ¨åˆ†ã®åˆ¤å®š</h3>
                <div class="code-block">
                    if (nums[left] <= nums[mid]) { // å·¦åŠåˆ†ãŒã‚½ãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ // nums[0]=4, nums[3]=7 â†’ 4 <=7 (true) } else { // å³åŠåˆ†ãŒã‚½ãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ }</div>
                        <p><span class="highlight">é‡è¦ï¼š</span>å›è»¢ã•ã‚ŒãŸé…åˆ—ã§ã¯ã€å¿…ãšã©ã¡ã‚‰ã‹ä¸€æ–¹ã®åŠåˆ†ãŒå®Œå…¨ã«ã‚½ãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚</p>
                </div>

                <div class="step">
                    <h3>Step 4: ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã®ç¯„å›²åˆ¤å®š</h3>
                    <div class="code-block">
                        // å·¦åŠåˆ†ãŒã‚½ãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹å ´åˆ
                        if (nums[left] <= target && target < nums[mid]) { // ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãŒå·¦åŠåˆ†ã®ç¯„å›²å†… right=mid - 1; } else { // ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãŒå³åŠåˆ†ã«ã‚ã‚‹ left=mid + 1; }</div>
                            <p>ã‚½ãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹éƒ¨åˆ†ã§ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãŒç¯„å›²å†…ã«ã‚ã‚‹ã‹ãƒã‚§ãƒƒã‚¯ã—ã€æ¢ç´¢ç¯„å›²ã‚’çµã‚Šè¾¼ã¿ã¾ã™ã€‚</p>
                    </div>

                    <h2>ğŸª ä»–ã®ã‚±ãƒ¼ã‚¹ã®è§£æ</h2>

                    <div class="step">
                        <h3>Case 2: nums = [4,5,6,7,0,1,2], target = 3 (å­˜åœ¨ã—ãªã„å ´åˆ)</h3>
                        <p>åŒæ§˜ã®æ‰‹é †ã§æ¢ç´¢ã‚’é€²ã‚ã¾ã™ãŒã€æœ€çµ‚çš„ã« left > right ã«ãªã‚Šã€-1 ã‚’è¿”ã—ã¾ã™ã€‚</p>
                    </div>

                    <div class="step">
                        <h3>Case 3: nums = [1], target = 0 (å˜ä¸€è¦ç´ ã®é…åˆ—)</h3>
                        <p>é…åˆ—ã«1ã¤ã®è¦ç´ ã—ã‹ãªã„å ´åˆã€1å›ã®æ¯”è¼ƒã§çµæœãŒæ±ºã¾ã‚Šã¾ã™ã€‚</p>
                    </div>

                    <h2>ğŸš€ æœ€é©åŒ–ã®ãƒã‚¤ãƒ³ãƒˆ</h2>
                    <ul>
                        <li><strong>ã‚ªãƒ¼ãƒãƒ¼ãƒ•ãƒ­ãƒ¼å¯¾ç­–ï¼š</strong><code>Math.floor((left + right) / 2)</code>ã‚’ä½¿ç”¨</li>
                        <li><strong>æ¡ä»¶åˆ¤å®šã®åŠ¹ç‡åŒ–ï¼š</strong>ä¸è¦ãªæ¯”è¼ƒã‚’é¿ã‘ã‚‹</li>
                        <li><strong>ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡å‰Šæ¸›ï¼š</strong>è¿½åŠ ã®é…åˆ—ã‚’ä½¿ç”¨ã—ãªã„</li>
                        <li><strong>ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã®å‡¦ç†ï¼š</strong>å˜ä¸€è¦ç´ ã‚„é‡è¤‡ã®ãªã„é…åˆ—ã®ç‰¹æ€§ã‚’æ´»ç”¨</li>
                    </ul>

                </div>

                <script>
                    const nums = [4, 5, 6, 7, 0, 1, 2];
                    const target = 0;
                    let currentStep = 0;
                    let steps = [];
                    let isRunning = false;

                    function initializeSteps() {
                        steps = [
                            {
                                left: 0, right: 6, mid: 3,
                                description: "åˆæœŸçŠ¶æ…‹: left=0, right=6, mid=3",
                                detail: "nums[3] = 7, target = 0ã€‚nums[0]=4 <= nums[3]=7 ãªã®ã§å·¦åŠåˆ†ãŒã‚½ãƒ¼ãƒˆæ¸ˆã¿",
                                action: "å·¦åŠåˆ† [4,5,6,7] ã§ target=0 ã‚’æ¢ç´¢ â†’ ç¯„å›²å¤–ãªã®ã§å³åŠåˆ†ã¸"
                            },
                            {
                                left: 4, right: 6, mid: 5,
                                description: "Step 1: left=4, right=6, mid=5",
                                detail: "nums[5] = 1, target = 0ã€‚nums[4]=0 <= nums[5]=1 ãªã®ã§å·¦åŠåˆ†ãŒã‚½ãƒ¼ãƒˆæ¸ˆã¿",
                                action: "å·¦åŠåˆ† [0,1] ã§ target=0 ã‚’æ¢ç´¢ â†’ ç¯„å›²å†…ãªã®ã§å·¦åŠåˆ†ã¸"
                            },
                            {
                                left: 4, right: 4, mid: 4,
                                description: "Step 2: left=4, right=4, mid=4",
                                detail: "nums[4] = 0, target = 0ã€‚ä¸€è‡´ã—ã¾ã—ãŸï¼",
                                action: "target ãŒè¦‹ã¤ã‹ã£ãŸã®ã§ index 4 ã‚’è¿”ã™",
                                found: true
                            }
                        ];
                    }

                    function renderArray(stepData) {
                        const arrayDisplay = document.getElementById('arrayDisplay');
                        const indexDisplay = document.getElementById('indexDisplay');

                        arrayDisplay.innerHTML = '';
                        indexDisplay.innerHTML = '';

                        nums.forEach((num, index) => {
                            const item = document.createElement('div');
                            item.className = 'array-item';
                            item.textContent = num;

                            const indexItem = document.createElement('div');
                            indexItem.className = 'index-item';
                            indexItem.textContent = index;

                            if (stepData) {
                                if (stepData.found && index === stepData.mid) {
                                    item.classList.add('found');
                                } else if (index === stepData.mid) {
                                    item.classList.add('mid');
                                } else if (index >= stepData.left && index <= stepData.right) {
                                    if (index <= stepData.mid) {
                                        item.classList.add('left');
                                    } else {
                                        item.classList.add('right');
                                    }
                                } else {
                                    item.classList.add('normal');
                                }
                            } else {
                                item.classList.add('normal');
                            }

                            if (num === target && !stepData?.found) {
                                item.classList.add('target');
                            }

                            arrayDisplay.appendChild(item);
                            indexDisplay.appendChild(indexItem);
                        });
                    }

                    function renderStepInfo(stepData) {
                        const stepInfo = document.getElementById('stepInfo');
                        if (!stepData) {
                            stepInfo.innerHTML = '';
                            return;
                        }

                        stepInfo.innerHTML = `
                <div class="step">
                    <h3>${stepData.description}</h3>
                    <p><strong>è©³ç´°:</strong> ${stepData.detail}</p>
                    <p><strong>åˆ¤å®š:</strong> ${stepData.action}</p>
                    <div class="code-block">
left = ${stepData.left}, right = ${stepData.right}, mid = ${stepData.mid}
nums[${stepData.mid}] = ${nums[stepData.mid]}, target = ${target}
                    </div>
                </div>
            `;
                    }

                    document.getElementById('startBtn').addEventListener('click', () => {
                        if (!isRunning) {
                            initializeSteps();
                            currentStep = 0;
                            isRunning = true;
                            document.getElementById('startBtn').disabled = true;
                            document.getElementById('nextBtn').disabled = false;
                            renderArray();
                        }
                    });

                    document.getElementById('nextBtn').addEventListener('click', () => {
                        if (currentStep < steps.length) {
                            const stepData = steps[currentStep];
                            renderArray(stepData);
                            renderStepInfo(stepData);
                            currentStep++;

                            if (currentStep >= steps.length) {
                                document.getElementById('nextBtn').disabled = true;
                            }
                        }
                    });

                    document.getElementById('resetBtn').addEventListener('click', () => {
                        currentStep = 0;
                        isRunning = false;
                        document.getElementById('startBtn').disabled = false;
                        document.getElementById('nextBtn').disabled = true;
                        renderArray();
                        renderStepInfo();
                    });

                    // åˆæœŸè¡¨ç¤º
                    renderArray();
                </script>
    </body>

</html>