<!DOCTYPE html>
<html lang="ja">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>å›æ–‡åˆ¤å®šã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ è©³ç´°è§£æ</title>
        <style>
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                color: #333;
                max-width: 1200px;
                margin: 0 auto;
                padding: 20px;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                min-height: 100vh;
            }

            .container {
                background: rgba(255, 255, 255, 0.95);
                border-radius: 15px;
                padding: 30px;
                box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
                backdrop-filter: blur(10px);
            }

            h1,
            h2,
            h3 {
                color: #2c3e50;
                margin-top: 2rem;
            }

            h1 {
                text-align: center;
                font-size: 2.5rem;
                margin-bottom: 2rem;
                background: linear-gradient(45deg, #667eea, #764ba2);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }

            .algorithm-section {
                margin: 30px 0;
                padding: 20px;
                border: 2px solid #e1e8ed;
                border-radius: 10px;
                background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            }

            .visualization {
                margin: 20px 0;
                padding: 15px;
                background: white;
                border-radius: 8px;
                border: 1px solid #ddd;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            }

            .string-display {
                font-family: 'Courier New', monospace;
                font-size: 18px;
                text-align: center;
                margin: 15px 0;
                padding: 10px;
                background: #f8f9fa;
                border-radius: 5px;
            }

            .character {
                display: inline-block;
                width: 30px;
                height: 30px;
                line-height: 30px;
                text-align: center;
                margin: 2px;
                border: 1px solid #ccc;
                border-radius: 3px;
                background: #fff;
            }

            .center {
                background: #ff6b6b !important;
                color: white;
                font-weight: bold;
            }

            .radius {
                background: #4ecdc4 !important;
                color: white;
            }

            .processed {
                background: #ffe66d !important;
            }

            .step {
                margin: 20px 0;
                padding: 15px;
                border-left: 4px solid #667eea;
                background: rgba(102, 126, 234, 0.1);
                border-radius: 0 8px 8px 0;
            }

            .complexity {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 20px;
                border-radius: 10px;
                margin: 20px 0;
            }

            .example {
                background: #f0f9ff;
                border: 2px solid #0ea5e9;
                border-radius: 10px;
                padding: 20px;
                margin: 20px 0;
            }

            .code-snippet {
                background: #1e293b;
                color: #e2e8f0;
                padding: 15px;
                border-radius: 8px;
                font-family: 'Courier New', monospace;
                font-size: 14px;
                overflow-x: auto;
                margin: 15px 0;
            }

            .highlight {
                background: #ffd700;
                padding: 2px 4px;
                border-radius: 3px;
                font-weight: bold;
            }

            table {
                width: 100%;
                border-collapse: collapse;
                margin: 20px 0;
                background: white;
                border-radius: 8px;
                overflow: hidden;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            }

            th,
            td {
                padding: 12px;
                text-align: center;
                border: 1px solid #ddd;
            }

            th {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                font-weight: bold;
            }

            tr:nth-child(even) {
                background: #f8f9fa;
            }

            .interactive-demo {
                margin: 30px 0;
                padding: 20px;
                background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
                border-radius: 10px;
            }

            .demo-input {
                padding: 10px;
                margin: 10px;
                border: 2px solid #667eea;
                border-radius: 5px;
                font-size: 16px;
            }

            .demo-button {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                border: none;
                padding: 12px 24px;
                border-radius: 6px;
                cursor: pointer;
                font-size: 16px;
                margin: 10px;
                transition: transform 0.2s;
            }

            .demo-button:hover {
                transform: translateY(-2px);
            }

            .animation {
                animation: fadeInUp 0.6s ease-out;
            }

            @keyframes fadeInUp {
                from {
                    opacity: 0;
                    transform: translateY(20px);
                }

                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
        </style>
    </head>

    <body>
        <div class="container">
            <h1>ğŸ¯ å›æ–‡åˆ¤å®šã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ è©³ç´°è§£æ</h1>

            <div class="algorithm-section animation">
                <h2>ğŸ“Š ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ æ¦‚è¦</h2>
                <p>ã“ã®å•é¡Œã¯<strong>Manacher's Algorithm</strong>ã‚’ä½¿ç”¨ã—ã¦åŠ¹ç‡çš„ã«è§£æ±ºã—ã¾ã™ã€‚é€šå¸¸ã®æ–¹æ³•ã§ã¯å„ã‚¯ã‚¨ãƒªã”ã¨ã«O(N)æ™‚é–“ã‹ã‹ã‚Šã¾ã™ãŒã€äº‹å‰è¨ˆç®—ã«ã‚ˆã‚Š<span class="highlight">O(1)æ™‚é–“ã§ã®ã‚¯ã‚¨ãƒªå‡¦ç†</span>ã‚’å®Ÿç¾ã—ã¾ã™ã€‚</p>

                <div class="complexity">
                    <h3>âš¡ è¨ˆç®—é‡åˆ†æ</h3>
                    <ul>
                        <li><strong>æ™‚é–“è¨ˆç®—é‡:</strong> O(N + Q) - å‰å‡¦ç†O(N) + ã‚¯ã‚¨ãƒªå‡¦ç†O(Q)</li>
                        <li><strong>ç©ºé–“è¨ˆç®—é‡:</strong> O(N) - åŠå¾„é…åˆ—ã®ã¿</li>
                        <li><strong>å¾“æ¥æ‰‹æ³•:</strong> O(N Ã— Q) â†’ æœ€å¤§10^10å›ã®æ“ä½œ</li>
                        <li><strong>æœ€é©åŒ–å¾Œ:</strong> O(N + Q) â†’ æœ€å¤§2Ã—10^5å›ã®æ“ä½œ</li>
                    </ul>
                </div>
            </div>

            <div class="algorithm-section animation">
                <h2>ğŸ”„ Step 1: æ–‡å­—åˆ—ã®å‰å‡¦ç†</h2>
                <p>å¶æ•°é•·ãƒ»å¥‡æ•°é•·ã®å›æ–‡ã‚’çµ±ä¸€çš„ã«å‡¦ç†ã™ã‚‹ãŸã‚ã€æ–‡å­—é–“ã«ç‰¹æ®Šæ–‡å­—'#'ã‚’æŒ¿å…¥ã—ã¾ã™ã€‚</p>

                <div class="example">
                    <h3>ä¾‹: "mississippi"ã®å‰å‡¦ç†</h3>
                    <div class="visualization">
                        <div class="step">
                            <strong>å…ƒã®æ–‡å­—åˆ—:</strong>
                            <div class="string-display">
                                <span class="character">m</span>
                                <span class="character">i</span>
                                <span class="character">s</span>
                                <span class="character">s</span>
                                <span class="character">i</span>
                                <span class="character">s</span>
                                <span class="character">s</span>
                                <span class="character">i</span>
                                <span class="character">p</span>
                                <span class="character">p</span>
                                <span class="character">i</span>
                            </div>
                            <div style="text-align: center; margin-top: 10px;">
                                <small>ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹: 0-10 (é•·ã•11)</small>
                            </div>
                        </div>

                        <div class="step">
                            <strong>å‰å‡¦ç†å¾Œ:</strong>
                            <div class="string-display">
                                <span class="character processed">#</span>
                                <span class="character">m</span>
                                <span class="character processed">#</span>
                                <span class="character">i</span>
                                <span class="character processed">#</span>
                                <span class="character">s</span>
                                <span class="character processed">#</span>
                                <span class="character">s</span>
                                <span class="character processed">#</span>
                                <span class="character">i</span>
                                <span class="character processed">#</span>
                                <span class="character">s</span>
                                <span class="character processed">#</span>
                                <span class="character">s</span>
                                <span class="character processed">#</span>
                                <span class="character">i</span>
                                <span class="character processed">#</span>
                                <span class="character">p</span>
                                <span class="character processed">#</span>
                                <span class="character">p</span>
                                <span class="character processed">#</span>
                                <span class="character">i</span>
                                <span class="character processed">#</span>
                            </div>
                            <div style="text-align: center; margin-top: 10px;">
                                <small>ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹: 0-22 (é•·ã•23)</small>
                            </div>
                        </div>
                    </div>

                    <div class="code-snippet">
                        const processed = '#' + s.split('').join('#') + '#';
                        // "mississippi" â†’ "#m#i#s#s#i#s#s#i#p#p#i#"
                    </div>
                </div>
            </div>

            <div class="algorithm-section animation">
                <h2>ğŸ§  Step 2: Manacher's Algorithm</h2>
                <p>å„ä½ç½®ã‚’ä¸­å¿ƒã¨ã—ãŸæœ€é•·å›æ–‡ã®åŠå¾„ã‚’åŠ¹ç‡çš„ã«è¨ˆç®—ã—ã¾ã™ã€‚å¯¾ç§°æ€§ã‚’åˆ©ç”¨ã—ã¦ç„¡é§„ãªè¨ˆç®—ã‚’å‰Šæ¸›ã—ã¾ã™ã€‚</p>

                <div class="example">
                    <h3>ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®å‹•ä½œåŸç†</h3>
                    <div class="visualization">
                        <table>
                            <thead>
                                <tr>
                                    <th>ä½ç½®</th>
                                    <th>æ–‡å­—</th>
                                    <th>åŠå¾„</th>
                                    <th>èª¬æ˜</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>0</td>
                                    <td>#</td>
                                    <td>0</td>
                                    <td>å¢ƒç•Œ</td>
                                </tr>
                                <tr>
                                    <td>1</td>
                                    <td>m</td>
                                    <td>1</td>
                                    <td>å˜ä¸€æ–‡å­—</td>
                                </tr>
                                <tr>
                                    <td>7</td>
                                    <td>s</td>
                                    <td>1</td>
                                    <td>"s"å˜ä½“</td>
                                </tr>
                                <tr class="highlight" style="background: #ffe6e6;">
                                    <td>9</td>
                                    <td>#</td>
                                    <td>3</td>
                                    <td>"s#s" â†’ å…ƒæ–‡å­—åˆ—"ss"</td>
                                </tr>
                                <tr class="highlight" style="background: #e6f3ff;">
                                    <td>15</td>
                                    <td>#</td>
                                    <td>3</td>
                                    <td>"i#s#s#i" â†’ å…ƒæ–‡å­—åˆ—"issi"</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="step">
                        <h4>ğŸ” é‡è¦ãªæ¦‚å¿µ</h4>
                        <ul>
                            <li><strong>Center:</strong> ç¾åœ¨ã®æœ€é•·å›æ–‡ã®ä¸­å¿ƒä½ç½®</li>
                            <li><strong>Right:</strong> ç¾åœ¨ã®æœ€é•·å›æ–‡ã®å³ç«¯</li>
                            <li><strong>å¯¾ç§°æ€§ã®åˆ©ç”¨:</strong> æ—¢ã«è¨ˆç®—ã—ãŸæƒ…å ±ã‚’æ´»ç”¨ã—ã¦é«˜é€ŸåŒ–</li>
                        </ul>
                    </div>

                    <div class="code-snippet">
                        // å¯¾ç§°æ€§ã‚’åˆ©ç”¨ã—ãŸåˆæœŸåŒ–
                        if (i < right) { radius[i]=Math.min(right - i, radius[2 * center - i]); } // å›æ–‡ã®æ‹¡å¼µ while (processed[i + radius[i] + 1]===processed[i - radius[i] - 1]) { radius[i]++; } </div>
                    </div>
                </div>

                <div class="algorithm-section animation">
                    <h2>âš¡ Step 3: ã‚¯ã‚¨ãƒªå‡¦ç†</h2>
                    <p>äº‹å‰è¨ˆç®—ã—ãŸåŠå¾„é…åˆ—ã‚’ä½¿ç”¨ã—ã¦ã€å„ã‚¯ã‚¨ãƒªã‚’O(1)æ™‚é–“ã§å‡¦ç†ã—ã¾ã™ã€‚</p>

                    <div class="example">
                        <h3>å…·ä½“ä¾‹: ã‚¯ã‚¨ãƒª[5,8] â†’ "issi"</h3>
                        <div class="visualization">
                            <div class="step">
                                <strong>1. ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹å¤‰æ›:</strong>
                                <ul>
                                    <li>ã‚¯ã‚¨ãƒª: L=5, R=8 (1-indexed)</li>
                                    <li>0-indexed: start=4, end=7</li>
                                    <li>éƒ¨åˆ†æ–‡å­—åˆ—: "issi"</li>
                                </ul>
                            </div>

                            <div class="step">
                                <strong>2. å‰å‡¦ç†æ–‡å­—åˆ—ã§ã®ä½ç½®è¨ˆç®—:</strong>
                                <ul>
                                    <li>center = start + end + 1 = 4 + 7 + 1 = 12</li>
                                    <li>length = end - start + 1 = 7 - 4 + 1 = 4</li>
                                    <li>å‰å‡¦ç†æ–‡å­—åˆ—ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹12: "#"</li>
                                </ul>
                            </div>

                            <div class="step">
                                <strong>3. åŠå¾„ãƒã‚§ãƒƒã‚¯:</strong>
                                <div class="string-display">
                                    <span class="character">s</span>
                                    <span class="character processed">#</span>
                                    <span class="character radius">i</span>
                                    <span class="character processed">#</span>
                                    <span class="character center">s</span>
                                    <span class="character processed">#</span>
                                    <span class="character radius">s</span>
                                    <span class="character processed">#</span>
                                    <span class="character">i</span>
                                </div>
                                <p style="text-align: center; margin-top: 10px;">
                                    <small>radius[12] = 4 â‰¥ length = 4 â†’ <strong style="color: #22c55e;">å›æ–‡ï¼</strong></small>
                                </p>
                            </div>
                        </div>

                        <div class="code-snippet">
                            function isPalindrome(radius: number[], l: number, r: number): boolean {
                            const startIdx = l - 1; // 1-indexed â†’ 0-indexed
                            const endIdx = r - 1;

                            const center = startIdx + endIdx + 1; // å‰å‡¦ç†æ–‡å­—åˆ—ã§ã®ä¸­å¿ƒ
                            const len = endIdx - startIdx + 1; // éƒ¨åˆ†æ–‡å­—åˆ—ã®é•·ã•

                            return radius[center] >= len; // O(1)åˆ¤å®š
                            }
                        </div>
                    </div>
                </div>

                <div class="algorithm-section animation">
                    <h2>ğŸ“‹ å…¨ã‚¯ã‚¨ãƒªå‡¦ç†ä¾‹</h2>
                    <div class="example">
                        <h3>å…¥åŠ›ä¾‹ã®å®Œå…¨è§£æ</h3>
                        <table>
                            <thead>
                                <tr>
                                    <th>ã‚¯ã‚¨ãƒª</th>
                                    <th>ç¯„å›²</th>
                                    <th>éƒ¨åˆ†æ–‡å­—åˆ—</th>
                                    <th>ä¸­å¿ƒä½ç½®</th>
                                    <th>å¿…è¦åŠå¾„</th>
                                    <th>å®Ÿéš›åŠå¾„</th>
                                    <th>çµæœ</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>1</td>
                                    <td>[5,8]</td>
                                    <td>"issi"</td>
                                    <td>12</td>
                                    <td>4</td>
                                    <td>4</td>
                                    <td style="color: #22c55e; font-weight: bold;">Yes</td>
                                </tr>
                                <tr>
                                    <td>2</td>
                                    <td>[6,10]</td>
                                    <td>"ssipp"</td>
                                    <td>15</td>
                                    <td>5</td>
                                    <td>3</td>
                                    <td style="color: #ef4444; font-weight: bold;">No</td>
                                </tr>
                                <tr>
                                    <td>3</td>
                                    <td>[2,8]</td>
                                    <td>"ississi"</td>
                                    <td>9</td>
                                    <td>7</td>
                                    <td>7</td>
                                    <td style="color: #22c55e; font-weight: bold;">Yes</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="interactive-demo animation">
                    <h2>ğŸ® ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ‡ãƒ¢</h2>
                    <p>æ–‡å­—åˆ—ã¨ã‚¯ã‚¨ãƒªã‚’å…¥åŠ›ã—ã¦ã€ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®å‹•ä½œã‚’ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼</p>

                    <div style="text-align: center;">
                        <input type="text" id="demoString" class="demo-input" placeholder="æ–‡å­—åˆ—ã‚’å…¥åŠ› (ä¾‹: mississippi)" value="mississippi">
                        <br>
                        <input type="number" id="demoL" class="demo-input" placeholder="é–‹å§‹ä½ç½®" value="5" style="width: 100px;">
                        <input type="number" id="demoR" class="demo-input" placeholder="çµ‚äº†ä½ç½®" value="8" style="width: 100px;">
                        <br>
                        <button onclick="runDemo()" class="demo-button">ğŸ” åˆ¤å®šå®Ÿè¡Œ</button>
                    </div>

                    <div id="demoResult" style="margin-top: 20px; padding: 15px; background: white; border-radius: 8px; display: none;">
                        <h4>çµæœ:</h4>
                        <div id="resultContent"></div>
                    </div>
                </div>

                <div class="algorithm-section animation">
                    <h2>ğŸš€ æœ€é©åŒ–ã®ãƒã‚¤ãƒ³ãƒˆ</h2>
                    <div class="complexity">
                        <h3>ãƒ¡ãƒ¢ãƒªåŠ¹ç‡åŒ–</h3>
                        <ul>
                            <li><strong>é…åˆ—ã®å†åˆ©ç”¨:</strong> å¿…è¦æœ€å°é™ã®ãƒ¡ãƒ¢ãƒªä½¿ç”¨</li>
                            <li><strong>å‹ã®æœ€é©åŒ–:</strong> TypeScriptã®å‹ã‚·ã‚¹ãƒ†ãƒ æ´»ç”¨</li>
                            <li><strong>ã‚¬ãƒ™ãƒ¼ã‚¸ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³è€ƒæ…®:</strong> ä¸è¦ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆç”Ÿæˆå›é¿</li>
                        </ul>

                        <h3>å®Ÿè¡Œæ™‚é–“æœ€é©åŒ–</h3>
                        <ul>
                            <li><strong>äº‹å‰è¨ˆç®—:</strong> O(N)æ™‚é–“ã§ã®å‰å‡¦ç†</li>
                            <li><strong>å¯¾ç§°æ€§æ´»ç”¨:</strong> é‡è¤‡è¨ˆç®—ã®å‰Šæ¸›</li>
                            <li><strong>ã‚­ãƒ£ãƒƒã‚·ãƒ¥åŠ¹ç‡:</strong> é€£ç¶šãƒ¡ãƒ¢ãƒªã‚¢ã‚¯ã‚»ã‚¹</li>
                        </ul>
                    </div>
                </div>
            </div>

            <script>
                function runDemo() {
                    const str = document.getElementById('demoString').value;
                    const l = parseInt(document.getElementById('demoL').value);
                    const r = parseInt(document.getElementById('demoR').value);

                    if (!str || !l || !r || l > r || l < 1 || r > str.length) {
                        alert('æœ‰åŠ¹ãªå…¥åŠ›ã‚’è¡Œã£ã¦ãã ã•ã„');
                        return;
                    }

                    // Manacher's algorithm implementation
                    const processed = '#' + str.split('').join('#') + '#';
                    const n = processed.length;
                    const radius = new Array(n).fill(0);
                    let center = 0, right = 0;

                    for (let i = 0; i < n; i++) {
                        if (i < right) {
                            radius[i] = Math.min(right - i, radius[2 * center - i]);
                        }

                        while (i + radius[i] + 1 < n &&
                            i - radius[i] - 1 >= 0 &&
                            processed[i + radius[i] + 1] === processed[i - radius[i] - 1]) {
                            radius[i]++;
                        }

                        if (i + radius[i] > right) {
                            center = i;
                            right = i + radius[i];
                        }
                    }

                    // Check palindrome
                    const startIdx = l - 1;
                    const endIdx = r - 1;
                    const centerPos = startIdx + endIdx + 1;
                    const len = endIdx - startIdx + 1;
                    const substring = str.substring(l - 1, r);
                    const isPalin = radius[centerPos] >= len;

                    const resultDiv = document.getElementById('demoResult');
                    const contentDiv = document.getElementById('resultContent');

                    contentDiv.innerHTML = `
                <p><strong>æ–‡å­—åˆ—:</strong> "${str}"</p>
                <p><strong>ã‚¯ã‚¨ãƒªç¯„å›²:</strong> [${l}, ${r}]</p>
                <p><strong>éƒ¨åˆ†æ–‡å­—åˆ—:</strong> "${substring}"</p>
                <p><strong>å‰å‡¦ç†æ–‡å­—åˆ—:</strong> "${processed}"</p>
                <p><strong>ä¸­å¿ƒä½ç½®:</strong> ${centerPos}</p>
                <p><strong>å¿…è¦åŠå¾„:</strong> ${len}</p>
                <p><strong>å®Ÿéš›åŠå¾„:</strong> ${radius[centerPos]}</p>
                <p><strong>åˆ¤å®šçµæœ:</strong> <span style="color: ${isPalin ? '#22c55e' : '#ef4444'}; font-weight: bold; font-size: 1.2em;">${isPalin ? 'Yes (å›æ–‡)' : 'No (éå›æ–‡)'}</span></p>
            `;

                    resultDiv.style.display = 'block';
                    resultDiv.scrollIntoView({ behavior: 'smooth' });
                }

                // Add animation on scroll
                const observerOptions = {
                    threshold: 0.1,
                    rootMargin: '0px 0px -50px 0px'
                };

                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('animation');
                        }
                    });
                }, observerOptions);

                document.querySelectorAll('.algorithm-section').forEach(section => {
                    observer.observe(section);
                });
            </script>
    </body>

</html>